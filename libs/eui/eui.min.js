var __reflect=this&&this.__reflect||function(p,c,t){p.__class__=c,t?t.push(c):t=[c],p.__types__=p.__types__?t.concat(p.__types__):t};var __extends=this&&this.__extends||function __extends(t,e){function r(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);r.prototype=e.prototype,t.prototype=new r};var eui;(function(eui){var sys;(function(sys){var Validator=function(_super){__extends(Validator,_super);function Validator(){var _this=_super.call(this)||this;_this.targetLevel=Number.POSITIVE_INFINITY;_this.invalidatePropertiesFlag=false;_this.invalidateClientPropertiesFlag=false;_this.invalidatePropertiesQueue=new DepthQueue;_this.invalidateSizeFlag=false;_this.invalidateClientSizeFlag=false;_this.invalidateSizeQueue=new DepthQueue;_this.invalidateDisplayListFlag=false;_this.invalidateDisplayListQueue=new DepthQueue;_this.eventDisplay=new egret.Bitmap;_this.listenersAttached=false;return _this}Validator.prototype.invalidateProperties=function(client){if(!this.invalidatePropertiesFlag){this.invalidatePropertiesFlag=true;if(!this.listenersAttached)this.attachListeners()}if(this.targetLevel<=client.$nestLevel)this.invalidateClientPropertiesFlag=true;this.invalidatePropertiesQueue.insert(client)};Validator.prototype.validateProperties=function(){var queue=this.invalidatePropertiesQueue;var client=queue.shift();while(client){if(client.$stage){client.validateProperties()}client=queue.shift()}if(queue.isEmpty())this.invalidatePropertiesFlag=false};Validator.prototype.invalidateSize=function(client){if(!this.invalidateSizeFlag){this.invalidateSizeFlag=true;if(!this.listenersAttached)this.attachListeners()}if(this.targetLevel<=client.$nestLevel)this.invalidateClientSizeFlag=true;this.invalidateSizeQueue.insert(client)};Validator.prototype.validateSize=function(){var queue=this.invalidateSizeQueue;var client=queue.pop();while(client){if(client.$stage){client.validateSize()}client=queue.pop()}if(queue.isEmpty())this.invalidateSizeFlag=false};Validator.prototype.invalidateDisplayList=function(client){if(!this.invalidateDisplayListFlag){this.invalidateDisplayListFlag=true;if(!this.listenersAttached)this.attachListeners()}this.invalidateDisplayListQueue.insert(client)};Validator.prototype.validateDisplayList=function(){var queue=this.invalidateDisplayListQueue;var client=queue.shift();while(client){if(client.$stage){client.validateDisplayList()}client=queue.shift()}if(queue.isEmpty())this.invalidateDisplayListFlag=false};Validator.prototype.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this);this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this);egret.sys.$invalidateRenderFlag=true;this.listenersAttached=true};Validator.prototype.doPhasedInstantiationCallBack=function(event){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this);this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this);this.doPhasedInstantiation()};Validator.prototype.doPhasedInstantiation=function(){if(this.invalidatePropertiesFlag){this.validateProperties()}if(this.invalidateSizeFlag){this.validateSize()}if(this.invalidateDisplayListFlag){this.validateDisplayList()}if(this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag){this.attachListeners()}else{this.listenersAttached=false}};Validator.prototype.validateClient=function(target){var obj;var done=false;var oldTargetLevel=this.targetLevel;if(this.targetLevel===Number.POSITIVE_INFINITY)this.targetLevel=target.$nestLevel;var propertiesQueue=this.invalidatePropertiesQueue;var sizeQueue=this.invalidateSizeQueue;var displayListQueue=this.invalidateDisplayListQueue;while(!done){done=true;obj=propertiesQueue.removeSmallestChild(target);while(obj){if(obj.$stage){obj.validateProperties()}obj=propertiesQueue.removeSmallestChild(target)}if(propertiesQueue.isEmpty()){this.invalidatePropertiesFlag=false}this.invalidateClientPropertiesFlag=false;obj=sizeQueue.removeLargestChild(target);while(obj){if(obj.$stage){obj.validateSize()}if(this.invalidateClientPropertiesFlag){obj=propertiesQueue.removeSmallestChild(target);if(obj){propertiesQueue.insert(obj);done=false;break}}obj=sizeQueue.removeLargestChild(target)}if(sizeQueue.isEmpty()){this.invalidateSizeFlag=false}this.invalidateClientPropertiesFlag=false;this.invalidateClientSizeFlag=false;obj=displayListQueue.removeSmallestChild(target);while(obj){if(obj.$stage){obj.validateDisplayList()}if(this.invalidateClientPropertiesFlag){obj=propertiesQueue.removeSmallestChild(target);if(obj){propertiesQueue.insert(obj);done=false;break}}if(this.invalidateClientSizeFlag){obj=sizeQueue.removeLargestChild(target);if(obj){sizeQueue.insert(obj);done=false;break}}obj=displayListQueue.removeSmallestChild(target)}if(displayListQueue.isEmpty()){this.invalidateDisplayListFlag=false}}if(oldTargetLevel===Number.POSITIVE_INFINITY){this.targetLevel=Number.POSITIVE_INFINITY}};return Validator}(egret.EventDispatcher);sys.Validator=Validator;__reflect(Validator.prototype,"eui.sys.Validator");var DepthQueue=function(){function DepthQueue(){this.depthBins={};this.minDepth=0;this.maxDepth=-1}DepthQueue.prototype.insert=function(client){var depth=client.$nestLevel;if(this.maxDepth<this.minDepth){this.minDepth=this.maxDepth=depth}else{if(depth<this.minDepth)this.minDepth=depth;if(depth>this.maxDepth)this.maxDepth=depth}var bin=this.depthBins[depth];if(!bin){bin=this.depthBins[depth]=new DepthBin}bin.insert(client)};DepthQueue.prototype.pop=function(){var client;var minDepth=this.minDepth;if(minDepth<=this.maxDepth){var bin=this.depthBins[this.maxDepth];while(!bin||bin.length===0){this.maxDepth--;if(this.maxDepth<minDepth)return null;bin=this.depthBins[this.maxDepth]}client=bin.pop();while(!bin||bin.length==0){this.maxDepth--;if(this.maxDepth<minDepth)break;bin=this.depthBins[this.maxDepth]}}return client};DepthQueue.prototype.shift=function(){var client;var maxDepth=this.maxDepth;if(this.minDepth<=maxDepth){var bin=this.depthBins[this.minDepth];while(!bin||bin.length===0){this.minDepth++;if(this.minDepth>maxDepth)return null;bin=this.depthBins[this.minDepth]}client=bin.pop();while(!bin||bin.length==0){this.minDepth++;if(this.minDepth>maxDepth)break;bin=this.depthBins[this.minDepth]}}return client};DepthQueue.prototype.removeLargestChild=function(client){var hashCode=client.$hashCode;var nestLevel=client.$nestLevel;var max=this.maxDepth;var min=nestLevel;while(min<=max){var bin=this.depthBins[max];if(bin&&bin.length>0){if(max===nestLevel){if(bin.map[hashCode]){bin.remove(client);return client}}else if(egret.is(client,"egret.DisplayObjectContainer")){var items=bin.items;var length_1=bin.length;for(var i=0;i<length_1;i++){var value=items[i];if(client.contains(value)){bin.remove(value);return value}}}else{break}max--}else{if(max==this.maxDepth){this.maxDepth--}max--;if(max<min)break}}return null};DepthQueue.prototype.removeSmallestChild=function(client){var nestLevel=client.$nestLevel;var min=nestLevel;var max=this.maxDepth;var hashCode=client.$hashCode;while(min<=max){var bin=this.depthBins[min];if(bin&&bin.length>0){if(min===nestLevel){if(bin.map[hashCode]){bin.remove(client);return client}}else if(egret.is(client,"egret.DisplayObjectContainer")){var items=bin.items;var length_2=bin.length;for(var i=0;i<length_2;i++){var value=items[i];if(client.contains(value)){bin.remove(value);return value}}}else{break}min++}else{if(min==this.minDepth)this.minDepth++;min++;if(min>max)break}}return null};DepthQueue.prototype.isEmpty=function(){return this.minDepth>this.maxDepth};return DepthQueue}();__reflect(DepthQueue.prototype,"DepthQueue");var DepthBin=function(){function DepthBin(){this.map={};this.items=[];this.length=0}DepthBin.prototype.insert=function(client){var hashCode=client.$hashCode;if(this.map[hashCode]){return}this.map[hashCode]=true;this.length++;this.items.push(client)};DepthBin.prototype.pop=function(){var client=this.items.pop();if(client){this.length--;if(this.length===0){this.map={}}else{this.map[client.$hashCode]=false}}return client};DepthBin.prototype.remove=function(client){var index=this.items.indexOf(client);if(index>=0){this.items.splice(index,1);this.length--;if(this.length===0){this.map={}}else{this.map[client.$hashCode]=false}}};return DepthBin}();__reflect(DepthBin.prototype,"DepthBin")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){function registerProperty(classDefinition,property,type,asDefault){if(true){if(!classDefinition){egret.$error(1003,"classDefinition")}if(!classDefinition.prototype){egret.$error(1012,"classDefinition")}if(!property){egret.$error(1003,"property")}if(!type){egret.$error(1003,"type")}}var prototype=classDefinition.prototype;prototype.__meta__=prototype.__meta__||{};prototype.__meta__[property]=type;if(asDefault){prototype.__defaultProperty__=property}}eui.registerProperty=registerProperty})(eui||(eui={}));var eui;(function(eui){var State=function(_super){__extends(State,_super);function State(name,overrides){if(overrides===void 0){overrides=[]}var _this=_super.call(this)||this;_this.name=name;_this.overrides=overrides;return _this}State.prototype.initialize=function(host,stage){var overrides=this.overrides;var length=overrides.length;for(var i=0;i<length;i++){var addItems=overrides[i];if(addItems instanceof eui.AddItems){var target=host[addItems.target];if(target&&target instanceof eui.Image&&!target.$parent){stage.addChild(target);stage.removeChild(target)}}}};return State}(egret.HashObject);eui.State=State;__reflect(State.prototype,"eui.State")})(eui||(eui={}));(function(eui){var sys;(function(sys){var StateClient=function(){function StateClient(){}Object.defineProperty(StateClient.prototype,"states",{get:function(){return this.$stateValues.states},set:function(value){if(!value)value=[];var values=this.$stateValues;values.states=value;var statesMap={};var length=value.length;for(var i=0;i<length;i++){var state=value[i];statesMap[state.name]=state}values.statesMap=statesMap;if(values.parent){this.commitCurrentState()}},enumerable:true,configurable:true});Object.defineProperty(StateClient.prototype,"currentState",{get:function(){return this.$stateValues.currentState},set:function(value){var values=this.$stateValues;values.explicitState=value;values.currentState=value;this.commitCurrentState()},enumerable:true,configurable:true});StateClient.prototype.commitCurrentState=function(){var values=this.$stateValues;if(!values.parent){return}var destination=values.statesMap[values.currentState];if(!destination){if(values.states.length>0){values.currentState=values.states[0].name}else{return}}if(values.oldState==values.currentState){return}var parent=values.parent;var state=values.statesMap[values.oldState];if(state){var overrides=state.overrides;var length_3=overrides.length;for(var i=0;i<length_3;i++){overrides[i].remove(this,parent)}}values.oldState=values.currentState;state=values.statesMap[values.currentState];if(state){var overrides=state.overrides;var length_4=overrides.length;for(var i=0;i<length_4;i++){overrides[i].apply(this,parent)}}};StateClient.prototype.hasState=function(stateName){return!!this.$stateValues.statesMap[stateName]};StateClient.prototype.initializeStates=function(stage){this.$stateValues.intialized=true;var states=this.states;var length=states.length;for(var i=0;i<length;i++){states[i].initialize(this,stage)}};return StateClient}();sys.StateClient=StateClient;__reflect(StateClient.prototype,"eui.sys.StateClient");var StateValues=function(){function StateValues(){this.intialized=false;this.statesMap={};this.states=[];this.oldState=null;this.explicitState=null;this.currentState=null;this.parent=null;this.stateIsDirty=false}return StateValues}();sys.StateValues=StateValues;__reflect(StateValues.prototype,"eui.sys.StateValues")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){function getAssets(source,callback,thisObject){var adapter=egret.getImplementation("eui.IAssetAdapter");if(!adapter){adapter=new eui.DefaultAssetAdapter}adapter.getAsset(source,function(content){callback.call(thisObject,content)},this)}eui.getAssets=getAssets;function getTheme(source,callback){var adapter=egret.getImplementation("eui.IThemeAdapter");if(!adapter){adapter=new eui.DefaultThemeAdapter}adapter.getTheme(source,function(data){callback(data)},function(e){console.log(e)},this)}eui.getTheme=getTheme})(eui||(eui={}));(function(eui){var sys;(function(sys){var UIComponentClass="eui.UIComponent";function isDeltaIdentity(m){return m.a===1&&m.b===0&&m.c===0&&m.d===1}var validator=new sys.Validator;var UIComponentImpl=function(_super){__extends(UIComponentImpl,_super);function UIComponentImpl(){var _this=_super.call(this)||this;_this.initializeUIValues();return _this}UIComponentImpl.prototype.initializeUIValues=function(){this.$UIComponent={0:NaN,1:NaN,2:NaN,3:NaN,4:NaN,5:NaN,6:NaN,7:NaN,8:NaN,9:NaN,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:NaN,19:NaN,20:0,21:0,22:0,23:0,24:true,25:true,26:true,27:false,28:false,29:false};this.$includeInLayout=true;this.$touchEnabled=true};UIComponentImpl.prototype.createChildren=function(){};UIComponentImpl.prototype.childrenCreated=function(){};UIComponentImpl.prototype.commitProperties=function(){var values=this.$UIComponent;if(values[22]!=values[10]||values[23]!=values[11]){this.dispatchEventWith(egret.Event.RESIZE);values[22]=values[10];values[23]=values[11]}if(values[20]!=this.$getX()||values[21]!=this.$getY()){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.MOVE);values[20]=this.$getX();values[21]=this.$getY()}};UIComponentImpl.prototype.measure=function(){};UIComponentImpl.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){};Object.defineProperty(UIComponentImpl.prototype,"includeInLayout",{get:function(){return this.$includeInLayout},set:function(value){value=!!value;if(this.$includeInLayout===value)return;this.$includeInLayout=true;this.invalidateParentLayout();this.$includeInLayout=value},enumerable:true,configurable:true});UIComponentImpl.prototype.$onAddToStage=function(stage,nestLevel){this.$super.$onAddToStage.call(this,stage,nestLevel);this.checkInvalidateFlag();var values=this.$UIComponent;if(!values[29]){values[29]=true;this.createChildren();this.childrenCreated();eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CREATION_COMPLETE)}};UIComponentImpl.prototype.checkInvalidateFlag=function(event){var values=this.$UIComponent;if(values[24]){validator.invalidateProperties(this)}if(values[25]){validator.invalidateSize(this)}if(values[26]){validator.invalidateDisplayList(this)}};Object.defineProperty(UIComponentImpl.prototype,"left",{get:function(){return this.$UIComponent[0]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[0]===value)return;values[0]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"right",{get:function(){return this.$UIComponent[1]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[1]===value)return;values[1]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"top",{get:function(){return this.$UIComponent[2]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[2]===value)return;values[2]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"bottom",{get:function(){return this.$UIComponent[3]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[3]==value)return;values[3]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"horizontalCenter",{get:function(){return this.$UIComponent[4]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[4]===value)return;values[4]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"verticalCenter",{get:function(){return this.$UIComponent[5]},set:function(value){if(!value||typeof value=="number"){value=+value}else{value=value.toString().trim()}var values=this.$UIComponent;if(values[5]===value)return;values[5]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"percentWidth",{get:function(){return this.$UIComponent[6]},set:function(value){value=+value;var values=this.$UIComponent;if(values[6]===value)return;values[6]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"percentHeight",{get:function(){return this.$UIComponent[7]},set:function(value){value=+value;var values=this.$UIComponent;if(values[7]===value)return;values[7]=value;this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"explicitWidth",{get:function(){return this.$UIComponent[8]},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"explicitHeight",{get:function(){return this.$UIComponent[9]},enumerable:true,configurable:true});UIComponentImpl.prototype.$getWidth=function(){this.validateSizeNow();return this.$UIComponent[10]};UIComponentImpl.prototype.$setWidth=function(value){value=+value;var values=this.$UIComponent;if(value<0||values[10]===value&&values[8]===value)return false;values[8]=value;if(isNaN(value))this.invalidateSize();this.invalidateProperties();this.invalidateDisplayList();this.invalidateParentLayout();return true};UIComponentImpl.prototype.validateSizeNow=function(){this.validateSize(true);this.updateFinalSize()};UIComponentImpl.prototype.$getHeight=function(){this.validateSizeNow();return this.$UIComponent[11]};UIComponentImpl.prototype.$setHeight=function(value){value=+value;var values=this.$UIComponent;if(value<0||values[11]===value&&values[9]===value)return false;values[9]=value;if(isNaN(value))this.invalidateSize();this.invalidateProperties();this.invalidateDisplayList();this.invalidateParentLayout();return true};Object.defineProperty(UIComponentImpl.prototype,"minWidth",{get:function(){return this.$UIComponent[12]},set:function(value){value=+value||0;var values=this.$UIComponent;if(value<0||values[12]===value){return}values[12]=value;this.invalidateSize();this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"maxWidth",{get:function(){return this.$UIComponent[13]},set:function(value){value=+value||0;var values=this.$UIComponent;if(value<0||values[13]===value){return}values[13]=value;this.invalidateSize();this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"minHeight",{get:function(){return this.$UIComponent[14]},set:function(value){value=+value||0;var values=this.$UIComponent;if(value<0||values[14]===value){return}values[14]=value;this.invalidateSize();this.invalidateParentLayout()},enumerable:true,configurable:true});Object.defineProperty(UIComponentImpl.prototype,"maxHeight",{get:function(){return this.$UIComponent[15]},set:function(value){value=+value||0;var values=this.$UIComponent;if(value<0||values[15]===value){return}values[15]=value;this.invalidateSize();this.invalidateParentLayout()},enumerable:true,configurable:true});UIComponentImpl.prototype.setMeasuredSize=function(width,height){var values=this.$UIComponent;values[16]=Math.ceil(+width||0);values[17]=Math.ceil(+height||0)};UIComponentImpl.prototype.setActualSize=function(w,h){var change=false;var values=this.$UIComponent;if(values[10]!==w){values[10]=w;change=true}if(values[11]!==h){values[11]=h;change=true}if(change){this.invalidateDisplayList();this.dispatchEventWith(egret.Event.RESIZE)}};UIComponentImpl.prototype.$updateUseTransform=function(){this.$super.$updateUseTransform.call(this);this.invalidateParentLayout()};UIComponentImpl.prototype.$setMatrix=function(matrix,needUpdateProperties){if(needUpdateProperties===void 0){needUpdateProperties=true}this.$super.$setMatrix.call(this,matrix,needUpdateProperties);this.invalidateParentLayout();return true};UIComponentImpl.prototype.$setAnchorOffsetX=function(value){this.$super.$setAnchorOffsetX.call(this,value);this.invalidateParentLayout();return true};UIComponentImpl.prototype.$setAnchorOffsetY=function(value){this.$super.$setAnchorOffsetY.call(this,value);this.invalidateParentLayout();return true};UIComponentImpl.prototype.$setX=function(value){var change=this.$super.$setX.call(this,value);if(change){this.invalidateParentLayout();this.invalidateProperties()}return change};UIComponentImpl.prototype.$setY=function(value){var change=this.$super.$setY.call(this,value);if(change){this.invalidateParentLayout();this.invalidateProperties()}return change};UIComponentImpl.prototype.invalidateProperties=function(){var values=this.$UIComponent;if(!values[24]){values[24]=true;if(this.$stage)validator.invalidateProperties(this)}};UIComponentImpl.prototype.validateProperties=function(){var values=this.$UIComponent;if(values[24]){this.commitProperties();values[24]=false}};UIComponentImpl.prototype.invalidateSize=function(){var values=this.$UIComponent;if(!values[25]){values[25]=true;if(this.$stage)validator.invalidateSize(this)}};UIComponentImpl.prototype.validateSize=function(recursive){if(recursive){var children=this.$children;if(children){var length_5=children.length;for(var i=0;i<length_5;i++){var child=children[i];if(egret.is(child,UIComponentClass)){child.validateSize(true)}}}}var values=this.$UIComponent;if(values[25]){var changed=this.measureSizes();if(changed){this.invalidateDisplayList();this.invalidateParentLayout()}values[25]=false}};UIComponentImpl.prototype.measureSizes=function(){var changed=false;var values=this.$UIComponent;if(!values[25])return changed;if(isNaN(values[8])||isNaN(values[9])){this.measure();if(values[16]<values[12]){values[16]=values[12]}if(values[16]>values[13]){values[16]=values[13]}if(values[17]<values[14]){values[17]=values[14]}if(values[17]>values[15]){values[17]=values[15]}}var preferredW=this.getPreferredUWidth();var preferredH=this.getPreferredUHeight();if(preferredW!==values[18]||preferredH!==values[19]){values[18]=preferredW;values[19]=preferredH;changed=true}return changed};UIComponentImpl.prototype.invalidateDisplayList=function(){var values=this.$UIComponent;if(!values[26]){values[26]=true;if(this.$stage)validator.invalidateDisplayList(this)}};UIComponentImpl.prototype.validateDisplayList=function(){var values=this.$UIComponent;if(values[26]){this.updateFinalSize();this.updateDisplayList(values[10],values[11]);values[26]=false}};UIComponentImpl.prototype.updateFinalSize=function(){var unscaledWidth=0;var unscaledHeight=0;var values=this.$UIComponent;if(values[27]){unscaledWidth=values[10]}else if(!isNaN(values[8])){unscaledWidth=values[8]}else{unscaledWidth=values[16]}if(values[28]){unscaledHeight=values[11]}else if(!isNaN(values[9])){unscaledHeight=values[9]}else{unscaledHeight=values[17]}this.setActualSize(unscaledWidth,unscaledHeight)};UIComponentImpl.prototype.validateNow=function(){if(this.$stage)validator.validateClient(this)};UIComponentImpl.prototype.invalidateParentLayout=function(){var parent=this.$parent;if(!parent||!this.$includeInLayout||!egret.is(parent,UIComponentClass))return;parent.invalidateSize();parent.invalidateDisplayList()};UIComponentImpl.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){layoutHeight=+layoutHeight;layoutWidth=+layoutWidth;if(layoutHeight<0||layoutWidth<0){return}var values=this.$UIComponent;var maxWidth=values[13];var maxHeight=values[15];var minWidth=Math.min(values[12],maxWidth);var minHeight=Math.min(values[14],maxHeight);var width;var height;if(isNaN(layoutWidth)){values[27]=false;width=this.getPreferredUWidth()}else{values[27]=true;width=Math.max(minWidth,Math.min(maxWidth,layoutWidth))}if(isNaN(layoutHeight)){values[28]=false;height=this.getPreferredUHeight()}else{values[28]=true;height=Math.max(minHeight,Math.min(maxHeight,layoutHeight))}var matrix=this.getAnchorMatrix();if(isDeltaIdentity(matrix)){this.setActualSize(width,height);return}var fitSize=sys.MatrixUtil.fitBounds(layoutWidth,layoutHeight,matrix,values[8],values[9],this.getPreferredUWidth(),this.getPreferredUHeight(),minWidth,minHeight,maxWidth,maxHeight);if(!fitSize){fitSize=egret.Point.create(minWidth,minHeight)}this.setActualSize(fitSize.x,fitSize.y);egret.Point.release(fitSize)};UIComponentImpl.prototype.setLayoutBoundsPosition=function(x,y){var matrix=this.$getMatrix();if(!isDeltaIdentity(matrix)||this.anchorOffsetX!=0||this.anchorOffsetY!=0){var bounds=egret.$TempRectangle;this.getLayoutBounds(bounds);x+=this.$getX()-bounds.x;y+=this.$getY()-bounds.y}var changed=this.$super.$setX.call(this,x);if(this.$super.$setY.call(this,y)||changed){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.MOVE)}};UIComponentImpl.prototype.getLayoutBounds=function(bounds){var values=this.$UIComponent;var w;if(values[27]){w=values[10]}else if(!isNaN(values[8])){w=values[8]}else{w=values[16]}var h;if(values[28]){h=values[11]}else if(!isNaN(values[9])){h=values[9]}else{h=values[17]}this.applyMatrix(bounds,w,h)};UIComponentImpl.prototype.getPreferredUWidth=function(){var values=this.$UIComponent;return isNaN(values[8])?values[16]:values[8]};UIComponentImpl.prototype.getPreferredUHeight=function(){var values=this.$UIComponent;return isNaN(values[9])?values[17]:values[9]};UIComponentImpl.prototype.getPreferredBounds=function(bounds){var w=this.getPreferredUWidth();var h=this.getPreferredUHeight();this.applyMatrix(bounds,w,h)};UIComponentImpl.prototype.applyMatrix=function(bounds,w,h){bounds.setTo(0,0,w,h);var matrix=this.getAnchorMatrix();if(isDeltaIdentity(matrix)){bounds.x+=matrix.tx;bounds.y+=matrix.ty}else{matrix.$transformBounds(bounds)}};UIComponentImpl.prototype.getAnchorMatrix=function(){var matrix=this.$getMatrix();var offsetX=this.anchorOffsetX;var offsetY=this.anchorOffsetY;if(offsetX!=0||offsetY!=0){var tempM=egret.$TempMatrix;matrix.$preMultiplyInto(tempM.setTo(1,0,0,1,-offsetX,-offsetY),tempM);return tempM}return matrix};return UIComponentImpl}(egret.DisplayObject);sys.UIComponentImpl=UIComponentImpl;__reflect(UIComponentImpl.prototype,"eui.sys.UIComponentImpl",["eui.UIComponent","egret.DisplayObject"]);function isEmptyFunction(prototype,key){if(typeof prototype[key]!="function"){return false}var body=prototype[key].toString();var index=body.indexOf("{");var lastIndex=body.lastIndexOf("}");body=body.substring(index+1,lastIndex);return body.trim()==""}function mixin(target,template){for(var property in template){if(property!="prototype"&&template.hasOwnProperty(property)){target[property]=template[property]}}var prototype=target.prototype;var protoBase=template.prototype;var keys=Object.keys(protoBase);var length=keys.length;for(var i=0;i<length;i++){var key=keys[i];if(key=="__meta__"){continue}if(!prototype.hasOwnProperty(key)||isEmptyFunction(prototype,key)){var value=Object.getOwnPropertyDescriptor(protoBase,key);Object.defineProperty(prototype,key,value)}}}sys.mixin=mixin;function implementUIComponent(descendant,base,isContainer){mixin(descendant,UIComponentImpl);var prototype=descendant.prototype;prototype.$super=base.prototype;eui.registerProperty(descendant,"left","Percentage");eui.registerProperty(descendant,"right","Percentage");eui.registerProperty(descendant,"top","Percentage");eui.registerProperty(descendant,"bottom","Percentage");eui.registerProperty(descendant,"horizontalCenter","Percentage");eui.registerProperty(descendant,"verticalCenter","Percentage");if(isContainer){prototype.$childAdded=function(child,index){this.invalidateSize();this.invalidateDisplayList()};prototype.$childRemoved=function(child,index){this.invalidateSize();this.invalidateDisplayList()}}if(true){Object.defineProperty(prototype,"preferredWidth",{get:function(){var bounds=egret.$TempRectangle;this.getPreferredBounds(bounds);return bounds.width},enumerable:true,configurable:true});Object.defineProperty(prototype,"preferredHeight",{get:function(){var bounds=egret.$TempRectangle;this.getPreferredBounds(bounds);return bounds.height},enumerable:true,configurable:true});Object.defineProperty(prototype,"preferredX",{get:function(){var bounds=egret.$TempRectangle;this.getPreferredBounds(bounds);return bounds.x},enumerable:true,configurable:true});Object.defineProperty(prototype,"preferredY",{get:function(){var bounds=egret.$TempRectangle;this.getPreferredBounds(bounds);return bounds.y},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutBoundsX",{get:function(){var bounds=egret.$TempRectangle;this.getLayoutBounds(bounds);return bounds.x},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutBoundsY",{get:function(){var bounds=egret.$TempRectangle;this.getLayoutBounds(bounds);return bounds.y},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutBoundsWidth",{get:function(){var bounds=egret.$TempRectangle;this.getLayoutBounds(bounds);return bounds.width},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutBoundsHeight",{get:function(){var bounds=egret.$TempRectangle;this.getLayoutBounds(bounds);return bounds.height},enumerable:true,configurable:true});Object.defineProperty(prototype,"measuredWidth",{get:function(){return this.$UIComponent[16]},enumerable:true,configurable:true});Object.defineProperty(prototype,"measuredHeight",{get:function(){return this.$UIComponent[17]},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutWidthExplicitlySet",{get:function(){return this.$UIComponent[27]},enumerable:true,configurable:true});Object.defineProperty(prototype,"layoutHeightExplicitlySet",{get:function(){return this.$UIComponent[28]},enumerable:true,configurable:true});Object.defineProperty(prototype,"invalidatePropertiesFlag",{get:function(){return this.$UIComponent[24]},enumerable:true,configurable:true});Object.defineProperty(prototype,"invalidateSizeFlag",{get:function(){return this.$UIComponent[25]},enumerable:true,configurable:true});Object.defineProperty(prototype,"invalidateDisplayListFlag",{get:function(){return this.$UIComponent[26]},enumerable:true,configurable:true})}}sys.implementUIComponent=implementUIComponent})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var Group=function(_super){__extends(Group,_super);function Group(){var _this=_super.call(this)||this;_this.$layout=null;_this.$stateValues=new eui.sys.StateValues;_this.initializeUIValues();_this.$Group={0:0,1:0,2:0,3:0,4:false,5:false};_this.$stateValues.parent=_this;return _this}Object.defineProperty(Group.prototype,"elementsContent",{set:function(value){if(value){var length_6=value.length;for(var i=0;i<length_6;i++){this.addChild(value[i])}}},enumerable:true,configurable:true});Object.defineProperty(Group.prototype,"layout",{get:function(){return this.$layout},set:function(value){this.$setLayout(value)},enumerable:true,configurable:true});Group.prototype.$setLayout=function(value){if(this.$layout==value)return false;if(this.$layout){this.$layout.target=null}this.$layout=value;if(value){value.target=this}this.invalidateSize();this.invalidateDisplayList();return true};Object.defineProperty(Group.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:true,configurable:true});Object.defineProperty(Group.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:true,configurable:true});Group.prototype.setContentSize=function(width,height){width=Math.ceil(+width||0);height=Math.ceil(+height||0);var values=this.$Group;var wChange=values[0]!==width;var hChange=values[1]!==height;if(!wChange&&!hChange){return}values[0]=width;values[1]=height;if(wChange){eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"contentWidth")}if(hChange){eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"contentHeight")}};Object.defineProperty(Group.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(value){value=!!value;var values=this.$Group;if(value===values[4])return;values[4]=value;this.updateScrollRect()},enumerable:true,configurable:true});Object.defineProperty(Group.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(value){value=+value||0;var values=this.$Group;if(value===values[2])return;values[2]=value;if(this.updateScrollRect()&&this.$layout){this.$layout.scrollPositionChanged()}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"scrollH")},enumerable:true,configurable:true});Object.defineProperty(Group.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(value){value=+value||0;var values=this.$Group;if(value==values[3])return;values[3]=value;if(this.updateScrollRect()&&this.$layout){this.$layout.scrollPositionChanged()}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"scrollV")},enumerable:true,configurable:true});Group.prototype.updateScrollRect=function(){var values=this.$Group;var hasClip=values[4];if(hasClip){var uiValues=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(values[2],values[3],uiValues[10],uiValues[11])}else if(this.$scrollRect){this.scrollRect=null}return hasClip};Object.defineProperty(Group.prototype,"numElements",{get:function(){return this.$children.length},enumerable:true,configurable:true});Group.prototype.getElementAt=function(index){return this.$children[index]};Group.prototype.getVirtualElementAt=function(index){return this.getElementAt(index)};Group.prototype.setVirtualElementIndicesInView=function(startIndex,endIndex){};Object.defineProperty(Group.prototype,"touchThrough",{get:function(){return this.$Group[5]},set:function(value){this.$Group[5]=!!value},enumerable:true,configurable:true});Group.prototype.$hitTest=function(stageX,stageY){var target=_super.prototype.$hitTest.call(this,stageX,stageY);if(target||this.$Group[5]){return target}if(!this.$visible||!this.touchEnabled||this.scaleX===0||this.scaleY===0){return null}var point=this.globalToLocal(stageX,stageY,egret.$TempPoint);var values=this.$UIComponent;var bounds=egret.$TempRectangle.setTo(0,0,values[10],values[11]);var scrollRect=this.$scrollRect;if(scrollRect){bounds.x=scrollRect.x;bounds.y=scrollRect.y}if(bounds.contains(point.x,point.y)){return this}return null};Group.prototype.invalidateState=function(){var values=this.$stateValues;if(values.stateIsDirty){return}values.stateIsDirty=true;this.invalidateProperties()};Group.prototype.getCurrentState=function(){return""};Group.prototype.createChildren=function(){if(!this.$layout){this.$setLayout(new eui.BasicLayout)}this.initializeStates(this.$stage)};Group.prototype.childrenCreated=function(){};Group.prototype.commitProperties=function(){eui.sys.UIComponentImpl.prototype["commitProperties"].call(this);var values=this.$stateValues;if(values.stateIsDirty){values.stateIsDirty=false;if(!values.explicitState){values.currentState=this.getCurrentState();this.commitCurrentState()}}};Group.prototype.measure=function(){if(!this.$layout){this.setMeasuredSize(0,0);return}this.$layout.measure()};Group.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){if(this.$layout){this.$layout.updateDisplayList(unscaledWidth,unscaledHeight)}this.updateScrollRect()};Group.prototype.invalidateParentLayout=function(){};Group.prototype.setMeasuredSize=function(width,height){};Group.prototype.invalidateProperties=function(){};Group.prototype.validateProperties=function(){};Group.prototype.invalidateSize=function(){};Group.prototype.validateSize=function(recursive){};Group.prototype.invalidateDisplayList=function(){};Group.prototype.validateDisplayList=function(){};Group.prototype.validateNow=function(){};Group.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){};Group.prototype.setLayoutBoundsPosition=function(x,y){};Group.prototype.getLayoutBounds=function(bounds){};Group.prototype.getPreferredBounds=function(bounds){};return Group}(egret.DisplayObjectContainer);eui.Group=Group;__reflect(Group.prototype,"eui.Group",["eui.IViewport","eui.UIComponent","egret.DisplayObject"]);eui.sys.implementUIComponent(Group,egret.DisplayObjectContainer,true);eui.sys.mixin(Group,eui.sys.StateClient);eui.registerProperty(Group,"elementsContent","Array",true);eui.registerProperty(Group,"states","State[]")})(eui||(eui={}));var eui;(function(eui){var key="__bindables__";function registerBindable(instance,property){if(true){if(!instance){egret.$error(1003,"instance")}if(!property){egret.$error(1003,"property")}}if(instance.hasOwnProperty(key)){instance[key].push(property)}else{var list=[property];if(instance[key]){list=instance[key].concat(list)}instance[key]=list}}eui.registerBindable=registerBindable})(eui||(eui={}));var eui;(function(eui){var Component=function(_super){__extends(Component,_super);function Component(){var _this=_super.call(this)||this;_this.initializeUIValues();_this.$Component={0:null,1:null,2:"",3:true,4:false,5:false,6:true,7:true,8:null};_this.$touchEnabled=true;return _this}Object.defineProperty(Component.prototype,"hostComponentKey",{get:function(){return this.$Component[0]},set:function(value){this.$Component[0]=value},enumerable:true,configurable:true});Object.defineProperty(Component.prototype,"skinName",{get:function(){return this.$Component[1]},set:function(value){var values=this.$Component;values[5]=true;if(values[1]==value)return;if(value){values[1]=value}else{var theme=egret.getImplementation("eui.Theme");if(theme){var skinName=theme.getSkinName(this);if(skinName){values[1]=skinName}}}this.$parseSkinName()},enumerable:true,configurable:true});Component.prototype.$parseSkinName=function(){var skinName=this.skinName;var skin;if(skinName){if(skinName.prototype){skin=new skinName}else if(typeof skinName=="string"){var clazz=void 0;var text=skinName.trim();if(text.charAt(0)=="<"){clazz=EXML.parse(text)}else{clazz=egret.getDefinitionByName(skinName);if(!clazz&&text.toLowerCase().indexOf(".exml")!=-1){EXML.load(skinName,this.onExmlLoaded,this,true);return}}if(clazz){skin=new clazz}}else{skin=skinName}}this.setSkin(skin)};Component.prototype.onExmlLoaded=function(clazz,url){if(this.skinName!=url){return}var skin=new clazz;this.setSkin(skin)};Object.defineProperty(Component.prototype,"skin",{get:function(){return this.$Component[8]},enumerable:true,configurable:true});Component.prototype.setSkin=function(skin){if(skin&&!(skin instanceof eui.Skin)){skin=null;true&&egret.$error(2202)}var values=this.$Component;var oldSkin=values[8];if(oldSkin){var skinParts=oldSkin.skinParts;var length_7=skinParts.length;for(var i=0;i<length_7;i++){var partName=skinParts[i];if(this[partName]){this.setSkinPart(partName,null)}}var children=oldSkin.$elementsContent;if(children){length_7=children.length;for(var i=0;i<length_7;i++){var child=children[i];if(child.$parent==this){this.removeChild(child)}}}oldSkin.hostComponent=null}values[8]=skin;if(skin){var skinParts=skin.skinParts;var length_8=skinParts.length;for(var i=0;i<length_8;i++){var partName=skinParts[i];var instance=skin[partName];if(instance){this.setSkinPart(partName,instance)}}var children=skin.$elementsContent;if(children){for(var i=children.length-1;i>=0;i--){this.addChildAt(children[i],0)}}skin.hostComponent=this}this.invalidateSize();this.invalidateDisplayList();this.dispatchEventWith(egret.Event.COMPLETE)};Component.prototype.setSkinPart=function(partName,instance){var oldInstance=this[partName];if(oldInstance){this.partRemoved(partName,oldInstance)}this[partName]=instance;if(instance){this.partAdded(partName,instance)}};Component.prototype.partAdded=function(partName,instance){};Component.prototype.partRemoved=function(partName,instance){};Component.prototype.$setTouchChildren=function(value){value=!!value;var values=this.$Component;values[6]=value;if(values[3]){values[6]=value;return _super.prototype.$setTouchChildren.call(this,value)}else{return true}};Component.prototype.$setTouchEnabled=function(value){value=!!value;var values=this.$Component;values[7]=value;if(values[3]){_super.prototype.$setTouchEnabled.call(this,value)}};Object.defineProperty(Component.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(value){value=!!value;this.$setEnabled(value)},enumerable:true,configurable:true});Component.prototype.$setEnabled=function(value){var values=this.$Component;if(value===values[3]){return false}values[3]=value;if(value){this.$touchEnabled=values[7];this.$touchChildren=values[6]}else{this.$touchEnabled=false;this.$touchChildren=false}this.invalidateState();return true};Object.defineProperty(Component.prototype,"currentState",{get:function(){var values=this.$Component;return values[2]?values[2]:this.getCurrentState()},set:function(value){var values=this.$Component;if(value==values[2]){return}values[2]=value;this.invalidateState()},enumerable:true,configurable:true});Component.prototype.invalidateState=function(){var values=this.$Component;if(values[4])return;values[4]=true;this.invalidateProperties()};Component.prototype.getCurrentState=function(){return""};Component.prototype.createChildren=function(){var values=this.$Component;if(!values[1]){var theme=egret.getImplementation("eui.Theme");if(theme){var skinName=theme.getSkinName(this);if(skinName){values[1]=skinName;this.$parseSkinName()}}}};Component.prototype.childrenCreated=function(){};Component.prototype.commitProperties=function(){eui.sys.UIComponentImpl.prototype["commitProperties"].call(this);var values=this.$Component;if(values[4]){values[4]=false;if(values[8]){values[8].currentState=this.currentState}}};Component.prototype.measure=function(){eui.sys.measure(this);var skin=this.$Component[8];if(!skin){return}var values=this.$UIComponent;if(!isNaN(skin.width)){values[16]=skin.width}else{if(values[16]<skin.minWidth){values[16]=skin.minWidth}if(values[16]>skin.maxWidth){values[16]=skin.maxWidth}}if(!isNaN(skin.height)){values[17]=skin.height}else{if(values[17]<skin.minHeight){values[17]=skin.minHeight}if(values[17]>skin.maxHeight){values[17]=skin.maxHeight}}};Component.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){eui.sys.updateDisplayList(this,unscaledWidth,unscaledHeight)};Component.prototype.invalidateParentLayout=function(){};Component.prototype.setMeasuredSize=function(width,height){};Component.prototype.invalidateProperties=function(){};Component.prototype.validateProperties=function(){};Component.prototype.invalidateSize=function(){};Component.prototype.validateSize=function(recursive){};Component.prototype.invalidateDisplayList=function(){};Component.prototype.validateDisplayList=function(){};Component.prototype.validateNow=function(){};Component.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){};Component.prototype.setLayoutBoundsPosition=function(x,y){};Component.prototype.getLayoutBounds=function(bounds){};Component.prototype.getPreferredBounds=function(bounds){};Component.prototype.unwatchAll=function(){if(this.skin&&this.skin.unwatchAll){this.skin.unwatchAll()}};return Component}(egret.DisplayObjectContainer);eui.Component=Component;__reflect(Component.prototype,"eui.Component",["eui.UIComponent","egret.DisplayObject"]);eui.registerProperty(Component,"skinName","Class");eui.sys.implementUIComponent(Component,egret.DisplayObjectContainer,true)})(eui||(eui={}));var eui;(function(eui){var DataGroup=function(_super){__extends(DataGroup,_super);function DataGroup(){var _this=_super.call(this)||this;_this.$dataProviderChanged=false;_this.$dataProvider=null;_this.$indexToRenderer=[];_this.$DataGroup={0:true,1:false,2:{},3:{},4:false,5:false,6:null,7:null,8:false,9:null,10:false,11:false,12:null,13:null,14:false};return _this}Object.defineProperty(DataGroup.prototype,"useVirtualLayout",{get:function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},set:function(value){value=!!value;var values=this.$DataGroup;if(value===values[0])return;values[0]=value;if(this.$layout)this.$layout.useVirtualLayout=value},enumerable:true,configurable:true});DataGroup.prototype.$setLayout=function(value){if(value==this.$layout)return false;if(this.$layout){this.$layout.setTypicalSize(0,0);this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}if(this.$layout&&value&&this.$layout.$useVirtualLayout!=value.$useVirtualLayout)this.onUseVirtualLayoutChanged();var result=_super.prototype.$setLayout.call(this,value);if(value){var rect=this.$DataGroup[9];if(rect){value.setTypicalSize(rect.width,rect.height)}value.useVirtualLayout=this.$DataGroup[0];value.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return result};DataGroup.prototype.onUseVirtualLayoutChanged=function(event){var values=this.$DataGroup;values[1]=true;values[10]=true;this.removeDataProviderListener();this.invalidateProperties()};DataGroup.prototype.setVirtualElementIndicesInView=function(startIndex,endIndex){if(!this.$layout||!this.$layout.$useVirtualLayout){return}var indexToRenderer=this.$indexToRenderer;var keys=Object.keys(indexToRenderer);var length=keys.length;for(var i=0;i<length;i++){var index=+keys[i];if(index<startIndex||index>endIndex){this.freeRendererByIndex(index)}}};DataGroup.prototype.getElementAt=function(index){return this.$indexToRenderer[index]};DataGroup.prototype.getVirtualElementAt=function(index){index=+index|0;if(index<0||index>=this.$dataProvider.length)return null;var renderer=this.$indexToRenderer[index];if(!renderer){var item=this.$dataProvider.getItemAt(index);renderer=this.createVirtualRenderer(item);this.$indexToRenderer[index]=renderer;this.updateRenderer(renderer,index,item);var values=this.$DataGroup;if(values[4]){renderer.validateNow();values[4]=false;this.rendererAdded(renderer,index,item)}}return renderer};DataGroup.prototype.freeRendererByIndex=function(index){var renderer=this.$indexToRenderer[index];if(renderer){delete this.$indexToRenderer[index];this.doFreeRenderer(renderer)}};DataGroup.prototype.doFreeRenderer=function(renderer){var values=this.$DataGroup;var rendererClass=values[2][renderer.$hashCode];var hashCode=rendererClass.$hashCode;if(!values[3][hashCode]){values[3][hashCode]=[]}values[3][hashCode].push(renderer);renderer.visible=false};DataGroup.prototype.invalidateSize=function(){if(!this.$DataGroup[4]){_super.prototype.invalidateSize.call(this)}};DataGroup.prototype.createVirtualRenderer=function(item){var renderer;var rendererClass=this.itemToRendererClass(item);var hashCode=rendererClass.$hashCode;var values=this.$DataGroup;var freeRenderers=values[3];if(freeRenderers[hashCode]&&freeRenderers[hashCode].length>0){renderer=freeRenderers[hashCode].pop();renderer.visible=true;this.invalidateDisplayList();return renderer}values[4]=true;return this.createOneRenderer(rendererClass)};DataGroup.prototype.createOneRenderer=function(rendererClass){var renderer=new rendererClass;var values=this.$DataGroup;values[2][renderer.$hashCode]=rendererClass;if(!egret.is(renderer,"eui.IItemRenderer")){return null}if(values[13]){this.setItemRenderSkinName(renderer,values[13])}this.addChild(renderer);return renderer};DataGroup.prototype.setItemRenderSkinName=function(renderer,skinName){if(renderer&&renderer instanceof eui.Component){var comp=renderer;if(!comp.$Component[5]){comp.skinName=skinName;comp.$Component[5]=false}}};Object.defineProperty(DataGroup.prototype,"dataProvider",{get:function(){return this.$dataProvider},set:function(value){this.$setDataProvider(value)},enumerable:true,configurable:true});DataGroup.prototype.$setDataProvider=function(value){if(this.$dataProvider==value||value&&!value.getItemAt)return false;this.removeDataProviderListener();this.$dataProvider=value;this.$dataProviderChanged=true;this.$DataGroup[10]=true;this.invalidateProperties();this.invalidateSize();this.invalidateDisplayList();return true};DataGroup.prototype.removeDataProviderListener=function(){if(this.$dataProvider)this.$dataProvider.removeEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)};DataGroup.prototype.onCollectionChange=function(event){switch(event.kind){case eui.CollectionEventKind.ADD:this.itemAddedHandler(event.items,event.location);break;case eui.CollectionEventKind.REMOVE:this.itemRemovedHandler(event.items,event.location);break;case eui.CollectionEventKind.UPDATE:case eui.CollectionEventKind.REPLACE:this.itemUpdatedHandler(event.items[0],event.location);break;case eui.CollectionEventKind.RESET:case eui.CollectionEventKind.REFRESH:{if(this.$layout&&this.$layout.$useVirtualLayout){var indexToRenderer=this.$indexToRenderer;var keys=Object.keys(indexToRenderer);var length_9=keys.length;for(var i=length_9-1;i>=0;i--){var index=+keys[i];this.freeRendererByIndex(index)}}this.$dataProviderChanged=true;this.invalidateProperties();break}default:{egret.$warn(2204,event.kind);break}}this.invalidateSize();this.invalidateDisplayList()};DataGroup.prototype.itemAddedHandler=function(items,index){var length=items.length;for(var i=0;i<length;i++){this.itemAdded(items[i],index+i)}this.resetRenderersIndices()};DataGroup.prototype.itemRemovedHandler=function(items,location){var length=items.length;for(var i=length-1;i>=0;i--){this.itemRemoved(items[i],location+i)}this.resetRenderersIndices()};DataGroup.prototype.itemAdded=function(item,index){if(this.$layout)this.$layout.elementAdded(index);if(this.$layout&&this.$layout.$useVirtualLayout){this.$indexToRenderer.splice(index,0,null);return}var renderer=this.createVirtualRenderer(item);this.$indexToRenderer.splice(index,0,renderer);if(renderer){this.updateRenderer(renderer,index,item);var values=this.$DataGroup;if(values[4]){values[4]=false;this.rendererAdded(renderer,index,item)}}};DataGroup.prototype.itemRemoved=function(item,index){if(this.$layout)this.$layout.elementRemoved(index);var oldRenderer=this.$indexToRenderer[index];if(this.$indexToRenderer.length>index)this.$indexToRenderer.splice(index,1);if(oldRenderer){if(this.$layout&&this.$layout.$useVirtualLayout){this.doFreeRenderer(oldRenderer)}else{this.rendererRemoved(oldRenderer,index,item);this.removeChild(oldRenderer)}}};DataGroup.prototype.resetRenderersIndices=function(){var indexToRenderer=this.$indexToRenderer;if(indexToRenderer.length==0)return;if(this.$layout&&this.$layout.$useVirtualLayout){var keys=Object.keys(indexToRenderer);var length_10=keys.length;for(var i=0;i<length_10;i++){var index=+keys[i];this.resetRendererItemIndex(index)}}else{var indexToRendererLength=indexToRenderer.length;for(var index=0;index<indexToRendererLength;index++){this.resetRendererItemIndex(index)}}};DataGroup.prototype.itemUpdatedHandler=function(item,location){if(this.$DataGroup[11]){return}var renderer=this.$indexToRenderer[location];if(renderer)this.updateRenderer(renderer,location,item)};DataGroup.prototype.resetRendererItemIndex=function(index){var renderer=this.$indexToRenderer[index];if(renderer)renderer.itemIndex=index};Object.defineProperty(DataGroup.prototype,"itemRenderer",{get:function(){return this.$DataGroup[6]},set:function(value){var values=this.$DataGroup;if(values[6]==value)return;values[6]=value;values[5]=true;values[8]=true;values[10]=true;this.removeDataProviderListener();this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(DataGroup.prototype,"itemRendererSkinName",{get:function(){return this.$DataGroup[13]},set:function(value){var values=this.$DataGroup;if(values[13]==value)return;values[13]=value;if(this.$UIComponent[29]){values[14]=true;this.invalidateProperties()}},enumerable:true,configurable:true});Object.defineProperty(DataGroup.prototype,"itemRendererFunction",{get:function(){return this.$DataGroup[7]},set:function(value){var values=this.$DataGroup;if(values[7]==value)return;values[7]=value;values[5]=true;values[8]=true;this.removeDataProviderListener();this.invalidateProperties()},enumerable:true,configurable:true});DataGroup.prototype.itemToRendererClass=function(item){var rendererClass;var values=this.$DataGroup;if(values[7]){rendererClass=values[7](item)}if(!rendererClass){rendererClass=values[6]}if(!rendererClass){rendererClass=eui.ItemRenderer}if(!rendererClass.$hashCode){rendererClass.$hashCode=egret.$hashCount++}return rendererClass};DataGroup.prototype.createChildren=function(){if(!this.$layout){var layout=new eui.VerticalLayout;layout.gap=0;layout.horizontalAlign=eui.JustifyAlign.CONTENT_JUSTIFY;this.$setLayout(layout)}_super.prototype.createChildren.call(this)};DataGroup.prototype.commitProperties=function(){var values=this.$DataGroup;if(values[5]||this.$dataProviderChanged||values[1]){this.removeAllRenderers();if(this.$layout)this.$layout.clearVirtualLayoutCache();this.setTypicalLayoutRect(null);values[1]=false;values[5]=false;if(this.$dataProvider)this.$dataProvider.addEventListener(eui.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this);if(this.$layout&&this.$layout.$useVirtualLayout){this.invalidateSize();this.invalidateDisplayList()}else{this.createRenderers()}if(this.$dataProviderChanged){this.$dataProviderChanged=false;this.scrollV=this.scrollH=0}}_super.prototype.commitProperties.call(this);if(values[8]){values[8]=false;if(this.$dataProvider&&this.$dataProvider.length>0){values[12]=this.$dataProvider.getItemAt(0);this.measureRendererSize()}}if(values[14]){values[14]=false;var skinName=values[13];var indexToRenderer=this.$indexToRenderer;var keys=Object.keys(indexToRenderer);var length_11=keys.length;for(var i=0;i<length_11;i++){var index=keys[i];this.setItemRenderSkinName(indexToRenderer[index],skinName)}var freeRenderers=values[3];keys=Object.keys(freeRenderers);length_11=keys.length;for(var i=0;i<length_11;i++){var hashCode=keys[i];var list=freeRenderers[hashCode];var length_12=list.length;for(var i_1=0;i_1<length_12;i_1++){this.setItemRenderSkinName(list[i_1],skinName)}}}};DataGroup.prototype.measure=function(){if(this.$layout&&this.$layout.$useVirtualLayout){this.ensureTypicalLayoutElement()}_super.prototype.measure.call(this)};DataGroup.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){var useVirtualLayout=this.$layout&&this.$layout.$useVirtualLayout;if(useVirtualLayout){this.ensureTypicalLayoutElement()}_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);var values=this.$DataGroup;if(useVirtualLayout){var rect=values[9];if(rect){var renderer=this.$indexToRenderer[0];if(renderer){var bounds=egret.$TempRectangle;renderer.getPreferredBounds(bounds);if(bounds.width!=rect.width||bounds.height!=rect.height){values[9]=null}}}}};DataGroup.prototype.ensureTypicalLayoutElement=function(){if(this.$DataGroup[9])return;if(this.$dataProvider&&this.$dataProvider.length>0){this.$DataGroup[12]=this.$dataProvider.getItemAt(0);this.measureRendererSize()}};DataGroup.prototype.measureRendererSize=function(){var values=this.$DataGroup;if(values[12]==undefined){this.setTypicalLayoutRect(null);return}var typicalRenderer=this.createVirtualRenderer(values[12]);if(!typicalRenderer){this.setTypicalLayoutRect(null);return}this.updateRenderer(typicalRenderer,0,values[12]);typicalRenderer.validateNow();var bounds=egret.$TempRectangle;typicalRenderer.getPreferredBounds(bounds);var rect=new egret.Rectangle(0,0,bounds.width,bounds.height);if(this.$layout&&this.$layout.$useVirtualLayout){if(values[4]){this.rendererAdded(typicalRenderer,0,values[12])}this.doFreeRenderer(typicalRenderer)}else{this.removeChild(typicalRenderer)}this.setTypicalLayoutRect(rect);values[4]=false};DataGroup.prototype.setTypicalLayoutRect=function(rect){this.$DataGroup[9]=rect;if(this.$layout){if(rect){this.$layout.setTypicalSize(rect.width,rect.height)}else{this.$layout.setTypicalSize(0,0)}}};DataGroup.prototype.removeAllRenderers=function(){var indexToRenderer=this.$indexToRenderer;var keys=Object.keys(indexToRenderer);var length=keys.length;for(var i=0;i<length;i++){var index=keys[i];var renderer=indexToRenderer[index];if(renderer){this.rendererRemoved(renderer,renderer.itemIndex,renderer.data);this.removeChild(renderer)}}this.$indexToRenderer=[];var values=this.$DataGroup;if(values[10]){var freeRenderers=values[3];var keys_1=Object.keys(freeRenderers);var length_13=keys_1.length;for(var i=0;i<length_13;i++){var hashCode=keys_1[i];var list=freeRenderers[hashCode];var length_14=list.length;for(var i_2=0;i_2<length_14;i_2++){var renderer=list[i_2];this.rendererRemoved(renderer,renderer.itemIndex,renderer.data);this.removeChild(renderer)}}values[3]={};values[2]={};values[10]=false}};DataGroup.prototype.createRenderers=function(){if(!this.$dataProvider)return;var index=0;var length=this.$dataProvider.length;for(var i=0;i<length;i++){var item=this.$dataProvider.getItemAt(i);var rendererClass=this.itemToRendererClass(item);var renderer=this.createOneRenderer(rendererClass);if(!renderer)continue;this.$indexToRenderer[index]=renderer;this.updateRenderer(renderer,index,item);this.rendererAdded(renderer,index,item);index++}};DataGroup.prototype.updateRenderer=function(renderer,itemIndex,data){var values=this.$DataGroup;values[11]=true;renderer.itemIndex=itemIndex;if(renderer.parent==this){this.setChildIndex(renderer,itemIndex)}renderer.data=data;values[11]=false;return renderer};Object.defineProperty(DataGroup.prototype,"numElements",{get:function(){if(!this.$dataProvider)return 0;return this.$dataProvider.length},enumerable:true,configurable:true});DataGroup.prototype.rendererAdded=function(renderer,index,item){};DataGroup.prototype.rendererRemoved=function(renderer,index,item){};return DataGroup}(eui.Group);eui.DataGroup=DataGroup;__reflect(DataGroup.prototype,"eui.DataGroup");eui.registerProperty(DataGroup,"itemRenderer","Class");eui.registerProperty(DataGroup,"itemRendererSkinName","Class");eui.registerProperty(DataGroup,"dataProvider","eui.ICollection",true)})(eui||(eui={}));var eui;(function(eui){var Button=function(_super){__extends(Button,_super);function Button(){var _this=_super.call(this)||this;_this.labelDisplay=null;_this._label="";_this.iconDisplay=null;_this._icon=null;_this.touchCaptured=false;_this.touchChildren=false;_this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,_this.onTouchBegin,_this);return _this}Object.defineProperty(Button.prototype,"label",{get:function(){return this._label},set:function(value){this._label=value;if(this.labelDisplay){this.labelDisplay.text=value}},enumerable:true,configurable:true});Object.defineProperty(Button.prototype,"icon",{get:function(){return this._icon},set:function(value){this._icon=value;if(this.iconDisplay){this.iconDisplay.source=value}},enumerable:true,configurable:true});Button.prototype.onTouchCancle=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);this.touchCaptured=false;this.invalidateState()};Button.prototype.onTouchBegin=function(event){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);this.touchCaptured=true;this.invalidateState();event.updateAfterEvent()};Button.prototype.onStageTouchEnd=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);if(this.contains(event.target)){this.buttonReleased()}this.touchCaptured=false;this.invalidateState()};Button.prototype.getCurrentState=function(){if(!this.enabled)return"disabled";if(this.touchCaptured)return"down";return"up"};Button.prototype.partAdded=function(partName,instance){if(instance===this.labelDisplay){this.labelDisplay.text=this._label}else if(instance==this.iconDisplay){this.iconDisplay.source=this._icon}};Button.prototype.buttonReleased=function(){};return Button}(eui.Component);eui.Button=Button;__reflect(Button.prototype,"eui.Button")})(eui||(eui={}));var eui;(function(eui){var Range=function(_super){__extends(Range,_super);function Range(){var _this=_super.call(this)||this;_this.$Range={0:100,1:false,2:0,3:false,4:0,5:0,6:false,7:1,8:false,9:false};return _this}Object.defineProperty(Range.prototype,"maximum",{get:function(){return this.$Range[0]},set:function(value){value=+value||0;var values=this.$Range;if(value===values[0])return;values[0]=value;values[1]=true;this.invalidateProperties();this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Range.prototype,"minimum",{get:function(){return this.$Range[2]},set:function(value){value=+value||0;var values=this.$Range;if(value===values[2])return;values[2]=value;values[3]=true;this.invalidateProperties();this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Range.prototype,"value",{get:function(){var values=this.$Range;return values[6]?values[5]:values[4]},set:function(newValue){newValue=+newValue||0;this.$setValue(newValue)},enumerable:true,configurable:true});Range.prototype.$setValue=function(newValue){if(newValue===this.value)return false;var values=this.$Range;values[5]=newValue;values[6]=true;this.invalidateProperties();return true};Object.defineProperty(Range.prototype,"snapInterval",{get:function(){return this.$Range[7]},set:function(value){var values=this.$Range;values[9]=true;value=+value||0;if(value===values[7])return;if(isNaN(value)){values[7]=1;values[9]=false}else{values[7]=value}values[8]=true;this.invalidateProperties()},enumerable:true,configurable:true});Range.prototype.commitProperties=function(){_super.prototype.commitProperties.call(this);var values=this.$Range;if(values[2]>values[0]){if(!values[1])values[2]=values[0];else values[0]=values[2]}if(values[6]||values[1]||values[3]||values[8]){var currentValue=values[6]?values[5]:values[4];values[6]=false;values[1]=false;values[3]=false;values[8]=false;this.setValue(this.nearestValidValue(currentValue,values[7]))}};Range.prototype.nearestValidSize=function(size){var interval=this.snapInterval;if(interval==0)return size;var validSize=Math.round(size/interval)*interval;return Math.abs(validSize)<interval?interval:validSize};Range.prototype.nearestValidValue=function(value,interval){var values=this.$Range;if(interval==0)return Math.max(values[2],Math.min(values[0],value));var maxValue=values[0]-values[2];var scale=1;value-=values[2];if(interval!=Math.round(interval)){var parts=(1+interval).toString().split(".");scale=Math.pow(10,parts[1].length);maxValue*=scale;value=Math.round(value*scale);interval=Math.round(interval*scale)}var lower=Math.max(0,Math.floor(value/interval)*interval);var upper=Math.min(maxValue,Math.floor((value+interval)/interval)*interval);var validValue=value-lower>=(upper-lower)/2?upper:lower;return validValue/scale+values[2]};Range.prototype.setValue=function(value){var values=this.$Range;if(values[4]===value)return;if(values[0]>values[2])values[4]=Math.min(values[0],Math.max(values[2],value));else values[4]=value;values[6]=false;this.invalidateDisplayList();eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"value")};Range.prototype.updateDisplayList=function(w,h){_super.prototype.updateDisplayList.call(this,w,h);this.updateSkinDisplayList()};Range.prototype.updateSkinDisplayList=function(){};return Range}(eui.Component);eui.Range=Range;__reflect(Range.prototype,"eui.Range");eui.registerBindable(Range.prototype,"value")})(eui||(eui={}));var eui;(function(eui){var LayoutBase=function(_super){__extends(LayoutBase,_super);function LayoutBase(){var _this=_super.call(this)||this;_this.$target=null;_this.$useVirtualLayout=false;_this.$typicalWidth=71;_this.$typicalHeight=22;return _this}Object.defineProperty(LayoutBase.prototype,"target",{get:function(){return this.$target},set:function(value){if(this.$target===value)return;this.$target=value;this.clearVirtualLayoutCache()},enumerable:true,configurable:true});Object.defineProperty(LayoutBase.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(value){value=!!value;if(this.$useVirtualLayout==value)return;this.$useVirtualLayout=value;this.dispatchEventWith("useVirtualLayoutChanged");if(this.$useVirtualLayout&&!value)this.clearVirtualLayoutCache();if(this.target)this.target.invalidateDisplayList()},enumerable:true,configurable:true});LayoutBase.prototype.setTypicalSize=function(width,height){width=+width||71;height=+height||22;if(width!==this.$typicalWidth||height!==this.$typicalHeight){this.$typicalWidth=width;this.$typicalHeight=height;if(this.$target){this.$target.invalidateSize()}}};LayoutBase.prototype.scrollPositionChanged=function(){};LayoutBase.prototype.clearVirtualLayoutCache=function(){};LayoutBase.prototype.elementAdded=function(index){};LayoutBase.prototype.elementRemoved=function(index){};LayoutBase.prototype.getElementIndicesInView=function(){return null};LayoutBase.prototype.measure=function(){};LayoutBase.prototype.updateDisplayList=function(width,height){};return LayoutBase}(egret.EventDispatcher);eui.LayoutBase=LayoutBase;__reflect(LayoutBase.prototype,"eui.LayoutBase")})(eui||(eui={}));var eui;(function(eui){var ListBase=function(_super){__extends(ListBase,_super);function ListBase(){var _this=_super.call(this)||this;_this.$ListBase={0:false,1:false,2:-2,3:-1,4:false,5:undefined,6:false,7:null,8:false};return _this}Object.defineProperty(ListBase.prototype,"requireSelection",{get:function(){return this.$ListBase[0]},set:function(value){value=!!value;var values=this.$ListBase;if(value===values[0]){return}values[0]=value;if(value){values[1]=true;this.invalidateProperties()}},enumerable:true,configurable:true});Object.defineProperty(ListBase.prototype,"selectedIndex",{get:function(){return this.$getSelectedIndex()},set:function(value){value=+value|0;this.setSelectedIndex(value,false)},enumerable:true,configurable:true});ListBase.prototype.$getSelectedIndex=function(){var values=this.$ListBase;if(values[2]!=ListBase.NO_PROPOSED_SELECTION)return values[2];return values[3]};ListBase.prototype.setSelectedIndex=function(value,dispatchChangeEvent){if(value==this.selectedIndex){return}var values=this.$ListBase;if(dispatchChangeEvent)values[4]=values[4]||dispatchChangeEvent;values[2]=value;this.invalidateProperties()};Object.defineProperty(ListBase.prototype,"selectedItem",{get:function(){var values=this.$ListBase;if(values[5]!==undefined)return values[5];var selectedIndex=this.$getSelectedIndex();if(selectedIndex==ListBase.NO_SELECTION||this.$dataProvider==null)return undefined;return this.$dataProvider.length>selectedIndex?this.$dataProvider.getItemAt(selectedIndex):undefined},set:function(value){this.setSelectedItem(value,false)},enumerable:true,configurable:true});ListBase.prototype.setSelectedItem=function(value,dispatchChangeEvent){if(dispatchChangeEvent===void 0){dispatchChangeEvent=false}if(this.selectedItem===value)return;var values=this.$ListBase;if(dispatchChangeEvent)values[4]=values[4]||dispatchChangeEvent;values[5]=value;this.invalidateProperties()};ListBase.prototype.commitProperties=function(){var dataProviderChanged=this.$dataProviderChanged;_super.prototype.commitProperties.call(this);var values=this.$ListBase;var selectedIndex=this.$getSelectedIndex();var dataProvider=this.$dataProvider;if(dataProviderChanged){if(selectedIndex>=0&&dataProvider&&selectedIndex<dataProvider.length)this.itemSelected(selectedIndex,true);else if(this.requireSelection)values[2]=0;else this.setSelectedIndex(-1,false)}if(values[1]){values[1]=false;if(values[0]&&selectedIndex==ListBase.NO_SELECTION&&dataProvider&&dataProvider.length>0){values[2]=0}}if(values[5]!==undefined){if(dataProvider)values[2]=dataProvider.getItemIndex(values[5]);else values[2]=ListBase.NO_SELECTION;values[5]=undefined}var changedSelection=false;if(values[2]!=ListBase.NO_PROPOSED_SELECTION)changedSelection=this.commitSelection();if(values[6]){values[6]=false;if(!changedSelection){eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedIndex")}}};ListBase.prototype.updateRenderer=function(renderer,itemIndex,data){this.itemSelected(itemIndex,this.$isItemIndexSelected(itemIndex));return _super.prototype.updateRenderer.call(this,renderer,itemIndex,data)};ListBase.prototype.itemSelected=function(index,selected){var renderer=this.$indexToRenderer[index];if(renderer){renderer.selected=selected}};ListBase.prototype.$isItemIndexSelected=function(index){return index==this.selectedIndex};ListBase.prototype.commitSelection=function(dispatchChangedEvents){if(dispatchChangedEvents===void 0){dispatchChangedEvents=true}var dataProvider=this.$dataProvider;var values=this.$ListBase;var maxIndex=dataProvider?dataProvider.length-1:-1;var oldSelectedIndex=values[3];var tmpProposedIndex=values[2];if(tmpProposedIndex<ListBase.NO_SELECTION)tmpProposedIndex=ListBase.NO_SELECTION;if(tmpProposedIndex>maxIndex)tmpProposedIndex=maxIndex;if(values[0]&&tmpProposedIndex==ListBase.NO_SELECTION&&dataProvider&&dataProvider.length>0){values[2]=ListBase.NO_PROPOSED_SELECTION;values[4]=false;return false}if(values[4]){var result=this.dispatchEventWith(egret.Event.CHANGING,false,true,true);if(!result){this.itemSelected(values[2],false);values[2]=ListBase.NO_PROPOSED_SELECTION;values[4]=false;return false}}values[3]=tmpProposedIndex;values[2]=ListBase.NO_PROPOSED_SELECTION;if(oldSelectedIndex!=ListBase.NO_SELECTION)this.itemSelected(oldSelectedIndex,false);if(values[3]!=ListBase.NO_SELECTION)this.itemSelected(values[3],true);if(dispatchChangedEvents){if(values[4]){this.dispatchEventWith(egret.Event.CHANGE);values[4]=false}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedIndex");eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedItem")}return true};ListBase.prototype.adjustSelection=function(newIndex,add){if(add===void 0){add=false}var values=this.$ListBase;if(values[2]!=ListBase.NO_PROPOSED_SELECTION)values[2]=newIndex;else values[3]=newIndex;values[6]=true;this.invalidateProperties()};ListBase.prototype.itemAdded=function(item,index){_super.prototype.itemAdded.call(this,item,index);var selectedIndex=this.$getSelectedIndex();if(selectedIndex==ListBase.NO_SELECTION){if(this.$ListBase[0])this.adjustSelection(index,true)}else if(index<=selectedIndex){this.adjustSelection(selectedIndex+1,true)}};ListBase.prototype.itemRemoved=function(item,index){_super.prototype.itemRemoved.call(this,item,index);if(this.selectedIndex==ListBase.NO_SELECTION)return;var selectedIndex=this.$getSelectedIndex();if(index==selectedIndex){if(this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0){if(index==0){this.$ListBase[2]=0;this.invalidateProperties()}else this.setSelectedIndex(0,false)}else this.adjustSelection(-1,false)}else if(index<selectedIndex){this.adjustSelection(selectedIndex-1,false)}};ListBase.prototype.onCollectionChange=function(event){_super.prototype.onCollectionChange.call(this,event);if(event.kind==eui.CollectionEventKind.RESET){if(this.$dataProvider.length==0){this.setSelectedIndex(ListBase.NO_SELECTION,false)}}else if(event.kind==eui.CollectionEventKind.REFRESH){this.dataProviderRefreshed()}};ListBase.prototype.dataProviderRefreshed=function(){this.setSelectedIndex(ListBase.NO_SELECTION,false)};ListBase.prototype.rendererAdded=function(renderer,index,item){renderer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this);renderer.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this);renderer.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)};ListBase.prototype.rendererRemoved=function(renderer,index,item){renderer.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this);renderer.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this);renderer.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)};ListBase.prototype.onRendererTouchBegin=function(event){if(!this.$stage){return}var values=this.$ListBase;if(event.$isDefaultPrevented)return;values[8]=false;values[7]=event.$currentTarget;this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)};ListBase.prototype.onRendererTouchCancle=function(event){var values=this.$ListBase;values[7]=null;values[8]=true;if(this.$stage){this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)}};ListBase.prototype.onRendererTouchEnd=function(event){var values=this.$ListBase;var itemRenderer=event.$currentTarget;var touchDownItemRenderer=values[7];if(itemRenderer!=touchDownItemRenderer)return;if(!values[8]){this.setSelectedIndex(itemRenderer.itemIndex,true);eui.ItemTapEvent.dispatchItemTapEvent(this,eui.ItemTapEvent.ITEM_TAP,itemRenderer)}values[8]=false};ListBase.prototype.stage_touchEndHandler=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this);this.$ListBase[7]=null};ListBase.NO_SELECTION=-1;ListBase.NO_PROPOSED_SELECTION=-2;return ListBase}(eui.DataGroup);eui.ListBase=ListBase;__reflect(ListBase.prototype,"eui.ListBase");eui.registerBindable(ListBase.prototype,"selectedIndex");eui.registerBindable(ListBase.prototype,"selectedItem")})(eui||(eui={}));var eui;(function(eui){var ScrollBarBase=function(_super){__extends(ScrollBarBase,_super);function ScrollBarBase(){var _this=_super.call(this)||this;_this.thumb=null;_this.$viewport=null;_this.autoVisibility=true;return _this}Object.defineProperty(ScrollBarBase.prototype,"viewport",{get:function(){return this.$viewport},set:function(value){if(value==this.$viewport){return}var viewport=this.$viewport;if(viewport){viewport.removeEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this);viewport.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)}this.$viewport=value;if(value){value.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this);value.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)}this.invalidateDisplayList()},enumerable:true,configurable:true});ScrollBarBase.prototype.onViewportResize=function(event){this.invalidateDisplayList()};ScrollBarBase.prototype.onPropertyChanged=function(event){};return ScrollBarBase}(eui.Component);eui.ScrollBarBase=ScrollBarBase;__reflect(ScrollBarBase.prototype,"eui.ScrollBarBase")})(eui||(eui={}));var eui;(function(eui){var SliderBase=function(_super){__extends(SliderBase,_super);function SliderBase(){var _this=_super.call(this)||this;_this.trackHighlight=null;_this.thumb=null;_this.track=null;_this.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:true};_this.maximum=10;_this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,_this.onTouchBegin,_this);return _this}Object.defineProperty(SliderBase.prototype,"slideDuration",{get:function(){return this.$SliderBase[6]},set:function(value){this.$SliderBase[6]=+value||0},enumerable:true,configurable:true});SliderBase.prototype.pointToValue=function(x,y){return this.minimum};Object.defineProperty(SliderBase.prototype,"liveDragging",{get:function(){return this.$SliderBase[9]},set:function(value){this.$SliderBase[9]=!!value},enumerable:true,configurable:true});Object.defineProperty(SliderBase.prototype,"pendingValue",{get:function(){return this.$SliderBase[7]},set:function(value){value=+value||0;var values=this.$SliderBase;if(value===values[7])return;values[7]=value;this.invalidateDisplayList()},enumerable:true,configurable:true});SliderBase.prototype.setValue=function(value){this.$SliderBase[7]=value;_super.prototype.setValue.call(this,value)};SliderBase.prototype.partAdded=function(partName,instance){_super.prototype.partAdded.call(this,partName,instance);if(instance==this.thumb){this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this);this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)}else if(instance==this.track){this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this);this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)}else if(instance===this.trackHighlight){this.trackHighlight.touchEnabled=false;if(egret.is(this.trackHighlight,"egret.DisplayObjectContainer")){this.trackHighlight.touchChildren=false}}};SliderBase.prototype.partRemoved=function(partName,instance){_super.prototype.partRemoved.call(this,partName,instance);if(instance==this.thumb){this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this);this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)}else if(instance==this.track){this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this);this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)}};SliderBase.prototype.onTrackOrThumbResize=function(event){this.updateSkinDisplayList()};SliderBase.prototype.onThumbTouchBegin=function(event){var values=this.$SliderBase;if(values[5]&&values[5].isPlaying)this.stopAnimation();var stage=this.$stage;stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this);stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var clickOffset=this.thumb.globalToLocal(event.stageX,event.stageY,egret.$TempPoint);values[0]=clickOffset.x;values[1]=clickOffset.y;eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_START)};SliderBase.prototype.onStageTouchMove=function(event){var values=this.$SliderBase;values[2]=event.$stageX;values[3]=event.$stageY;var track=this.track;if(!track)return;var p=track.globalToLocal(values[2],values[3],egret.$TempPoint);var newValue=this.pointToValue(p.x-values[0],p.y-values[1]);newValue=this.nearestValidValue(newValue,this.snapInterval);this.updateWhenTouchMove(newValue);event.updateAfterEvent()};SliderBase.prototype.updateWhenTouchMove=function(newValue){if(newValue!=this.$SliderBase[7]){if(this.liveDragging){this.setValue(newValue);this.dispatchEventWith(egret.Event.CHANGE)}else{this.pendingValue=newValue}}};SliderBase.prototype.onStageTouchEnd=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END);var values=this.$SliderBase;if(!this.liveDragging&&this.value!=values[7]){this.setValue(values[7]);this.dispatchEventWith(egret.Event.CHANGE)}};SliderBase.prototype.onTouchBegin=function(event){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this);this.$SliderBase[4]=event.$target};SliderBase.prototype.stageTouchEndHandler=function(event){var target=event.$target;var values=this.$SliderBase;event.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this);if(values[4]!=target&&this.contains(target)){egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,true,true,event.$stageX,event.$stageY,event.touchPointID)}values[4]=null};SliderBase.prototype.$animationUpdateHandler=function(animation){this.pendingValue=animation.currentValue};SliderBase.prototype.animationEndHandler=function(animation){this.setValue(this.$SliderBase[8]);this.dispatchEventWith(egret.Event.CHANGE);eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END)};SliderBase.prototype.stopAnimation=function(){this.$SliderBase[5].stop();this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval));this.dispatchEventWith(egret.Event.CHANGE);eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END)};SliderBase.prototype.onTrackTouchBegin=function(event){var thumbW=this.thumb?this.thumb.width:0;var thumbH=this.thumb?this.thumb.height:0;var offsetX=event.$stageX-thumbW/2;var offsetY=event.$stageY-thumbH/2;var p=this.track.globalToLocal(offsetX,offsetY,egret.$TempPoint);var rangeValues=this.$Range;var newValue=this.pointToValue(p.x,p.y);newValue=this.nearestValidValue(newValue,rangeValues[7]);var values=this.$SliderBase;if(newValue!=values[7]){if(values[6]!=0){if(!values[5]){values[5]=new eui.sys.Animation(this.$animationUpdateHandler,this);values[5].endFunction=this.animationEndHandler}var animation=values[5];if(animation.isPlaying)this.stopAnimation();values[8]=newValue;animation.duration=values[6]*(Math.abs(values[7]-values[8])/(rangeValues[0]-rangeValues[2]));animation.from=values[7];animation.to=values[8];eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_START);animation.play()}else{this.setValue(newValue);this.dispatchEventWith(egret.Event.CHANGE)}}};return SliderBase}(eui.Range);eui.SliderBase=SliderBase;__reflect(SliderBase.prototype,"eui.SliderBase")})(eui||(eui={}));var eui;(function(eui){var sys;(function(sys){var exmlParserPool=[];var parsedClasses={};var innerClassCount=1;var HOST_COMPONENT="hostComponent";var SKIN_CLASS="eui.Skin";var DECLARATIONS="Declarations";var RECTANGLE="egret.Rectangle";var TYPE_CLASS="Class";var TYPE_ARRAY="Array";var TYPE_PERCENTAGE="Percentage";var TYPE_STATE="State[]";var SKIN_NAME="skinName";var ELEMENTS_CONTENT="elementsContent";var basicTypes=[TYPE_ARRAY,"boolean","string","number"];var wingKeys=["id","locked","includeIn","excludeFrom"];var htmlEntities=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]];var jsKeyWords=["null","NaN","undefined","true","false"];var getRepeatedIds;var getIds;var checkDeclarations;if(true){getRepeatedIds=function(xml){var result=[];this.repeatedIdMap={};this.getIds(xml,result);return result};getIds=function(xml,result){if(xml.namespace!=sys.NS_W&&xml.attributes.id){var id=xml.attributes.id;if(this.repeatedIdMap[id]){result.push(toXMLString(xml))}else{this.repeatedIdMap[id]=true}}var children=xml.children;if(children){var length_15=children.length;for(var i=0;i<length_15;i++){var node=children[i];if(node.nodeType!==1||this.isInnerClass(node)){continue}this.getIds(node,result)}}};function toXMLString(node){if(!node){return""}var str="  at <"+node.name;var attributes=node.attributes;var keys=Object.keys(attributes);var length=keys.length;for(var i=0;i<length;i++){var key=keys[i];var value=attributes[key];if(key=="id"&&value.substring(0,2)=="__"){continue}str+=" "+key+'="'+value+'"'}if(node.children.length==0){str+="/>"}else{str+=">"}return str}checkDeclarations=function(declarations,list){if(!declarations){return}var children=declarations.children;if(children){var length_16=children.length;for(var i=0;i<length_16;i++){var node=children[i];if(node.nodeType!=1){continue}if(node.attributes.includeIn){list.push(toXMLString(node))}if(node.attributes.excludeFrom){list.push(toXMLString(node))}checkDeclarations(node,list)}}};function getPropertyStr(child){var parentStr=toXMLString(child.parent);var childStr=toXMLString(child).substring(5);return parentStr+"\n      \t"+childStr}}var EXMLParser=function(){function EXMLParser(){this.delayAssignmentDic={};if(true){this.repeatedIdMap={};this.getRepeatedIds=getRepeatedIds;this.getIds=getIds;this.checkDeclarations=checkDeclarations}}EXMLParser.prototype.$parseCode=function(codeText,classStr){var className=classStr?classStr:"$exmlClass"+innerClassCount++;var geval=eval;var clazz=geval(codeText);var hasClass=true;if(hasClass&&clazz){egret.registerClass(clazz,className);var paths=className.split(".");var length_17=paths.length;var definition=__global;for(var i=0;i<length_17-1;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}if(definition[paths[length_17-1]]){if(true&&!parsedClasses[className]){egret.$warn(2101,className,codeText)}}else{if(true){parsedClasses[className]=true}definition[paths[length_17-1]]=clazz}}return clazz};EXMLParser.prototype.parse=function(text){if(true){if(!text){egret.$error(1003,"text")}}var xmlData=null;if(true){try{xmlData=egret.XML.parse(text)}catch(e){egret.$error(2002,text+"\n"+e.message)}}else{xmlData=egret.XML.parse(text)}var hasClass=false;var className="";if(xmlData.attributes["class"]){className=xmlData.attributes["class"];delete xmlData.attributes["class"];hasClass=!!className}else{className="$exmlClass"+innerClassCount++}var exClass=this.parseClass(xmlData,className);var code=exClass.toCode();var clazz=null;var geval=eval;if(true){try{clazz=geval(code)}catch(e){egret.log(code);return null}}else{clazz=geval(code)}if(hasClass&&clazz){egret.registerClass(clazz,className);var paths=className.split(".");var length_18=paths.length;var definition=__global;for(var i=0;i<length_18-1;i++){var path=paths[i];definition=definition[path]||(definition[path]={})}if(definition[paths[length_18-1]]){if(true&&!parsedClasses[className]){egret.$warn(2101,className,toXMLString(xmlData))}}else{if(true){parsedClasses[className]=true}definition[paths[length_18-1]]=clazz}}return clazz};EXMLParser.prototype.parseClass=function(xmlData,className){if(!sys.exmlConfig){sys.exmlConfig=new sys.EXMLConfig}this.currentXML=xmlData;this.currentClassName=className;this.delayAssignmentDic={};this.idDic={};this.stateCode=[];this.stateNames=[];this.skinParts=[];this.bindings=[];this.declarations=null;this.currentClass=new sys.EXClass;this.stateIds=[];var index=className.lastIndexOf(".");if(index!=-1){this.currentClass.className=className.substring(index+1)}else{this.currentClass.className=className}this.startCompile();var clazz=this.currentClass;this.currentClass=null;return clazz};EXMLParser.prototype.startCompile=function(){if(true){var result=this.getRepeatedIds(this.currentXML);if(result.length>0){egret.$error(2004,this.currentClassName,result.join("\n"))}}var superClass=this.getClassNameOfNode(this.currentXML);this.isSkinClass=superClass==SKIN_CLASS;this.currentClass.superClass=superClass;this.getStateNames();var children=this.currentXML.children;if(children){var length_19=children.length;for(var i=0;i<length_19;i++){var node=children[i];if(node.nodeType===1&&node.namespace==sys.NS_W&&node.localName==DECLARATIONS){this.declarations=node;break}}}if(true){var list=[];this.checkDeclarations(this.declarations,list);if(list.length>0){egret.$error(2020,this.currentClassName,list.join("\n"))}}if(!this.currentXML.namespace){if(true){egret.$error(2017,this.currentClassName,toXMLString(this.currentXML))}return}this.addIds(this.currentXML.children);this.createConstructFunc()};EXMLParser.prototype.addIds=function(items){if(!items){return}var length=items.length;for(var i=0;i<length;i++){var node=items[i];if(node.nodeType!=1){continue}if(!node.namespace){if(true){egret.$error(2017,this.currentClassName,toXMLString(node))}continue}if(this.isInnerClass(node)){continue}this.addIds(node.children);if(node.namespace==sys.NS_W||!node.localName){}else if(this.isProperty(node)){var prop=node.localName;var index=prop.indexOf(".");var children=node.children;if(index==-1||!children||children.length==0){continue}var firstChild=children[0];this.stateIds.push(firstChild.attributes.id)}else if(node.nodeType===1){var id=node.attributes["id"];if(id){var e=new RegExp("^[a-zA-Z_$]{1}[a-z0-9A-Z_$]*");if(id.match(e)==null){egret.$warn(2022,id)}if(id.match(new RegExp(/ /g))!=null){egret.$warn(2022,id)}if(this.skinParts.indexOf(id)==-1){this.skinParts.push(id)}this.createVarForNode(node);if(this.isStateNode(node))this.stateIds.push(id)}else{this.createIdForNode(node);if(this.isStateNode(node))this.stateIds.push(node.attributes.id)}}}};EXMLParser.prototype.isInnerClass=function(node){if(node.hasOwnProperty("isInnerClass")){return node["isInnerClass"]}var result=node.localName=="Skin"&&node.namespace==sys.NS_S;if(!result){if(this.isProperty(node)){result=false}else{var prop=void 0;var parent_1=node.parent;if(this.isProperty(parent_1)){prop=parent_1.localName;var index=prop.indexOf(".");if(index!=-1){var stateName=prop.substring(index+1);prop=prop.substring(0,index)}parent_1=parent_1.parent}else{prop=sys.exmlConfig.getDefaultPropById(parent_1.localName,parent_1.namespace)}var className=sys.exmlConfig.getClassNameById(parent_1.localName,parent_1.namespace);result=sys.exmlConfig.getPropertyType(prop,className)==TYPE_CLASS}}node["isInnerClass"]=result;return result};EXMLParser.prototype.containsState=function(node){var attributes=node.attributes;if(attributes["includeIn"]||attributes["excludeFrom"]){return true}var keys=Object.keys(attributes);var length=keys.length;for(var i=0;i<length;i++){var name_1=keys[i];if(name_1.indexOf(".")!=-1){return true}}return false};EXMLParser.prototype.createIdForNode=function(node){var idName=this.getNodeId(node);if(!this.idDic[idName])this.idDic[idName]=1;else this.idDic[idName]++;idName+=this.idDic[idName];node.attributes.id=idName};EXMLParser.prototype.getNodeId=function(node){if(node.attributes["id"])return node.attributes.id;return"_"+node.localName};EXMLParser.prototype.createVarForNode=function(node){var moduleName=this.getClassNameOfNode(node);if(moduleName=="")return;if(!this.currentClass.getVariableByName(node.attributes.id))this.currentClass.addVariable(new sys.EXVariable(node.attributes.id))};EXMLParser.prototype.createFuncForNode=function(node){var className=node.localName;var isBasicType=this.isBasicTypeData(className);if(isBasicType)return this.createBasicTypeForNode(node);var moduleName=this.getClassNameOfNode(node);var func=new sys.EXFunction;var tailName="_i";var id=node.attributes.id;func.name=id+tailName;this.currentClass.addFunction(func);var cb=new sys.EXCodeBlock;func.codeBlock=cb;var varName="t";if(className=="Object"){cb.addVar(varName,"{}")}else{cb.addVar(varName,"new "+moduleName+"()")}var containsId=!!this.currentClass.getVariableByName(id);if(containsId){cb.addAssignment("this."+id,varName)}this.addAttributesToCodeBlock(cb,varName,node);this.initlizeChildNode(node,cb,varName);var delayAssignments=this.delayAssignmentDic[id];if(delayAssignments){var length_20=delayAssignments.length;for(var i=0;i<length_20;i++){var codeBlock=delayAssignments[i];cb.concat(codeBlock)}}cb.addReturn(varName);return"this."+func.name+"()"};EXMLParser.prototype.isBasicTypeData=function(className){return basicTypes.indexOf(className)!=-1};EXMLParser.prototype.createBasicTypeForNode=function(node){var className=node.localName;var returnValue="";var varItem=this.currentClass.getVariableByName(node.attributes.id);var children=node.children;var text="";if(children&&children.length>0){var firstChild=children[0];if(firstChild.nodeType==3){text=firstChild.text.trim()}}switch(className){case TYPE_ARRAY:var values=[];if(children){var length_21=children.length;for(var i=0;i<length_21;i++){var child=children[i];if(child.nodeType==1){values.push(this.createFuncForNode(child))}}}returnValue="["+values.join(",")+"]";break;case"boolean":returnValue=text=="false"||!text?"false":"true";break;case"number":returnValue=text;if(returnValue.indexOf("%")!=-1)returnValue=returnValue.substring(0,returnValue.length-1);break;case"string":returnValue=this.formatString(text);break}if(varItem)varItem.defaultValue=returnValue;return returnValue};EXMLParser.prototype.addAttributesToCodeBlock=function(cb,varName,node){var key;var value;var attributes=node.attributes;var keyList=Object.keys(attributes);keyList.sort();var length=keyList.length;for(var i=0;i<length;i++){key=keyList[i];if(!this.isNormalKey(key)){continue}value=attributes[key];key=this.formatKey(key,value);value=this.formatValue(key,value,node);if(!value){continue}if(this.currentClass.getVariableByName(value)){var THIS="this.";var id=attributes.id;var codeLine=THIS+id+" = t;";if(!this.currentClass.getVariableByName(id))this.createVarForNode(node);if(!cb.containsCodeLine(codeLine)){cb.addCodeLineAt(codeLine,1)}var delayCb=new sys.EXCodeBlock;if(varName=="this"){delayCb.addAssignment(varName,THIS+value,key)}else{delayCb.startIf(THIS+id);delayCb.addAssignment(THIS+id,THIS+value,key);delayCb.endBlock()}if(!this.delayAssignmentDic[value]){this.delayAssignmentDic[value]=[]}this.delayAssignmentDic[value].push(delayCb);value=THIS+value}cb.addAssignment(varName,value,key)}};EXMLParser.prototype.initlizeChildNode=function(node,cb,varName){var children=node.children;if(!children||children.length==0)return;var className=sys.exmlConfig.getClassNameById(node.localName,node.namespace);var directChild=[];var length=children.length;var propList=[];var errorInfo;for(var i=0;i<length;i++){var child=children[i];if(child.nodeType!=1||child.namespace==sys.NS_W){continue}if(this.isInnerClass(child)){if(child.localName=="Skin"){var innerClassName=this.parseInnerClass(child);var type=sys.exmlConfig.getPropertyType(SKIN_NAME,className);if(type){cb.addAssignment(varName,innerClassName,SKIN_NAME)}else{egret.$error(2005,this.currentClassName,SKIN_NAME,getPropertyStr(child))}}continue}var prop=child.localName;if(this.isProperty(child)){if(!this.isNormalKey(prop)){continue}var type=sys.exmlConfig.getPropertyType(child.localName,className);if(!type){if(true){egret.$error(2005,this.currentClassName,child.localName,getPropertyStr(child))}continue}if(!child.children||child.children.length==0){if(true){egret.$warn(2102,this.currentClassName,getPropertyStr(child))}continue}if(true){errorInfo=getPropertyStr(child)}this.addChildrenToProp(child.children,type,prop,cb,varName,errorInfo,propList,node)}else{directChild.push(child)}}if(directChild.length==0)return;var defaultProp=sys.exmlConfig.getDefaultPropById(node.localName,node.namespace);var defaultType=sys.exmlConfig.getPropertyType(defaultProp,className);if(true){errorInfo=getPropertyStr(directChild[0])}if(!defaultProp||!defaultType){if(true){egret.$error(2012,this.currentClassName,errorInfo)}return}this.addChildrenToProp(directChild,defaultType,defaultProp,cb,varName,errorInfo,propList,node)};EXMLParser.prototype.parseInnerClass=function(node){var parser=exmlParserPool.pop();if(!parser){parser=new EXMLParser}var innerClassName=this.currentClass.className+"$"+node.localName+innerClassCount++;var innerClass=parser.parseClass(node,innerClassName);this.currentClass.addInnerClass(innerClass);exmlParserPool.push(parser);return innerClassName};EXMLParser.prototype.addChildrenToProp=function(children,type,prop,cb,varName,errorInfo,propList,node){var childFunc="";var childLength=children.length;if(childLength>1){if(type!=TYPE_ARRAY){if(true){egret.$error(2011,this.currentClassName,prop,errorInfo)}return}var values=[];for(var j=0;j<childLength;j++){var item=children[j];if(item.nodeType!=1){continue}childFunc=this.createFuncForNode(item);var childClassName=this.getClassNameOfNode(item);if(!this.isStateNode(item))values.push(childFunc)}childFunc="["+values.join(",")+"]"}else{var firstChild=children[0];if(type==TYPE_ARRAY){if(firstChild.localName==TYPE_ARRAY){var values=[];if(firstChild.children){var len=firstChild.children.length;for(var k=0;k<len;k++){var item=firstChild.children[k];if(item.nodeType!=1){continue}childFunc=this.createFuncForNode(item);var childClassName=this.getClassNameOfNode(item);if(!this.isStateNode(item))values.push(childFunc)}}childFunc="["+values.join(",")+"]"}else{childFunc=this.createFuncForNode(firstChild);var childClassName=this.getClassNameOfNode(firstChild);if(!this.isStateNode(firstChild))childFunc="["+childFunc+"]";else childFunc="[]"}}else if(firstChild.nodeType==1){if(type==TYPE_CLASS){if(childLength>1){if(true){egret.$error(2011,this.currentClassName,prop,errorInfo)}return}childFunc=this.parseInnerClass(children[0])}else{var targetClass=this.getClassNameOfNode(firstChild);childFunc=this.createFuncForNode(firstChild)}}else{childFunc=this.formatValue(prop,firstChild.text,node)}}if(childFunc!=""){if(childFunc.indexOf("()")==-1)prop=this.formatKey(prop,childFunc);if(propList.indexOf(prop)==-1){propList.push(prop)}else if(true){egret.$warn(2103,this.currentClassName,prop,errorInfo)}cb.addAssignment(varName,childFunc,prop)}};EXMLParser.prototype.isProperty=function(node){if(node.hasOwnProperty("isProperty")){return node["isProperty"]}var result;var name=node.localName;if(!name||node.nodeType!==1||!node.parent||this.isBasicTypeData(name)){result=false}else{var parent_2=node.parent;var index=name.indexOf(".");if(index!=-1){name=name.substr(0,index)}var className=sys.exmlConfig.getClassNameById(parent_2.localName,parent_2.namespace);result=!!sys.exmlConfig.getPropertyType(name,className)}node["isProperty"]=result;return result};EXMLParser.prototype.isNormalKey=function(key){if(!key||key.indexOf(".")!=-1||key.indexOf(":")!=-1||wingKeys.indexOf(key)!=-1)return false;return true};EXMLParser.prototype.formatKey=function(key,value){if(value.indexOf("%")!=-1){if(key=="height")key="percentHeight";else if(key=="width")key="percentWidth"}return key};EXMLParser.prototype.formatValue=function(key,value,node){if(!value){value=""}var stringValue=value;value=value.trim();var className=this.getClassNameOfNode(node);var type=sys.exmlConfig.getPropertyType(key,className);if(true&&!type){egret.$error(2005,this.currentClassName,key,toXMLString(node))}var bindingValue=this.formatBinding(key,value,node);if(bindingValue){this.checkIdForState(node);var target="this";if(node!==this.currentXML){target+="."+node.attributes["id"]}this.bindings.push(new sys.EXBinding(target,key,bindingValue.templates,bindingValue.chainIndex));value=""}else if(type==RECTANGLE){if(true){var rect=value.split(",");if(rect.length!=4||isNaN(parseInt(rect[0]))||isNaN(parseInt(rect[1]))||isNaN(parseInt(rect[2]))||isNaN(parseInt(rect[3]))){egret.$error(2016,this.currentClassName,toXMLString(node))}}value="new "+RECTANGLE+"("+value+")"}else if(type==TYPE_PERCENTAGE){if(value.indexOf("%")!=-1){value=this.formatString(value)}}else{var orgValue=value;switch(type){case TYPE_CLASS:if(key==SKIN_NAME){value=this.formatString(stringValue)}break;case"number":if(value.indexOf("#")==0){if(true&&isNaN(value.substring(1))){egret.$warn(2021,this.currentClassName,key,value)}value="0x"+value.substring(1)}else if(value.indexOf("%")!=-1){if(true&&isNaN(value.substr(0,value.length-1))){egret.$warn(2021,this.currentClassName,key,value)}value=parseFloat(value.substr(0,value.length-1)).toString()}else if(true&&isNaN(value)){egret.$warn(2021,this.currentClassName,key,value)}break;case"boolean":value=value=="false"||!value?"false":"true";break;case"string":case"any":value=this.formatString(stringValue);break;default:if(true){egret.$error(2008,this.currentClassName,"string",key+":"+type,toXMLString(node))}break}}return value};EXMLParser.prototype.formatString=function(value){value=this.unescapeHTMLEntity(value);value=value.split("\n").join("\\n");value=value.split("\r").join("\\n");value=value.split('"').join('\\"');value='"'+value+'"';return value};EXMLParser.prototype.formatBinding=function(key,value,node){if(!value){return null}value=value.trim();if(value.charAt(0)!="{"||value.charAt(value.length-1)!="}"){return null}value=value.substring(1,value.length-1).trim();var templates=value.indexOf("+")==-1?[value]:this.parseTemplates(value);var chainIndex=[];var length=templates.length;for(var i=0;i<length;i++){var item=templates[i].trim();if(!item){templates.splice(i,1);i--;length--;continue}var first=item.charAt(0);if(first=="'"||first=='"'||first>="0"&&first<="9"||first=="-"){continue}if(item.indexOf(".")==-1&&jsKeyWords.indexOf(item)!=-1){continue}if(item.indexOf("this.")==0){item=item.substring(5)}var firstKey=item.split(".")[0];if(firstKey!=HOST_COMPONENT&&this.skinParts.indexOf(firstKey)==-1){item=HOST_COMPONENT+"."+item}templates[i]='"'+item+'"';chainIndex.push(i)}return{templates:templates,chainIndex:chainIndex}};EXMLParser.prototype.parseTemplates=function(value){if(value.indexOf("'")==-1){return value.split("+")}var isSingleQuoteLeak=false;var trimText="";value=value.split("\\'").join("\v0\v");while(value.length>0){var index=value.indexOf("'");if(index==-1){trimText+=value;break}trimText+=value.substring(0,index+1);value=value.substring(index+1);index=value.indexOf("'");if(index==-1){index=value.length-1;isSingleQuoteLeak=true}var quote=value.substring(0,index+1);trimText+=quote.split("+").join("\v1\v");value=value.substring(index+1)}value=trimText.split("\v0\v").join("\\'");if(isSingleQuoteLeak){value+="'"}var templates=value.split("+");var length=templates.length;for(var i=0;i<length;i++){templates[i]=templates[i].split("\v1\v").join("+")}return templates};EXMLParser.prototype.unescapeHTMLEntity=function(str){if(!str)return"";var length=htmlEntities.length;for(var i=0;i<length;i++){var arr=htmlEntities[i];var key=arr[0];var value=arr[1];str=str.split(value).join(key)}return str};EXMLParser.prototype.createConstructFunc=function(){var cb=new sys.EXCodeBlock;cb.addEmptyLine();var varName="this";this.addAttributesToCodeBlock(cb,varName,this.currentXML);if(this.declarations){var children=this.declarations.children;if(children&&children.length>0){var length_22=children.length;for(var i=0;i<length_22;i++){var decl=children[i];if(decl.nodeType!=1){continue}var funcName=this.createFuncForNode(decl);if(funcName){cb.addCodeLine(funcName+";")}}}}this.initlizeChildNode(this.currentXML,cb,varName);var id;var length;var stateIds=this.stateIds;if(stateIds.length>0){length=stateIds.length;for(var i=0;i<length;i++){id=stateIds[i];cb.addCodeLine("this."+id+"_i();")}cb.addEmptyLine()}var skinParts=this.skinParts;var skinPartStr="[]";length=skinParts.length;if(length>0){for(var i=0;i<length;i++){skinParts[i]='"'+skinParts[i]+'"'}skinPartStr="["+skinParts.join(",")+"]"}var skinPartFunc=new sys.EXFunction;skinPartFunc.name="skinParts";skinPartFunc.isGet=true;var skinPartCB=new sys.EXCodeBlock;skinPartCB.addReturn(skinPartStr);skinPartFunc.codeBlock=skinPartCB;this.currentClass.addFunction(skinPartFunc);this.currentXML.attributes.id="";this.createStates(this.currentXML);var states;var node=this.currentXML;var nodeClassName=this.getClassNameOfNode(node);var attributes=node.attributes;var keys=Object.keys(attributes);var keysLength=keys.length;for(var m=0;m<keysLength;m++){var itemName=keys[m];var value=attributes[itemName];var index=itemName.indexOf(".");if(index!=-1){var key=itemName.substring(0,index);key=this.formatKey(key,value);var itemValue=this.formatValue(key,value,node);if(!itemValue){continue}var stateName=itemName.substr(index+1);states=this.getStateByName(stateName,node);var stateLength=states.length;if(stateLength>0){for(var i=0;i<stateLength;i++){var state=states[i];state.addOverride(new sys.EXSetProperty("",key,itemValue))}}}}var stateCode=this.stateCode;length=stateCode.length;if(length>0){var indentStr="\t";cb.addCodeLine("this.states = [");var first=true;for(var i=0;i<length;i++){var state=stateCode[i];if(first)first=false;else cb.addCodeLine(indentStr+",");var codes=state.toCode().split("\n");var codeIndex=0;while(codeIndex<codes.length){var code=codes[codeIndex];if(code)cb.addCodeLine(indentStr+code);codeIndex++}}cb.addCodeLine("];")}var bindings=this.bindings;length=bindings.length;if(length>0){cb.addEmptyLine();for(var i=0;i<length;i++){var binding=bindings[i];cb.addCodeLine(binding.toCode())}}this.currentClass.constructCode=cb};EXMLParser.prototype.isStateNode=function(node){var attributes=node.attributes;return attributes.hasOwnProperty("includeIn")||attributes.hasOwnProperty("excludeFrom")};EXMLParser.prototype.getStateNames=function(){var root=this.currentXML;var className=sys.exmlConfig.getClassNameById(root.localName,root.namespace);var type=sys.exmlConfig.getPropertyType("states",className);if(type!=TYPE_STATE){return}var statesValue=root.attributes["states"];if(statesValue){delete root.attributes["states"]}var stateNames=this.stateNames;var stateChildren;var children=root.children;var item;if(children){var length_23=children.length;for(var i=0;i<length_23;i++){item=children[i];if(item.nodeType==1&&item.localName=="states"){item.namespace=sys.NS_W;stateChildren=item.children;break}}}if(!stateChildren&&!statesValue){return}if(true){if(stateChildren&&stateChildren.length==0){egret.$warn(2102,this.currentClassName,getPropertyStr(item))}if(stateChildren&&statesValue){egret.$warn(2103,this.currentClassName,"states",getPropertyStr(item))}}if(statesValue){var states=statesValue.split(",");var length_24=states.length;for(var i=0;i<length_24;i++){var stateName=states[i].trim();if(!stateName){continue}if(stateNames.indexOf(stateName)==-1){stateNames.push(stateName)}this.stateCode.push(new sys.EXState(stateName))}return}var length=stateChildren.length;for(var i=0;i<length;i++){var state=stateChildren[i];if(state.nodeType!=1){continue}var stateGroups=[];var attributes=state.attributes;if(attributes["stateGroups"]){var groups=attributes.stateGroups.split(",");var len=groups.length;for(var j=0;j<len;j++){var group=groups[j].trim();if(group){if(stateNames.indexOf(group)==-1){stateNames.push(group)}stateGroups.push(group)}}}var stateName=attributes.name;if(stateNames.indexOf(stateName)==-1){stateNames.push(stateName)}this.stateCode.push(new sys.EXState(stateName,stateGroups))}};EXMLParser.prototype.createStates=function(parentNode){var items=parentNode.children;if(!items){return}var length=items.length;for(var i=0;i<length;i++){var node=items[i];if(node.nodeType!=1||this.isInnerClass(node)){continue}this.createStates(node);if(node.namespace==sys.NS_W||!node.localName){continue}if(this.isProperty(node)){var prop=node.localName;var index=prop.indexOf(".");var children=node.children;if(index==-1||!children||children.length==0){continue}var stateName=prop.substring(index+1);prop=prop.substring(0,index);var className=this.getClassNameOfNode(parentNode);var type=sys.exmlConfig.getPropertyType(prop,className);if(true){if(type==TYPE_ARRAY){egret.$error(2013,this.currentClassName,getPropertyStr(node))}if(children.length>1){egret.$error(2011,this.currentClassName,prop,getPropertyStr(node))}}var firstChild=children[0];var value=void 0;if(firstChild.nodeType==1){this.createFuncForNode(firstChild);this.checkIdForState(firstChild);value="this."+firstChild.attributes.id}else{value=this.formatValue(prop,firstChild.text,parentNode)}var states=this.getStateByName(stateName,node);var l=states.length;if(l>0){for(var j=0;j<l;j++){var state=states[j];state.addOverride(new sys.EXSetProperty(parentNode.attributes.id,prop,value))}}}else if(this.containsState(node)){var attributes=node.attributes;var id=attributes.id;var nodeClassName=this.getClassNameOfNode(node);this.checkIdForState(node);var stateName=void 0;var states=void 0;var state=void 0;if(this.isStateNode(node)){var propertyName="";var parent_3=node.parent;if(parent_3.localName==TYPE_ARRAY)parent_3=parent_3.parent;if(parent_3&&parent_3.parent){if(this.isProperty(parent_3))parent_3=parent_3.parent}if(parent_3&&parent_3!=this.currentXML){propertyName=parent_3.attributes.id;this.checkIdForState(parent_3)}var positionObj=this.findNearNodeId(node);var stateNames=[];if(attributes.includeIn){stateNames=attributes.includeIn.split(",")}else{var excludeNames=attributes.excludeFrom.split(",");var stateLength=excludeNames.length;for(var j=0;j<stateLength;j++){var name_2=excludeNames[j];this.getStateByName(name_2,node)}stateLength=this.stateCode.length;for(var j=0;j<stateLength;j++){state=this.stateCode[j];if(excludeNames.indexOf(state.name)==-1){stateNames.push(state.name)}}}var len=stateNames.length;for(var k=0;k<len;k++){stateName=stateNames[k];states=this.getStateByName(stateName,node);if(states.length>0){var l=states.length;for(var j=0;j<l;j++){state=states[j];state.addOverride(new sys.EXAddItems(id,propertyName,positionObj.position,positionObj.relativeTo))}}}}var names=Object.keys(attributes);var namesLength=names.length;for(var m=0;m<namesLength;m++){var name_3=names[m];var value=attributes[name_3];var index=name_3.indexOf(".");if(index!=-1){var key=name_3.substring(0,index);key=this.formatKey(key,value);var bindingValue=this.formatBinding(key,value,node);if(!bindingValue){value=this.formatValue(key,value,node);if(!value){continue}}stateName=name_3.substr(index+1);states=this.getStateByName(stateName,node);var l=states.length;if(l>0){for(var j=0;j<l;j++){state=states[j];if(bindingValue){state.addOverride(new sys.EXSetStateProperty(id,key,bindingValue.templates,bindingValue.chainIndex))}else{state.addOverride(new sys.EXSetProperty(id,key,value))}}}}}}}};EXMLParser.prototype.checkIdForState=function(node){if(!node||this.currentClass.getVariableByName(node.attributes.id)){return}this.createVarForNode(node);var id=node.attributes.id;var funcName=id+"_i";var func=this.currentClass.getFuncByName(funcName);if(!func)return;var codeLine="this."+id+" = t;";var cb=func.codeBlock;if(!cb)return;if(!cb.containsCodeLine(codeLine)){cb.addCodeLineAt(codeLine,1)}};EXMLParser.prototype.getStateByName=function(name,node){var states=[];var stateCode=this.stateCode;var length=stateCode.length;for(var i=0;i<length;i++){var state=stateCode[i];if(state.name==name){if(states.indexOf(state)==-1)states.push(state)}else if(state.stateGroups.length>0){var found=false;var len=state.stateGroups.length;for(var j=0;j<len;j++){var g=state.stateGroups[j];if(g==name){found=true;break}}if(found){if(states.indexOf(state)==-1)states.push(state)}}}if(true&&states.length==0){egret.$error(2006,this.currentClassName,name,toXMLString(node))}return states};EXMLParser.prototype.findNearNodeId=function(node){var parentNode=node.parent;var targetId="";var position;var index=-1;var preItem;var afterItem;var found=false;var children=parentNode.children;var length=children.length;for(var i=0;i<length;i++){var item=children[i];if(this.isProperty(item))continue;if(item==node){found=true;index=i}else{if(found&&!afterItem&&!this.isStateNode(item)){afterItem=item}}if(!found&&!this.isStateNode(item))preItem=item}if(index==0){position=0;return{position:position,relativeTo:targetId}}if(index==length-1){position=1;return{position:position,relativeTo:targetId}}if(afterItem){position=2;targetId=afterItem.attributes.id;if(targetId){this.checkIdForState(afterItem);return{position:position,relativeTo:targetId}}}return{position:1,relativeTo:targetId}};EXMLParser.prototype.getClassNameOfNode=function(node){var className=sys.exmlConfig.getClassNameById(node.localName,node.namespace);if(true&&!className){egret.$error(2003,this.currentClassName,toXMLString(node))}return className};return EXMLParser}();sys.EXMLParser=EXMLParser;__reflect(EXMLParser.prototype,"eui.sys.EXMLParser")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var ToggleButton=function(_super){__extends(ToggleButton,_super);function ToggleButton(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.$selected=false;_this.$autoSelected=true;return _this}Object.defineProperty(ToggleButton.prototype,"selected",{get:function(){return this.$selected},set:function(value){this.$setSelected(value)},enumerable:true,configurable:true});ToggleButton.prototype.$setSelected=function(value){value=!!value;if(value===this.$selected)return false;this.$selected=value;this.invalidateState();eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selected");return true};ToggleButton.prototype.getCurrentState=function(){var state=_super.prototype.getCurrentState.call(this);if(!this.$selected){return state}else{var selectedState=state+"AndSelected";var skin=this.skin;if(skin&&skin.hasState(selectedState)){return selectedState}return state=="disabled"?"disabled":"down"}};ToggleButton.prototype.buttonReleased=function(){if(!this.$autoSelected)return;this.selected=!this.$selected;this.dispatchEventWith(egret.Event.CHANGE)};return ToggleButton}(eui.Button);eui.ToggleButton=ToggleButton;__reflect(ToggleButton.prototype,"eui.ToggleButton");eui.registerBindable(ToggleButton.prototype,"selected")})(eui||(eui={}));var eui;(function(eui){var LinearLayoutBase=function(_super){__extends(LinearLayoutBase,_super);function LinearLayoutBase(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.$horizontalAlign="left";_this.$verticalAlign="top";_this.$gap=6;_this.$paddingLeft=0;_this.$paddingRight=0;_this.$paddingTop=0;_this.$paddingBottom=0;_this.elementSizeTable=[];_this.startIndex=-1;_this.endIndex=-1;_this.indexInViewCalculated=false;_this.maxElementSize=0;return _this}Object.defineProperty(LinearLayoutBase.prototype,"horizontalAlign",{get:function(){return this.$horizontalAlign},set:function(value){if(this.$horizontalAlign==value)return;this.$horizontalAlign=value;if(this.$target)this.$target.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(value){if(this.$verticalAlign==value)return;this.$verticalAlign=value;if(this.$target)this.$target.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"gap",{get:function(){return this.$gap},set:function(value){value=+value||0;if(this.$gap===value)return;this.$gap=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"paddingLeft",{get:function(){return this.$paddingLeft},set:function(value){value=+value||0;if(this.$paddingLeft===value)return;this.$paddingLeft=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"paddingRight",{get:function(){return this.$paddingRight},set:function(value){value=+value||0;if(this.$paddingRight===value)return;this.$paddingRight=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"paddingTop",{get:function(){return this.$paddingTop},set:function(value){value=+value||0;if(this.$paddingTop===value)return;this.$paddingTop=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(LinearLayoutBase.prototype,"paddingBottom",{get:function(){return this.$paddingBottom},set:function(value){value=+value||0;if(this.$paddingBottom===value)return;this.$paddingBottom=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});LinearLayoutBase.prototype.invalidateTargetLayout=function(){var target=this.$target;if(target){target.invalidateSize();target.invalidateDisplayList()}};LinearLayoutBase.prototype.measure=function(){if(!this.$target)return;if(this.$useVirtualLayout){this.measureVirtual()}else{this.measureReal()}};LinearLayoutBase.prototype.measureReal=function(){};LinearLayoutBase.prototype.measureVirtual=function(){};LinearLayoutBase.prototype.updateDisplayList=function(width,height){var target=this.$target;if(!target)return;if(target.numElements==0){target.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom));return}if(this.$useVirtualLayout){this.updateDisplayListVirtual(width,height)}else{this.updateDisplayListReal(width,height)}};LinearLayoutBase.prototype.getStartPosition=function(index){return 0};LinearLayoutBase.prototype.getElementSize=function(index){return 0};LinearLayoutBase.prototype.getElementTotalSize=function(){return 0};LinearLayoutBase.prototype.elementRemoved=function(index){if(!this.$useVirtualLayout)return;_super.prototype.elementRemoved.call(this,index);this.elementSizeTable.splice(index,1)};LinearLayoutBase.prototype.clearVirtualLayoutCache=function(){if(!this.$useVirtualLayout)return;this.elementSizeTable=[];this.maxElementSize=0};LinearLayoutBase.prototype.findIndexAt=function(x,i0,i1){var index=(i0+i1)*.5|0;var elementX=this.getStartPosition(index);var elementWidth=this.getElementSize(index);if(x>=elementX&&x<elementX+elementWidth+this.$gap)return index;else if(i0==i1)return-1;else if(x<elementX)return this.findIndexAt(x,i0,Math.max(i0,index-1));else return this.findIndexAt(x,Math.min(index+1,i1),i1)};LinearLayoutBase.prototype.scrollPositionChanged=function(){_super.prototype.scrollPositionChanged.call(this);if(this.$useVirtualLayout){var changed=this.getIndexInView();if(changed){this.indexInViewCalculated=true;this.target.invalidateDisplayList()}}};LinearLayoutBase.prototype.getIndexInView=function(){return false};LinearLayoutBase.prototype.updateDisplayListVirtual=function(width,height){};LinearLayoutBase.prototype.updateDisplayListReal=function(width,height){};LinearLayoutBase.prototype.flexChildrenProportionally=function(spaceForChildren,spaceToDistribute,totalPercent,childInfoArray){var numElements=childInfoArray.length;var done;do{done=true;var unused=spaceToDistribute-spaceForChildren*totalPercent/100;if(unused>0)spaceToDistribute-=unused;else unused=0;var spacePerPercent=spaceToDistribute/totalPercent;for(var i=0;i<numElements;i++){var childInfo=childInfoArray[i];var size=childInfo.percent*spacePerPercent;if(size<childInfo.min){var min=childInfo.min;childInfo.size=min;childInfoArray[i]=childInfoArray[--numElements];childInfoArray[numElements]=childInfo;totalPercent-=childInfo.percent;if(unused>=min){unused-=min}else{spaceToDistribute-=min-unused;unused=0}done=false;break}else if(size>childInfo.max){var max=childInfo.max;childInfo.size=max;childInfoArray[i]=childInfoArray[--numElements];childInfoArray[numElements]=childInfo;totalPercent-=childInfo.percent;if(unused>=max){unused-=max}else{spaceToDistribute-=max-unused;unused=0}done=false;break}else{childInfo.size=size}}}while(!done)};return LinearLayoutBase}(eui.LayoutBase);eui.LinearLayoutBase=LinearLayoutBase;__reflect(LinearLayoutBase.prototype,"eui.LinearLayoutBase")})(eui||(eui={}));(function(eui){var sys;(function(sys){var ChildInfo=function(){function ChildInfo(){this.layoutElement=null;this.size=0;this.percent=NaN;this.min=NaN;this.max=NaN}return ChildInfo}();sys.ChildInfo=ChildInfo;__reflect(ChildInfo.prototype,"eui.sys.ChildInfo")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var HSlider=function(_super){__extends(HSlider,_super);function HSlider(){return _super.call(this)||this}HSlider.prototype.pointToValue=function(x,y){if(!this.thumb||!this.track)return 0;var values=this.$Range;var range=values[0]-values[2];var thumbRange=this.getThumbRange();return values[2]+(thumbRange!=0?x/thumbRange*range:0)};HSlider.prototype.getThumbRange=function(){var bounds=egret.$TempRectangle;this.track.getLayoutBounds(bounds);var thumbRange=bounds.width;this.thumb.getLayoutBounds(bounds);return thumbRange-bounds.width};HSlider.prototype.updateSkinDisplayList=function(){if(!this.thumb||!this.track)return;var values=this.$Range;var thumbRange=this.getThumbRange();var range=values[0]-values[2];var thumbPosTrackX=range>0?(this.pendingValue-values[2])/range*thumbRange:0;var thumbPos=this.track.localToGlobal(thumbPosTrackX,0,egret.$TempPoint);var thumbPosX=thumbPos.x;var thumbPosY=thumbPos.y;var thumbPosParentX=this.thumb.$parent.globalToLocal(thumbPosX,thumbPosY,egret.$TempPoint).x;var bounds=egret.$TempRectangle;this.thumb.getLayoutBounds(bounds);this.thumb.setLayoutBoundsPosition(Math.round(thumbPosParentX),bounds.y);if(this.trackHighlight&&this.trackHighlight.$parent){var trackHighlightX=this.trackHighlight.$parent.globalToLocal(thumbPosX,thumbPosY,egret.$TempPoint).x-thumbPosTrackX;this.trackHighlight.x=Math.round(trackHighlightX);this.trackHighlight.width=Math.round(thumbPosTrackX)}};return HSlider}(eui.SliderBase);eui.HSlider=HSlider;__reflect(HSlider.prototype,"eui.HSlider")})(eui||(eui={}));var eui;(function(eui){var loaderPool=[];var callBackMap={};var loaderMap={};var DefaultAssetAdapter=function(){function DefaultAssetAdapter(){}DefaultAssetAdapter.prototype.getAsset=function(source,callBack,thisObject){var list=callBackMap[source];if(list){list.push([callBack,thisObject]);return}var loader=loaderPool.pop();if(!loader){loader=new egret.ImageLoader}callBackMap[source]=[[callBack,thisObject]];loaderMap[loader.$hashCode]=source;loader.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this);loader.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);loader.load(source)};DefaultAssetAdapter.prototype.onLoadFinish=function(event){var loader=event.currentTarget;loader.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this);loader.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var data;if(event.$type==egret.Event.COMPLETE){data=new egret.Texture;data._setBitmapData(loader.data);loader.data=null}loaderPool.push(loader);var source=loaderMap[loader.$hashCode];delete loaderMap[loader.$hashCode];var list=callBackMap[source];delete callBackMap[source];var length=list.length;for(var i=0;i<length;i++){var arr=list[i];arr[0].call(arr[1],data,source)}};return DefaultAssetAdapter}();eui.DefaultAssetAdapter=DefaultAssetAdapter;__reflect(DefaultAssetAdapter.prototype,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])})(eui||(eui={}));var eui;(function(eui){var Image=function(_super){__extends(Image,_super);function Image(source){var _this=_super.call(this)||this;_this.sourceChanged=false;_this._source=null;_this.initializeUIValues();if(source){_this.source=source}return _this}Object.defineProperty(Image.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(value){this.$setScale9Grid(value);this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Image.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(value){if(value==this.$fillMode){return}_super.prototype.$setFillMode.call(this,value);this.invalidateDisplayList()},enumerable:true,configurable:true});Image.prototype.$setFillMode=function(value){var result=_super.prototype.$setFillMode.call(this,value);this.invalidateDisplayList();return result};Object.defineProperty(Image.prototype,"source",{get:function(){return this._source},set:function(value){if(value==this._source){return}this._source=value;if(this.$stage){this.parseSource()}else{this.sourceChanged=true;this.invalidateProperties()}},enumerable:true,configurable:true});Image.prototype.$setTexture=function(value){if(value==this.$texture){return false}var result=_super.prototype.$setTexture.call(this,value);this.sourceChanged=false;this.invalidateSize();this.invalidateDisplayList();return result};Image.prototype.parseSource=function(){this.sourceChanged=false;var source=this._source;if(source&&typeof source=="string"){eui.getAssets(this._source,function(data){if(source!==this._source)return;if(!egret.is(data,"egret.Texture")){return}this.$setTexture(data);if(data){this.dispatchEventWith(egret.Event.COMPLETE)}else if(true){egret.$warn(2301,source)}},this)}else{this.$setTexture(source)}};Image.prototype.$measureContentBounds=function(bounds){var image=this.$texture;if(image){var uiValues=this.$UIComponent;var width=uiValues[10];var height=uiValues[11];if(isNaN(width)||isNaN(height)){bounds.setEmpty();return}if(this.$fillMode=="clip"){if(width>image.$getTextureWidth()){width=image.$getTextureWidth()}if(height>image.$getTextureHeight()){height=image.$getTextureHeight()}}bounds.setTo(0,0,width,height)}else{bounds.setEmpty()}};Image.prototype.createChildren=function(){if(this.sourceChanged){this.parseSource()}};Image.prototype.setActualSize=function(w,h){eui.sys.UIComponentImpl.prototype["setActualSize"].call(this,w,h);_super.prototype.$setWidth.call(this,w);_super.prototype.$setHeight.call(this,h)};Image.prototype.childrenCreated=function(){};Image.prototype.commitProperties=function(){eui.sys.UIComponentImpl.prototype["commitProperties"].call(this);if(this.sourceChanged){this.parseSource()}};Image.prototype.measure=function(){var texture=this.$texture;if(texture){this.setMeasuredSize(texture.$getTextureWidth(),texture.$getTextureHeight())}else{this.setMeasuredSize(0,0)}};Image.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){this.$renderDirty=true};Image.prototype.invalidateParentLayout=function(){};Image.prototype.setMeasuredSize=function(width,height){};Image.prototype.invalidateProperties=function(){};Image.prototype.validateProperties=function(){};Image.prototype.invalidateSize=function(){};Image.prototype.validateSize=function(recursive){};Image.prototype.invalidateDisplayList=function(){};Image.prototype.validateDisplayList=function(){};Image.prototype.validateNow=function(){};Image.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){};Image.prototype.setLayoutBoundsPosition=function(x,y){};Image.prototype.getLayoutBounds=function(bounds){};Image.prototype.getPreferredBounds=function(bounds){};return Image}(egret.Bitmap);eui.Image=Image;__reflect(Image.prototype,"eui.Image",["eui.UIComponent","egret.DisplayObject"]);eui.sys.implementUIComponent(Image,egret.Bitmap);eui.registerProperty(Image,"scale9Grid","egret.Rectangle")})(eui||(eui={}));var eui;(function(eui){var ItemRenderer=function(_super){__extends(ItemRenderer,_super);function ItemRenderer(){var _this=_super.call(this)||this;_this._data=null;_this._selected=false;_this.itemIndex=-1;_this.touchCaptured=false;_this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,_this.onTouchBegin,_this);return _this}Object.defineProperty(ItemRenderer.prototype,"data",{get:function(){return this._data},set:function(value){this._data=value;eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data");this.dataChanged()},enumerable:true,configurable:true});ItemRenderer.prototype.dataChanged=function(){};Object.defineProperty(ItemRenderer.prototype,"selected",{get:function(){return this._selected},set:function(value){if(this._selected==value)return;this._selected=value;this.invalidateState()},enumerable:true,configurable:true});ItemRenderer.prototype.onTouchCancle=function(event){this.touchCaptured=false;var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);this.invalidateState()};ItemRenderer.prototype.onTouchBegin=function(event){if(!this.$stage){return}this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);this.touchCaptured=true;this.invalidateState();event.updateAfterEvent()};ItemRenderer.prototype.onStageTouchEnd=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);this.touchCaptured=false;this.invalidateState()};ItemRenderer.prototype.getCurrentState=function(){var state="up";if(!this.enabled){state="disabled"}if(this.touchCaptured){state="down"}if(this._selected){var selectedState=state+"AndSelected";var skin=this.skin;if(skin&&skin.hasState(selectedState)){return selectedState}return state=="disabled"?"disabled":"down"}return state};return ItemRenderer}(eui.Component);eui.ItemRenderer=ItemRenderer;__reflect(ItemRenderer.prototype,"eui.ItemRenderer",["eui.IItemRenderer"]);eui.registerBindable(ItemRenderer.prototype,"data")})(eui||(eui={}));var eui;(function(eui){var UIImpl=eui.sys.UIComponentImpl;var Label=function(_super){__extends(Label,_super);function Label(text){var _this=_super.call(this)||this;_this.$styleSetMap={fontFamily:true,size:true,bold:true,italic:true,textAlign:true,verticalAlign:true,lineSpacing:true,textColor:true,wordWrap:true,displayAsPassword:true,strokeColor:true,stroke:true,maxChars:true,multiline:true,border:true,borderColor:true,background:true,backgroundColor:true};_this.$revertStyle={};_this.$style=null;_this.$changeFromStyle=false;_this._widthConstraint=NaN;_this.initializeUIValues();_this.text=text;return _this}Object.defineProperty(Label.prototype,"style",{get:function(){return this.$style},set:function(value){this.$setStyle(value)},enumerable:true,configurable:true});Label.prototype.$setStyle=function(value){if(this.$style==value){return}this.$style=value;var theme=egret.getImplementation("eui.Theme");if(theme){this.$changeFromStyle=true;for(var key in this.$revertStyle){this[key]=this.$revertStyle[key]}this.$revertStyle={};if(value==null){this.$changeFromStyle=false;return}var styleList=value.split(",");for(var i=0;i<styleList.length;i++){var config=theme.$getStyleConfig(styleList[i]);if(config){for(var key in config){if(this.$styleSetMap[key]){var revertValue=this[key];this[key]=config[key];this.$revertStyle[key]=revertValue}}}}this.$changeFromStyle=false}};Label.prototype.$setFontFamily=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["fontFamily"];this.$styleSetMap["fontFamily"]=false}return _super.prototype.$setFontFamily.call(this,value)};Label.prototype.$setSize=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["size"];this.$styleSetMap["size"]=false}return _super.prototype.$setSize.call(this,value)};Label.prototype.$setBold=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["bold"];this.$styleSetMap["bold"]=false}return _super.prototype.$setBold.call(this,value)};Label.prototype.$setItalic=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["italic"];this.$styleSetMap["italic"]=false}return _super.prototype.$setItalic.call(this,value)};Label.prototype.$setTextAlign=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["textAlign"];this.$styleSetMap["textAlign"]=false}return _super.prototype.$setTextAlign.call(this,value)};Label.prototype.$setVerticalAlign=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["verticalAlign"];this.$styleSetMap["verticalAlign"]=false}return _super.prototype.$setVerticalAlign.call(this,value)};Label.prototype.$setLineSpacing=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["lineSpacing"];this.$styleSetMap["lineSpacing"]=false}return _super.prototype.$setLineSpacing.call(this,value)};Label.prototype.$setTextColor=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["textColor"];this.$styleSetMap["textColor"]=false}return _super.prototype.$setTextColor.call(this,value)};Label.prototype.$setWordWrap=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["wordWrap"];this.$styleSetMap["wordWrap"]=false}_super.prototype.$setWordWrap.call(this,value)};Label.prototype.$setDisplayAsPassword=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["displayAsPassword"];this.$styleSetMap["displayAsPassword"]=false}return _super.prototype.$setDisplayAsPassword.call(this,value)};Label.prototype.$setStrokeColor=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["strokeColor"];this.$styleSetMap["strokeColor"]=false}return _super.prototype.$setStrokeColor.call(this,value)};Label.prototype.$setStroke=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["stroke"];this.$styleSetMap["stroke"]=false}return _super.prototype.$setStroke.call(this,value)};Label.prototype.$setMaxChars=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["maxChars"];this.$styleSetMap["maxChars"]=false}return _super.prototype.$setMaxChars.call(this,value)};Label.prototype.$setMultiline=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["multiline"];this.$styleSetMap["multiline"]=false}return _super.prototype.$setMultiline.call(this,value)};Label.prototype.$setBorder=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["border"];this.$styleSetMap["border"]=false}_super.prototype.$setBorder.call(this,value)};Label.prototype.$setBorderColor=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["borderColor"];this.$styleSetMap["borderColor"]=false}_super.prototype.$setBorderColor.call(this,value)};Label.prototype.$setBackground=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["background"];this.$styleSetMap["background"]=false}_super.prototype.$setBackground.call(this,value)};Label.prototype.$setBackgroundColor=function(value){if(!this.$changeFromStyle){delete this.$revertStyle["backgroundColor"];this.$styleSetMap["backgroundColor"]=false}_super.prototype.$setBackgroundColor.call(this,value)};Label.prototype.$invalidateTextField=function(){_super.prototype.$invalidateTextField.call(this);this.invalidateSize()};Label.prototype.$setWidth=function(value){var result1=_super.prototype.$setWidth.call(this,value);var result2=UIImpl.prototype.$setWidth.call(this,value);return result1&&result2};Label.prototype.$setHeight=function(value){var result1=_super.prototype.$setHeight.call(this,value);var result2=UIImpl.prototype.$setHeight.call(this,value);return result1&&result2};Label.prototype.$setText=function(value){var result=_super.prototype.$setText.call(this,value);eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"text");return result};Label.prototype.createChildren=function(){};Label.prototype.childrenCreated=function(){};Label.prototype.commitProperties=function(){};Label.prototype.measure=function(){var values=this.$UIComponent;var textValues=this.$TextField;var oldWidth=textValues[3];var availableWidth=NaN;if(!isNaN(this._widthConstraint)){availableWidth=this._widthConstraint;this._widthConstraint=NaN}else if(!isNaN(values[8])){availableWidth=values[8]}else if(values[13]!=1e5){availableWidth=values[13]}_super.prototype.$setWidth.call(this,availableWidth);this.setMeasuredSize(this.textWidth,this.textHeight);_super.prototype.$setWidth.call(this,oldWidth)};Label.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.$setWidth.call(this,unscaledWidth);_super.prototype.$setHeight.call(this,unscaledHeight)};Label.prototype.invalidateParentLayout=function(){};Label.prototype.setMeasuredSize=function(width,height){};Label.prototype.invalidateProperties=function(){};Label.prototype.validateProperties=function(){};Label.prototype.invalidateSize=function(){};Label.prototype.validateSize=function(recursive){};Label.prototype.invalidateDisplayList=function(){};Label.prototype.validateDisplayList=function(){};Label.prototype.validateNow=function(){};Label.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){UIImpl.prototype.setLayoutBoundsSize.call(this,layoutWidth,layoutHeight);if(isNaN(layoutWidth)||layoutWidth===this._widthConstraint||layoutWidth==0){this._widthConstraint=layoutWidth;return}this._widthConstraint=layoutWidth;var values=this.$UIComponent;if(!isNaN(values[9])){return}if(layoutWidth==values[16]){return}this.invalidateSize()};Label.prototype.setLayoutBoundsPosition=function(x,y){};Label.prototype.getLayoutBounds=function(bounds){};Label.prototype.getPreferredBounds=function(bounds){};return Label}(egret.TextField);eui.Label=Label;__reflect(Label.prototype,"eui.Label",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]);eui.sys.implementUIComponent(Label,egret.TextField);eui.registerBindable(Label.prototype,"text")})(eui||(eui={}));var eui;(function(eui){var List=function(_super){__extends(List,_super);function List(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.allowMultipleSelection=false;_this._selectedIndices=[];_this.isValidIndex=function(item,index,v){return _this.$dataProvider&&item>=0&&item<_this.$dataProvider.length&&item%1==0};return _this}Object.defineProperty(List.prototype,"selectedIndices",{get:function(){if(this._proposedSelectedIndices)return this._proposedSelectedIndices;return this._selectedIndices},set:function(value){this.setSelectedIndices(value,false)},enumerable:true,configurable:true});Object.defineProperty(List.prototype,"selectedIndex",{get:function(){if(this._proposedSelectedIndices){if(this._proposedSelectedIndices.length>0)return this._proposedSelectedIndices[0];return-1}return this.$getSelectedIndex()},set:function(value){this.setSelectedIndex(value)},enumerable:true,configurable:true});Object.defineProperty(List.prototype,"selectedItems",{get:function(){var result=[];var list=this.selectedIndices;if(list){var count=list.length;for(var i=0;i<count;i++){result[i]=this.$dataProvider.getItemAt(list[i])}}return result},set:function(value){var indices=[];if(value){var count=value.length;for(var i=0;i<count;i++){var index=this.$dataProvider.getItemIndex(value[i]);if(index!=-1){indices.splice(0,0,index)}if(index==-1){indices=[];break}}}this.setSelectedIndices(indices,false)},enumerable:true,configurable:true});List.prototype.setSelectedIndices=function(value,dispatchChangeEvent){var values=this.$ListBase;if(dispatchChangeEvent)values[4]=values[4]||dispatchChangeEvent;if(value)this._proposedSelectedIndices=value;else this._proposedSelectedIndices=[];this.invalidateProperties()};List.prototype.commitProperties=function(){_super.prototype.commitProperties.call(this);if(this._proposedSelectedIndices){this.commitSelection()}};List.prototype.commitSelection=function(dispatchChangedEvents){if(dispatchChangedEvents===void 0){dispatchChangedEvents=true}var values=this.$ListBase;var oldSelectedIndex=values[3];if(this._proposedSelectedIndices){this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex);if(!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var temp=[];temp.push(this._proposedSelectedIndices[0]);this._proposedSelectedIndices=temp}if(this._proposedSelectedIndices.length>0){values[2]=this._proposedSelectedIndices[0]}else{values[2]=-1}}var retVal=_super.prototype.commitSelection.call(this,false);if(!retVal){this._proposedSelectedIndices=null;return false}var selectedIndex=this.$getSelectedIndex();if(selectedIndex>eui.ListBase.NO_SELECTION){if(this._proposedSelectedIndices){if(this._proposedSelectedIndices.indexOf(selectedIndex)==-1)this._proposedSelectedIndices.push(selectedIndex)}else{this._proposedSelectedIndices=[selectedIndex]}}if(this._proposedSelectedIndices){if(this._proposedSelectedIndices.indexOf(oldSelectedIndex)!=-1)this.itemSelected(oldSelectedIndex,true);this.commitMultipleSelection()}if(dispatchChangedEvents&&retVal){if(values[4]){this.dispatchEventWith(egret.Event.CHANGE);values[4]=false}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedIndex");eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedItem")}return retVal};List.prototype.commitMultipleSelection=function(){var removedItems=[];var addedItems=[];var i;var count;var selectedIndices=this._selectedIndices;var proposedSelectedIndices=this._proposedSelectedIndices;if(selectedIndices.length>0&&proposedSelectedIndices.length>0){count=proposedSelectedIndices.length;for(i=0;i<count;i++){if(selectedIndices.indexOf(proposedSelectedIndices[i])==-1)addedItems.push(proposedSelectedIndices[i])}count=selectedIndices.length;for(i=0;i<count;i++){if(proposedSelectedIndices.indexOf(selectedIndices[i])==-1)removedItems.push(selectedIndices[i])}}else if(selectedIndices.length>0){removedItems=selectedIndices}else if(proposedSelectedIndices.length>0){addedItems=proposedSelectedIndices}this._selectedIndices=proposedSelectedIndices;if(removedItems.length>0){count=removedItems.length;for(i=0;i<count;i++){this.itemSelected(removedItems[i],false)}}if(addedItems.length>0){count=addedItems.length;for(i=0;i<count;i++){this.itemSelected(addedItems[i],true)}}this._proposedSelectedIndices=null};List.prototype.$isItemIndexSelected=function(index){if(this.allowMultipleSelection)return this._selectedIndices.indexOf(index)!=-1;return _super.prototype.$isItemIndexSelected.call(this,index)};List.prototype.dataProviderRefreshed=function(){if(this.allowMultipleSelection){return}_super.prototype.dataProviderRefreshed.call(this)};List.prototype.calculateSelectedIndices=function(index){var interval=[];var selectedIndices=this._selectedIndices;var length=selectedIndices.length;if(length>0){if(length==1&&selectedIndices[0]==index){if(!this.$ListBase[0]){return interval}interval.splice(0,0,selectedIndices[0]);return interval}else{var found=false;for(var i=0;i<length;i++){if(selectedIndices[i]==index){found=true}else if(selectedIndices[i]!=index){interval.splice(0,0,selectedIndices[i])}}if(!found){interval.splice(0,0,index)}return interval}}else{interval.splice(0,0,index);return interval}};List.prototype.onRendererTouchEnd=function(event){if(this.allowMultipleSelection){var itemRenderer=event.currentTarget;var touchDownItemRenderer=this.$ListBase[7];if(itemRenderer!=touchDownItemRenderer)return;this.setSelectedIndices(this.calculateSelectedIndices(itemRenderer.itemIndex),true);eui.ItemTapEvent.dispatchItemTapEvent(this,eui.ItemTapEvent.ITEM_TAP,itemRenderer)}else{_super.prototype.onRendererTouchEnd.call(this,event)}};return List}(eui.ListBase);eui.List=List;__reflect(List.prototype,"eui.List")})(eui||(eui={}));var eui;(function(eui){var Panel=function(_super){__extends(Panel,_super);function Panel(){var _this=_super.call(this)||this;_this.closeButton=null;_this.moveArea=null;_this.titleDisplay=null;_this._title="";_this.offsetPointX=0;_this.offsetPointY=0;_this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,_this.onWindowTouchBegin,_this,false,100);return _this}Panel.prototype.onWindowTouchBegin=function(event){this.$parent.addChild(this)};Object.defineProperty(Panel.prototype,"elementsContent",{set:function(value){if(value){var length_25=value.length;for(var i=0;i<length_25;i++){this.addChild(value[i])}}},enumerable:true,configurable:true});Object.defineProperty(Panel.prototype,"title",{get:function(){return this._title},set:function(value){this._title=value;if(this.titleDisplay)this.titleDisplay.text=this.title},enumerable:true,configurable:true});Panel.prototype.partAdded=function(partName,instance){_super.prototype.partAdded.call(this,partName,instance);if(instance==this.titleDisplay){this.titleDisplay.text=this._title}else if(instance==this.moveArea){this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}else if(instance==this.closeButton){this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)}};Panel.prototype.partRemoved=function(partName,instance){_super.prototype.partRemoved.call(this,partName,instance);if(instance==this.moveArea){this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this)}else if(instance==this.closeButton){this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)}};Panel.prototype.onCloseButtonClick=function(event){if(eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CLOSING,true,true)){this.close()}};Panel.prototype.close=function(){if(!this.$parent){return}this.$parent.removeChild(this)};Panel.prototype.onTouchBegin=function(event){this.$includeInLayout=false;this.offsetPointX=this.x-event.$stageX;this.offsetPointY=this.y-event.$stageY;this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)};Panel.prototype.onTouchMove=function(event){this.x=event.$stageX+this.offsetPointX;this.y=event.$stageY+this.offsetPointY};Panel.prototype.onTouchEnd=function(event){var stage=event.$currentTarget;stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)};return Panel}(eui.Component);eui.Panel=Panel;__reflect(Panel.prototype,"eui.Panel");eui.registerProperty(Panel,"elementsContent","Array",true)})(eui||(eui={}));var eui;(function(eui){var ProgressBar=function(_super){__extends(ProgressBar,_super);function ProgressBar(){var _this=_super.call(this)||this;_this.thumb=null;_this.labelDisplay=null;_this._labelFunction=null;_this._slideDuration=500;_this._direction=eui.Direction.LTR;_this.slideToValue=0;_this.animationValue=0;_this.thumbInitX=0;_this.thumbInitY=0;_this.animation=new eui.sys.Animation(_this.animationUpdateHandler,_this);return _this}Object.defineProperty(ProgressBar.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(value){if(this._labelFunction==value)return;this._labelFunction=value;this.invalidateDisplayList()},enumerable:true,configurable:true});ProgressBar.prototype.valueToLabel=function(value,maximum){if(this.labelFunction!=null){return this._labelFunction(value,maximum)}return value+" / "+maximum};Object.defineProperty(ProgressBar.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(value){value=+value|0;if(this._slideDuration===value)return;this._slideDuration=value;if(this.animation.isPlaying){this.animation.stop();this.setValue(this.slideToValue)}},enumerable:true,configurable:true});Object.defineProperty(ProgressBar.prototype,"direction",{get:function(){return this._direction},set:function(value){if(this._direction==value)return;if(this.thumb)this.thumb.x=this.thumbInitX;if(this.thumb)this.thumb.y=this.thumbInitY;this._direction=value;this.invalidateDisplayList()},enumerable:true,configurable:true});ProgressBar.prototype.$setValue=function(newValue){if(this.value===newValue)return false;var values=this.$Range;var result=_super.prototype.$setValue.call(this,newValue);if(this._slideDuration>0&&this.$stage){this.validateProperties();var animation=this.animation;if(animation.isPlaying){this.animationValue=this.slideToValue;this.invalidateDisplayList();animation.stop()}this.slideToValue=this.nearestValidValue(newValue,values[7]);if(this.slideToValue===this.animationValue)return result;var duration=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(values[0]-values[2]));animation.duration=duration===Infinity?0:duration;animation.from=this.animationValue;animation.to=this.slideToValue;animation.play()}else{this.animationValue=this.value}return result};ProgressBar.prototype.animationUpdateHandler=function(animation){var values=this.$Range;var value=this.nearestValidValue(animation.currentValue,values[7]);this.animationValue=Math.min(values[0],Math.max(values[2],value));this.invalidateDisplayList()};ProgressBar.prototype.partAdded=function(partName,instance){_super.prototype.partAdded.call(this,partName,instance);if(instance===this.thumb){if(this.thumb.x)this.thumbInitX=this.thumb.x;if(this.thumb.y)this.thumbInitY=this.thumb.y;this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this)}};ProgressBar.prototype.partRemoved=function(partName,instance){_super.prototype.partRemoved.call(this,partName,instance);if(instance===this.thumb){this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)}};ProgressBar.prototype.onThumbResize=function(event){this.updateSkinDisplayList()};ProgressBar.prototype.updateSkinDisplayList=function(){var currentValue=this.animation.isPlaying?this.animationValue:this.value;var maxValue=this.maximum;var thumb=this.thumb;if(thumb){var thumbWidth=thumb.width;var thumbHeight=thumb.height;var clipWidth=Math.round(currentValue/maxValue*thumbWidth);if(clipWidth<0||clipWidth===Infinity)clipWidth=0;var clipHeight=Math.round(currentValue/maxValue*thumbHeight);if(clipHeight<0||clipHeight===Infinity)clipHeight=0;var rect=thumb.$scrollRect;if(!rect){rect=egret.$TempRectangle}rect.setTo(0,0,thumbWidth,thumbHeight);var thumbPosX=thumb.x-rect.x;var thumbPosY=thumb.y-rect.y;switch(this._direction){case eui.Direction.LTR:rect.width=clipWidth;thumb.x=thumbPosX;break;case eui.Direction.RTL:rect.width=clipWidth;rect.x=thumbWidth-clipWidth;thumb.x=rect.x;break;case eui.Direction.TTB:rect.height=clipHeight;thumb.y=thumbPosY;break;case eui.Direction.BTT:rect.height=clipHeight;rect.y=thumbHeight-clipHeight;thumb.y=rect.y;break}thumb.scrollRect=rect}if(this.labelDisplay){this.labelDisplay.text=this.valueToLabel(currentValue,maxValue)}};return ProgressBar}(eui.Range);eui.ProgressBar=ProgressBar;__reflect(ProgressBar.prototype,"eui.ProgressBar")})(eui||(eui={}));var eui;(function(eui){var automaticRadioButtonGroups={};var RadioButton=function(_super){__extends(RadioButton,_super);function RadioButton(){var _this=_super.call(this)||this;_this.$indexNumber=0;_this.$radioButtonGroup=null;_this._group=null;_this.groupChanged=false;_this._groupName="radioGroup";_this._value=null;_this.groupName="radioGroup";return _this}Object.defineProperty(RadioButton.prototype,"enabled",{get:function(){if(!this.$Component[3]){return false}return!this.$radioButtonGroup||this.$radioButtonGroup.$enabled},set:function(value){this.$setEnabled(value)},enumerable:true,configurable:true});Object.defineProperty(RadioButton.prototype,"group",{get:function(){if(!this._group&&this._groupName){var g=automaticRadioButtonGroups[this._groupName];if(!g){g=new eui.RadioButtonGroup;g.$name=this._groupName;automaticRadioButtonGroups[this._groupName]=g}this._group=g}return this._group},set:function(value){if(this._group==value)return;if(this.$radioButtonGroup)this.$radioButtonGroup.$removeInstance(this,false);this._group=value;this._groupName=value?this.group.$name:"radioGroup";this.groupChanged=true;this.invalidateProperties();this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(RadioButton.prototype,"groupName",{get:function(){return this._groupName},set:function(value){if(!value||value=="")return;this._groupName=value;if(this.$radioButtonGroup)this.$radioButtonGroup.$removeInstance(this,false);this._group=null;this.groupChanged=true;this.invalidateProperties();this.invalidateDisplayList()},enumerable:true,configurable:true});RadioButton.prototype.$setSelected=function(value){var result=_super.prototype.$setSelected.call(this,value);this.invalidateDisplayList();return result};Object.defineProperty(RadioButton.prototype,"value",{get:function(){return this._value},set:function(value){if(this._value==value)return;this._value=value;if(this.$selected&&this.group){eui.PropertyEvent.dispatchPropertyEvent(this.group,eui.PropertyEvent.PROPERTY_CHANGE,"selectedValue")}},enumerable:true,configurable:true});RadioButton.prototype.commitProperties=function(){if(this.groupChanged){this.addToGroup();this.groupChanged=false}_super.prototype.commitProperties.call(this)};RadioButton.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);if(this.group){if(this.$selected)this._group.$setSelection(this,false);else if(this.group.selection==this)this._group.$setSelection(null,false)}};RadioButton.prototype.buttonReleased=function(){if(!this.enabled||this.selected)return;if(!this.$radioButtonGroup)this.addToGroup();_super.prototype.buttonReleased.call(this);this.group.$setSelection(this,true)};RadioButton.prototype.addToGroup=function(){var g=this.group;if(g)g.$addInstance(this);return g};return RadioButton}(eui.ToggleButton);eui.RadioButton=RadioButton;__reflect(RadioButton.prototype,"eui.RadioButton")})(eui||(eui={}));var eui;(function(eui){var groupCount=0;function breadthOrderCompare(a,b){var aParent=a.parent;var bParent=b.parent;if(!aParent||!bParent)return 0;var aNestLevel=a.$nestLevel;var bNestLevel=b.$nestLevel;var aIndex=0;var bIndex=0;if(aParent==bParent){aIndex=aParent.getChildIndex(a);bIndex=bParent.getChildIndex(b)}if(aNestLevel>bNestLevel||aIndex>bIndex)return 1;if(aNestLevel<bNestLevel||bIndex>aIndex)return-1;if(a==b)return 0;return breadthOrderCompare(aParent,bParent)}var RadioButtonGroup=function(_super){__extends(RadioButtonGroup,_super);function RadioButtonGroup(){var _this=_super.call(this)||this;_this.$name=null;_this.radioButtons=[];_this.$enabled=true;_this._selectedValue=null;_this._selection=null;_this.$name="_radioButtonGroup"+groupCount++;return _this}RadioButtonGroup.prototype.getRadioButtonAt=function(index){return this.radioButtons[index]};Object.defineProperty(RadioButtonGroup.prototype,"enabled",{get:function(){return this.$enabled},set:function(value){value=!!value;if(this.$enabled===value)return;this.$enabled=value;var buttons=this.radioButtons;var length=buttons.length;for(var i=0;i<length;i++)buttons[i].invalidateState()},enumerable:true,configurable:true});Object.defineProperty(RadioButtonGroup.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:true,configurable:true});Object.defineProperty(RadioButtonGroup.prototype,"selectedValue",{get:function(){if(this.selection){return this.selection.value!=null?this.selection.value:this.selection.label}return null},set:function(value){this._selectedValue=value;if(value==null){this.$setSelection(null,false);return}var n=this.numRadioButtons;for(var i=0;i<n;i++){var radioButton=this.radioButtons[i];if(radioButton.value==value||radioButton.label==value){this.changeSelection(i,false);this._selectedValue=null;eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}},enumerable:true,configurable:true});Object.defineProperty(RadioButtonGroup.prototype,"selection",{get:function(){return this._selection},set:function(value){if(this._selection==value)return;this.$setSelection(value,false)},enumerable:true,configurable:true});RadioButtonGroup.prototype.$addInstance=function(instance){instance.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this);var buttons=this.radioButtons;buttons.push(instance);buttons.sort(breadthOrderCompare);var length=buttons.length;for(var i=0;i<length;i++){buttons[i].$indexNumber=i}if(this._selectedValue)this.selectedValue=this._selectedValue;if(instance.selected==true)this.selection=instance;instance.$radioButtonGroup=this;instance.invalidateState()};RadioButtonGroup.prototype.$removeInstance=function(instance,addListener){if(instance){var foundInstance=false;var buttons=this.radioButtons;var length_26=buttons.length;for(var i=0;i<length_26;i++){var rb=buttons[i];if(foundInstance){rb.$indexNumber=rb.$indexNumber-1}else if(rb==instance){if(addListener)instance.addEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this);if(instance==this._selection)this._selection=null;instance.$radioButtonGroup=null;instance.invalidateState();this.radioButtons.splice(i,1);foundInstance=true;i--;length_26--}}}};RadioButtonGroup.prototype.$setSelection=function(value,fireChange){if(this._selection==value)return false;if(!value){if(this._selection){this._selection.selected=false;this._selection=null;if(fireChange)this.dispatchEventWith(egret.Event.CHANGE)}}else{var n=this.numRadioButtons;for(var i=0;i<n;i++){if(value==this.getRadioButtonAt(i)){this.changeSelection(i,fireChange);break}}}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedValue");return true};RadioButtonGroup.prototype.changeSelection=function(index,fireChange){var rb=this.getRadioButtonAt(index);if(rb&&rb!=this._selection){if(this._selection)this._selection.selected=false;this._selection=rb;this._selection.selected=true;if(fireChange)this.dispatchEventWith(egret.Event.CHANGE)}};RadioButtonGroup.prototype.addedHandler=function(event){var rb=event.target;if(rb==event.currentTarget){rb.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this);this.$addInstance(rb)}};RadioButtonGroup.prototype.removedHandler=function(event){var rb=event.target;if(rb==event.currentTarget){rb.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this);this.$removeInstance(rb,true)}};return RadioButtonGroup}(egret.EventDispatcher);eui.RadioButtonGroup=RadioButtonGroup;__reflect(RadioButtonGroup.prototype,"eui.RadioButtonGroup");eui.registerBindable(RadioButtonGroup.prototype,"selectedValue")})(eui||(eui={}));var eui;(function(eui){var Rect=function(_super){__extends(Rect,_super);function Rect(width,height,fillColor){var _this=_super.call(this)||this;_this.$fillColor=0;_this.$fillAlpha=1;_this.$strokeColor=4473924;_this.$strokeAlpha=1;_this.$strokeWeight=0;_this.$ellipseWidth=0;_this.$ellipseHeight=0;_this.touchChildren=false;_this.$graphics=new egret.Graphics;_this.$graphics.$setTarget(_this);_this.width=width;_this.height=height;_this.fillColor=fillColor;return _this}Rect.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)};Object.defineProperty(Rect.prototype,"graphics",{get:function(){return this.$graphics},enumerable:true,configurable:true});Rect.prototype.$measureContentBounds=function(bounds){if(this.$graphics){bounds.setTo(0,0,this.width,this.height)}};Object.defineProperty(Rect.prototype,"fillColor",{get:function(){return this.$fillColor},set:function(value){if(value==undefined||this.$fillColor==value)return;this.$fillColor=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"fillAlpha",{get:function(){return this.$fillAlpha},set:function(value){if(this.$fillAlpha==value)return;this.$fillAlpha=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(value){if(this.$strokeColor==value)return;this.$strokeColor=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"strokeAlpha",{get:function(){return this.$strokeAlpha},set:function(value){if(this.$strokeAlpha==value)return;this.$strokeAlpha=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"strokeWeight",{get:function(){return this.$strokeWeight},set:function(value){if(this.$strokeWeight==value)return;this.$strokeWeight=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"ellipseWidth",{get:function(){return this.$ellipseWidth},set:function(value){if(this.$ellipseWidth==value)return;this.$ellipseWidth=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Object.defineProperty(Rect.prototype,"ellipseHeight",{get:function(){return this.$ellipseHeight},set:function(value){if(this.$ellipseHeight==value)return;this.$ellipseHeight=value;this.invalidateDisplayList()},enumerable:true,configurable:true});Rect.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){var g=this.graphics;g.clear();if(this.$strokeWeight>0){g.beginFill(this.$fillColor,0);g.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,true,"normal","square","miter");if(this.$ellipseWidth==0&&this.$ellipseHeight==0){g.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,unscaledWidth-this.$strokeWeight,unscaledHeight-this.$strokeWeight)}else{g.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,unscaledWidth-this.$strokeWeight,unscaledHeight-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight)}g.endFill()}g.beginFill(this.$fillColor,this.$fillAlpha);g.lineStyle(this.$strokeWeight,this.$strokeColor,0,true,"normal","square","miter");if(this.$ellipseWidth==0&&this.$ellipseHeight==0){g.drawRect(this.$strokeWeight,this.$strokeWeight,unscaledWidth-this.$strokeWeight*2,unscaledHeight-this.$strokeWeight*2)}else{g.drawRoundRect(this.$strokeWeight,this.$strokeWeight,unscaledWidth-this.$strokeWeight*2,unscaledHeight-this.$strokeWeight*2,this.$ellipseWidth,this.$ellipseHeight)}g.endFill()};Rect.prototype.$onRemoveFromStage=function(){_super.prototype.$onRemoveFromStage.call(this);if(this.$graphics){this.$graphics.$onRemoveFromStage()}};return Rect}(eui.Component);eui.Rect=Rect;__reflect(Rect.prototype,"eui.Rect")})(eui||(eui={}));var eui;(function(eui){var scrollerThrowEvent;var Scroller=function(_super){__extends(Scroller,_super);function Scroller(){var _this=_super.call(this)||this;_this.$bounces=true;_this.horizontalScrollBar=null;_this.verticalScrollBar=null;var touchScrollH=new eui.sys.TouchScroll(_this.horizontalUpdateHandler,_this.horizontalEndHandler,_this);var touchScrollV=new eui.sys.TouchScroll(_this.verticalUpdateHandler,_this.verticalEndHanlder,_this);_this.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:false,6:false,7:false,8:touchScrollH,9:touchScrollV,10:null,11:false,12:false};return _this}Object.defineProperty(Scroller.prototype,"bounces",{get:function(){return this.$bounces},set:function(value){this.$bounces=!!value;var touchScrollH=this.$Scroller[8];if(touchScrollH){touchScrollH.$bounces=this.$bounces}var touchScrollV=this.$Scroller[9];if(touchScrollV){touchScrollV.$bounces=this.$bounces}},enumerable:true,configurable:true});Object.defineProperty(Scroller.prototype,"throwSpeed",{get:function(){return this.$Scroller[8].$scrollFactor},set:function(val){val=+val;if(val<0)val=0;this.$Scroller[8].$scrollFactor=val;this.$Scroller[9].$scrollFactor=val},enumerable:true,configurable:true});Scroller.prototype.$getThrowInfo=function(currentPos,toPos){if(!scrollerThrowEvent){scrollerThrowEvent=new eui.ScrollerThrowEvent(eui.ScrollerThrowEvent.THROW,false,false,currentPos,toPos)}else{scrollerThrowEvent.currentPos=currentPos;scrollerThrowEvent.toPos=toPos}return scrollerThrowEvent};Object.defineProperty(Scroller.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(value){var values=this.$Scroller;if(values[0]==value){return}values[0]=value;this.checkScrollPolicy()},enumerable:true,configurable:true});Object.defineProperty(Scroller.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(value){var values=this.$Scroller;if(values[1]==value){return}values[1]=value;this.checkScrollPolicy()},enumerable:true,configurable:true});Scroller.prototype.stopAnimation=function(){var values=this.$Scroller;var scrollV=values[9];var scrollH=values[8];if(scrollV.animation.isPlaying){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END)}else if(scrollH.animation.isPlaying){eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END)}scrollV.stop();scrollH.stop();var verticalBar=this.verticalScrollBar;var horizontalBar=this.horizontalScrollBar;if(verticalBar&&verticalBar.autoVisibility){verticalBar.visible=false}if(horizontalBar&&horizontalBar.autoVisibility){horizontalBar.visible=false}};Object.defineProperty(Scroller.prototype,"viewport",{get:function(){return this.$Scroller[10]},set:function(value){var values=this.$Scroller;if(value==values[10])return;this.uninstallViewport();values[10]=value;values[11]=false;this.installViewport()},enumerable:true,configurable:true});Scroller.prototype.installViewport=function(){var viewport=this.viewport;if(viewport){this.addChildAt(viewport,0);viewport.scrollEnabled=true;viewport.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,true);viewport.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,true);viewport.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,true);viewport.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)}if(this.horizontalScrollBar){this.horizontalScrollBar.viewport=viewport}if(this.verticalScrollBar){this.verticalScrollBar.viewport=viewport}};Scroller.prototype.uninstallViewport=function(){if(this.horizontalScrollBar){this.horizontalScrollBar.viewport=null}if(this.verticalScrollBar){this.verticalScrollBar.viewport=null}var viewport=this.viewport;if(viewport){viewport.scrollEnabled=false;viewport.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,true);viewport.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,true);viewport.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,true);viewport.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this);if(this.$Scroller[11]==false){this.removeChild(viewport)}}};Scroller.prototype.onViewPortRemove=function(event){if(event.target==this.viewport){this.$Scroller[11]=true;this.viewport=null}};Scroller.prototype.setSkin=function(skin){_super.prototype.setSkin.call(this,skin);var viewport=this.viewport;if(viewport){this.addChildAt(viewport,0)}};Scroller.prototype.onTouchBeginCapture=function(event){if(!this.$stage){return}this.$Scroller[12]=false;var canScroll=this.checkScrollPolicy();if(!canScroll){return}this.onTouchBegin(event)};Scroller.prototype.onTouchEndCapture=function(event){if(this.$Scroller[12]){event.$bubbles=false;this.dispatchBubbleEvent(event);event.$bubbles=true;event.stopPropagation();this.onTouchEnd(event)}};Scroller.prototype.onTouchTapCapture=function(event){if(this.$Scroller[12]){event.$bubbles=false;this.dispatchBubbleEvent(event);event.$bubbles=true;event.stopPropagation()}};Scroller.prototype.checkScrollPolicy=function(){var values=this.$Scroller;var viewport=values[10];if(!viewport){return false}var hCanScroll;var uiValues=viewport.$UIComponent;switch(values[1]){case"auto":if(viewport.contentWidth>uiValues[10]||viewport.scrollH!==0){hCanScroll=true}else{hCanScroll=false}break;case"on":hCanScroll=true;break;case"off":hCanScroll=false;break}values[6]=hCanScroll;var vCanScroll;switch(values[0]){case"auto":if(viewport.contentHeight>uiValues[11]||viewport.scrollV!==0){vCanScroll=true}else{vCanScroll=false}break;case"on":vCanScroll=true;break;case"off":vCanScroll=false;break}values[7]=vCanScroll;return hCanScroll||vCanScroll};Scroller.prototype.onTouchBegin=function(event){if(event.isDefaultPrevented()){return}if(!this.checkScrollPolicy()){return}this.downTarget=event.target;var values=this.$Scroller;this.stopAnimation();values[3]=event.$stageX;values[4]=event.$stageY;if(values[6]){values[8].start(event.$stageX)}if(values[7]){values[9].start(event.$stageY)}var stage=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,true);this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this);this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this);this.tempStage=stage};Scroller.prototype.onTouchMove=function(event){if(event.isDefaultPrevented()){return}var values=this.$Scroller;if(!values[5]){var outX=void 0;if(Math.abs(values[3]-event.$stageX)<Scroller.scrollThreshold){outX=false}else{outX=true}var outY=void 0;if(Math.abs(values[4]-event.$stageY)<Scroller.scrollThreshold){outY=false}else{outY=true}if(!outX&&!outY){return}if(!outY&&outX&&values[1]=="off"){return}if(!outX&&outY&&values[0]=="off"){return}values[12]=true;values[5]=true;this.dispatchCancelEvent(event);var horizontalBar=this.horizontalScrollBar;var verticalBar=this.verticalScrollBar;if(horizontalBar&&horizontalBar.autoVisibility&&values[6]){horizontalBar.visible=true}if(verticalBar&&verticalBar.autoVisibility&&values[7]){verticalBar.visible=true}if(values[2]){values[2].reset()}eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_START);this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}event.preventDefault();var viewport=values[10];var uiValues=viewport.$UIComponent;if(values[6]){values[8].update(event.$stageX,viewport.contentWidth-uiValues[10],viewport.scrollH)}if(values[7]){values[9].update(event.$stageY,viewport.contentHeight-uiValues[11],viewport.scrollV)}};Scroller.prototype.onTouchCancel=function(event){if(!this.$Scroller[5]){this.onRemoveListeners()}};Scroller.prototype.dispatchBubbleEvent=function(event){var viewport=this.$Scroller[10];if(!viewport){return}var cancelEvent=egret.Event.create(egret.TouchEvent,event.type,event.bubbles,event.cancelable);cancelEvent.$initTo(event.$stageX,event.$stageY,event.touchPointID);var target=this.downTarget;cancelEvent.$setTarget(target);var list=this.$getPropagationList(target);var length=list.length;var targetIndex=list.length*.5;var startIndex=-1;for(var i=0;i<length;i++){if(list[i]===viewport){startIndex=i;break}}list.splice(0,list.length-startIndex+1);targetIndex=0;this.$dispatchPropagationEvent(cancelEvent,list,targetIndex);egret.Event.release(cancelEvent)};Scroller.prototype.dispatchCancelEvent=function(event){var viewport=this.$Scroller[10];if(!viewport){return}var cancelEvent=egret.Event.create(egret.TouchEvent,egret.TouchEvent.TOUCH_CANCEL,event.bubbles,event.cancelable);cancelEvent.$initTo(event.$stageX,event.$stageY,event.touchPointID);var target=this.downTarget;cancelEvent.$setTarget(target);var list=this.$getPropagationList(target);var length=list.length;var targetIndex=list.length*.5;var startIndex=-1;for(var i=0;i<length;i++){if(list[i]===viewport){startIndex=i;break}}list.splice(0,startIndex+1-2);list.splice(list.length-1-startIndex+2,startIndex+1-2);targetIndex-=startIndex+1;this.$dispatchPropagationEvent(cancelEvent,list,targetIndex);egret.Event.release(cancelEvent)};Scroller.prototype.onTouchEnd=function(event){var values=this.$Scroller;values[5]=false;this.onRemoveListeners();var viewport=values[10];var uiValues=viewport.$UIComponent;if(values[8].isStarted()){values[8].finish(viewport.scrollH,viewport.contentWidth-uiValues[10])}if(values[9].isStarted()){values[9].finish(viewport.scrollV,viewport.contentHeight-uiValues[11])}};Scroller.prototype.onRemoveListeners=function(){var stage=this.tempStage||this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,true);stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this);this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this);this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this);var values=this.$Scroller;var viewport=values[10];var uiValues=viewport.$UIComponent;if(values[8].isStarted()){values[8].finish(viewport.scrollH,viewport.contentWidth-uiValues[10])}if(values[9].isStarted()){values[9].finish(viewport.scrollV,viewport.contentHeight-uiValues[11])}};Scroller.prototype.horizontalUpdateHandler=function(scrollPos){var viewport=this.$Scroller[10];if(viewport){viewport.scrollH=scrollPos}this.dispatchEventWith(egret.Event.CHANGE)};Scroller.prototype.verticalUpdateHandler=function(scrollPos){var viewport=this.$Scroller[10];if(viewport){viewport.scrollV=scrollPos}this.dispatchEventWith(egret.Event.CHANGE)};Scroller.prototype.horizontalEndHandler=function(){if(!this.$Scroller[9].isPlaying()){this.onChangeEnd()}};Scroller.prototype.verticalEndHanlder=function(){if(!this.$Scroller[8].isPlaying()){this.onChangeEnd()}};Scroller.prototype.onChangeEnd=function(){var values=this.$Scroller;var horizontalBar=this.horizontalScrollBar;var verticalBar=this.verticalScrollBar;if(horizontalBar&&horizontalBar.visible||verticalBar&&verticalBar.visible){if(!values[2]){values[2]=new egret.Timer(200,1);values[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)}values[2].reset();values[2].start()}eui.UIEvent.dispatchUIEvent(this,eui.UIEvent.CHANGE_END)};Scroller.prototype.onAutoHideTimer=function(event){var horizontalBar=this.horizontalScrollBar;var verticalBar=this.verticalScrollBar;if(horizontalBar&&horizontalBar.autoVisibility){horizontalBar.visible=false}if(verticalBar&&verticalBar.autoVisibility){verticalBar.visible=false}};Scroller.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);var viewport=this.viewport;if(viewport){viewport.setLayoutBoundsSize(unscaledWidth,unscaledHeight);viewport.setLayoutBoundsPosition(0,0)}};Scroller.prototype.partAdded=function(partName,instance){_super.prototype.partAdded.call(this,partName,instance);if(instance==this.horizontalScrollBar){this.horizontalScrollBar.touchChildren=false;this.horizontalScrollBar.touchEnabled=false;this.horizontalScrollBar.viewport=this.viewport;if(this.horizontalScrollBar.autoVisibility){this.horizontalScrollBar.visible=false}}else if(instance==this.verticalScrollBar){this.verticalScrollBar.touchChildren=false;this.verticalScrollBar.touchEnabled=false;this.verticalScrollBar.viewport=this.viewport;if(this.verticalScrollBar.autoVisibility){this.verticalScrollBar.visible=false}}};Scroller.scrollThreshold=5;return Scroller}(eui.Component);eui.Scroller=Scroller;__reflect(Scroller.prototype,"eui.Scroller");eui.registerProperty(Scroller,"viewport","eui.IViewport",true)})(eui||(eui={}));var eui;(function(eui){var Skin=function(_super){__extends(Skin,_super);function Skin(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.maxWidth=1e5;_this.minWidth=0;_this.maxHeight=1e5;_this.minHeight=0;_this.width=NaN;_this.height=NaN;_this.$elementsContent=[];_this._hostComponent=null;_this.$stateValues=new eui.sys.StateValues;_this.$watchers=[];return _this}Object.defineProperty(Skin.prototype,"elementsContent",{set:function(value){this.$elementsContent=value},enumerable:true,configurable:true});Object.defineProperty(Skin.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(value){if(this._hostComponent==value)return;if(this._hostComponent){this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)}this._hostComponent=value;var values=this.$stateValues;values.parent=value;if(value){this.commitCurrentState();if(!this.$stateValues.intialized){if(value.$stage){this.initializeStates(value.$stage)}else{value.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this)}}}eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"hostComponent")},enumerable:true,configurable:true});Skin.prototype.onAddedToStage=function(event){this.initializeStates(this._hostComponent.$stage)};Skin.prototype.unwatchAll=function(){if(this.$watchers&&this.$watchers.length>0){for(var _i=0,_a=this.$watchers;_i<_a.length;_i++){var watcher=_a[_i];watcher.unwatch()}this.$watchers.length=0}};return Skin}(egret.EventDispatcher);eui.Skin=Skin;__reflect(Skin.prototype,"eui.Skin");eui.sys.mixin(Skin,eui.sys.StateClient);eui.registerProperty(Skin,"elementsContent","Array",true);eui.registerProperty(Skin,"states","State[]");eui.registerBindable(Skin.prototype,"hostComponent")})(eui||(eui={}));var eui;(function(eui){var TabBar=function(_super){__extends(TabBar,_super);function TabBar(){var _this=_super.call(this)||this;_this.indexBeingUpdated=false;_this.requireSelection=true;_this.useVirtualLayout=false;return _this}TabBar.prototype.createChildren=function(){if(!this.$layout){var layout=new eui.HorizontalLayout;layout.gap=0;layout.horizontalAlign=eui.JustifyAlign.JUSTIFY;layout.verticalAlign=eui.JustifyAlign.CONTENT_JUSTIFY;this.$setLayout(layout)}_super.prototype.createChildren.call(this)};TabBar.prototype.$setDataProvider=function(value){var dp=this.$dataProvider;if(dp&&dp instanceof eui.ViewStack){dp.removeEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this);this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)}if(value&&value instanceof eui.ViewStack){value.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this);this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)}return _super.prototype.$setDataProvider.call(this,value)};TabBar.prototype.onIndexChanged=function(event){this.indexBeingUpdated=true;this.$dataProvider.selectedIndex=this.selectedIndex;this.indexBeingUpdated=false};TabBar.prototype.onViewStackIndexChange=function(event){if(event.property=="selectedIndex"&&!this.indexBeingUpdated){this.setSelectedIndex(this.$dataProvider.selectedIndex,false)}};return TabBar}(eui.ListBase);eui.TabBar=TabBar;__reflect(TabBar.prototype,"eui.TabBar")})(eui||(eui={}));var eui;(function(eui){var FocusEvent=egret.FocusEvent;var TextInput=function(_super){__extends(TextInput,_super);function TextInput(){var _this=_super.call(this)||this;_this.isFocus=false;_this.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT};return _this}Object.defineProperty(TextInput.prototype,"prompt",{get:function(){if(this.promptDisplay){return this.promptDisplay.text}return this.$TextInput[0]},set:function(value){this.$TextInput[0]=value;if(this.promptDisplay){this.promptDisplay.text=value}this.invalidateProperties();this.invalidateState()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"displayAsPassword",{get:function(){if(this.textDisplay){return this.textDisplay.displayAsPassword}var v=this.$TextInput[1];return v?v:false},set:function(value){this.$TextInput[1]=value;if(this.textDisplay){this.textDisplay.displayAsPassword=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"inputType",{get:function(){if(this.textDisplay){return this.textDisplay.inputType}return this.$TextInput[8]},set:function(value){this.$TextInput[8]=value;if(this.textDisplay){this.textDisplay.inputType=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"textColor",{get:function(){if(this.textDisplay){return this.textDisplay.textColor}return this.$TextInput[2]},set:function(value){this.$TextInput[2]=value;if(this.textDisplay){this.textDisplay.textColor=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"maxChars",{get:function(){if(this.textDisplay){return this.textDisplay.maxChars}var v=this.$TextInput[3];return v?v:0},set:function(value){this.$TextInput[3]=value;if(this.textDisplay){this.textDisplay.maxChars=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"maxWidth",{get:function(){if(this.textDisplay){return this.textDisplay.maxWidth}var v=this.$TextInput[4];return v?v:1e5},set:function(value){this.$TextInput[4]=value;if(this.textDisplay){this.textDisplay.maxWidth=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"maxHeight",{get:function(){if(this.textDisplay){}var v=this.$TextInput[5];return v?v:1e5},set:function(value){this.$TextInput[5]=value;if(this.textDisplay){this.textDisplay.maxHeight=value}this.invalidateProperties()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"text",{get:function(){if(this.textDisplay){return this.textDisplay.text}return this.$TextInput[6]},set:function(value){this.$TextInput[6]=value;if(this.textDisplay){this.textDisplay.text=value}this.invalidateProperties();this.invalidateState()},enumerable:true,configurable:true});Object.defineProperty(TextInput.prototype,"restrict",{get:function(){if(this.textDisplay){return this.textDisplay.restrict}return this.$TextInput[7]},set:function(value){this.$TextInput[7]=value;if(this.textDisplay){this.textDisplay.restrict=value}this.invalidateProperties()},enumerable:true,configurable:true});TextInput.prototype.focusInHandler=function(event){this.isFocus=true;this.invalidateState()};TextInput.prototype.focusOutHandler=function(event){this.isFocus=false;this.invalidateState()};TextInput.prototype.getCurrentState=function(){var skin=this.skin;if(this.prompt&&!this.isFocus&&!this.text){if(this.enabled&&skin.hasState("normalWithPrompt")){return"normalWithPrompt"}else if(!this.enabled&&skin.hasState("disabledWithPrompt")){return"disabledWithPrompt"}}else{if(this.enabled){return"normal"}else{return"disabled"}}};TextInput.prototype.partAdded=function(partName,instance){_super.prototype.partAdded.call(this,partName,instance);var values=this.$TextInput;if(instance==this.textDisplay){this.textDisplayAdded();if(this.textDisplay instanceof eui.EditableText){this.textDisplay.addEventListener(FocusEvent.FOCUS_IN,this.focusInHandler,this);this.textDisplay.addEventListener(FocusEvent.FOCUS_OUT,this.focusOutHandler,this)}}else if(instance==this.promptDisplay){if(values[0]){this.promptDisplay.text=values[0]}}};TextInput.prototype.partRemoved=function(partName,instance){_super.prototype.partRemoved.call(this,partName,instance);if(instance==this.textDisplay){this.textDisplayRemoved();if(this.textDisplay instanceof eui.EditableText){this.textDisplay.removeEventListener(FocusEvent.FOCUS_IN,this.focusInHandler,this);this.textDisplay.removeEventListener(FocusEvent.FOCUS_OUT,this.focusOutHandler,this)}}else if(instance==this.promptDisplay){this.$TextInput[0]=this.promptDisplay.text}};TextInput.prototype.textDisplayAdded=function(){var values=this.$TextInput;if(values[1]){this.textDisplay.displayAsPassword=values[1]}if(values[2]){this.textDisplay.textColor=values[2]}if(values[3]){this.textDisplay.maxChars=values[3]}if(values[4]){this.textDisplay.maxWidth=values[4]}if(values[5]){this.textDisplay.maxHeight=values[5]}if(values[6]){this.textDisplay.text=values[6]}if(values[7]){this.textDisplay.restrict=values[7]}if(values[8]){this.textDisplay.inputType=values[8]}};TextInput.prototype.textDisplayRemoved=function(){var values=this.$TextInput;values[1]=this.textDisplay.displayAsPassword;values[2]=this.textDisplay.textColor;values[3]=this.textDisplay.maxChars;values[4]=this.textDisplay.maxWidth;values[5]=this.textDisplay.maxHeight;values[6]=this.textDisplay.text;values[7]=this.textDisplay.restrict;values[8]=this.textDisplay.inputType};return TextInput}(eui.Component);eui.TextInput=TextInput;__reflect(TextInput.prototype,"eui.TextInput")})(eui||(eui={}));var eui;(function(eui){var CheckBox=function(_super){__extends(CheckBox,_super);function CheckBox(){return _super.call(this)||this}return CheckBox}(eui.ToggleButton);eui.CheckBox=CheckBox;__reflect(CheckBox.prototype,"eui.CheckBox")})(eui||(eui={}));var eui;(function(eui){var ToggleSwitch=function(_super){__extends(ToggleSwitch,_super);function ToggleSwitch(){return _super.call(this)||this}return ToggleSwitch}(eui.ToggleButton);eui.ToggleSwitch=ToggleSwitch;__reflect(ToggleSwitch.prototype,"eui.ToggleSwitch")})(eui||(eui={}));var eui;(function(eui){var UILayer=function(_super){__extends(UILayer,_super);function UILayer(){var _this=_super.call(this)||this;_this.addEventListener(egret.Event.ADDED_TO_STAGE,_this.onAddToStage,_this);_this.addEventListener(egret.Event.REMOVED_FROM_STAGE,_this.onRemoveFromStage,_this);return _this}UILayer.prototype.onAddToStage=function(event){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this);this.onResize()};UILayer.prototype.onRemoveFromStage=function(event){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)};UILayer.prototype.onResize=function(event){var stage=this.$stage;this.$setWidth(stage.$stageWidth);this.$setHeight(stage.$stageHeight)};return UILayer}(eui.Group);eui.UILayer=UILayer;__reflect(UILayer.prototype,"eui.UILayer")})(eui||(eui={}));var eui;(function(eui){var VScrollBar=function(_super){__extends(VScrollBar,_super);function VScrollBar(){return _super!==null&&_super.apply(this,arguments)||this}VScrollBar.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);var thumb=this.thumb;var viewport=this.$viewport;if(!thumb||!viewport){return}var bounds=egret.$TempRectangle;thumb.getPreferredBounds(bounds);var thumbHeight=bounds.height;var thumbX=bounds.x;var vsp=viewport.scrollV;var contentHeight=viewport.contentHeight;var height=viewport.height;if(vsp<=0){var scaleHeight=thumbHeight*(1- -vsp/(height*.5));scaleHeight=Math.max(5,Math.round(scaleHeight));thumb.setLayoutBoundsSize(NaN,scaleHeight);thumb.setLayoutBoundsPosition(thumbX,0)}else if(vsp>=contentHeight-height){var scaleHeight=thumbHeight*(1-(vsp-contentHeight+height)/(height*.5));scaleHeight=Math.max(5,Math.round(scaleHeight));thumb.setLayoutBoundsSize(NaN,scaleHeight);thumb.setLayoutBoundsPosition(thumbX,unscaledHeight-scaleHeight)}else{var thumbY=(unscaledHeight-thumbHeight)*vsp/(contentHeight-height);thumb.setLayoutBoundsSize(NaN,NaN);thumb.setLayoutBoundsPosition(thumbX,thumbY)}};VScrollBar.prototype.onPropertyChanged=function(event){switch(event.property){case"scrollV":case"contentHeight":this.invalidateDisplayList();break}};return VScrollBar}(eui.ScrollBarBase);eui.VScrollBar=VScrollBar;__reflect(VScrollBar.prototype,"eui.VScrollBar")})(eui||(eui={}));var eui;(function(eui){var VSlider=function(_super){__extends(VSlider,_super);function VSlider(){return _super.call(this)||this}VSlider.prototype.pointToValue=function(x,y){if(!this.thumb||!this.track)return 0;var values=this.$Range;var range=values[0]-values[2];var thumbRange=this.getThumbRange();return values[2]+(thumbRange!=0?(thumbRange-y)/thumbRange*range:0)};VSlider.prototype.getThumbRange=function(){var bounds=egret.$TempRectangle;this.track.getLayoutBounds(bounds);var thumbRange=bounds.height;this.thumb.getLayoutBounds(bounds);return thumbRange-bounds.height};VSlider.prototype.updateSkinDisplayList=function(){if(!this.thumb||!this.track)return;var values=this.$Range;var thumbRange=this.getThumbRange();var range=values[0]-values[2];var thumbPosTrackY=range>0?thumbRange-(this.pendingValue-values[2])/range*thumbRange:0;var thumbPos=this.track.localToGlobal(0,thumbPosTrackY,egret.$TempPoint);var thumbPosX=thumbPos.x;var thumbPosY=thumbPos.y;var thumbPosParentY=this.thumb.$parent.globalToLocal(thumbPosX,thumbPosY,egret.$TempPoint).y;var bounds=egret.$TempRectangle;var thumbHeight=bounds.height;this.thumb.getLayoutBounds(bounds);this.thumb.setLayoutBoundsPosition(bounds.x,Math.round(thumbPosParentY));if(this.trackHighlight){var trackHighlightY=this.trackHighlight.$parent.globalToLocal(thumbPosX,thumbPosY,egret.$TempPoint).y;this.trackHighlight.y=Math.round(trackHighlightY+thumbHeight);this.trackHighlight.height=Math.round(thumbRange-trackHighlightY)}};return VSlider}(eui.SliderBase);eui.VSlider=VSlider;__reflect(VSlider.prototype,"eui.VSlider")})(eui||(eui={}));var eui;(function(eui){var ViewStack=function(_super){__extends(ViewStack,_super);function ViewStack(){var _this=_super.call(this)||this;_this._selectedChild=null;_this.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION;_this._selectedIndex=-1;return _this}Object.defineProperty(ViewStack.prototype,"layout",{get:function(){return this.$layout},enumerable:true,configurable:true});Object.defineProperty(ViewStack.prototype,"selectedChild",{get:function(){var index=this.selectedIndex;if(index>=0&&index<this.numChildren)return this.getChildAt(index);return null},set:function(value){var index=this.getChildIndex(value);if(index>=0&&index<this.numChildren)this.setSelectedIndex(index)},enumerable:true,configurable:true});Object.defineProperty(ViewStack.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=eui.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(value){value=+value|0;this.setSelectedIndex(value)},enumerable:true,configurable:true});ViewStack.prototype.setSelectedIndex=function(value){if(value==this.selectedIndex){return}this.proposedSelectedIndex=value;this.invalidateProperties();eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"selectedIndex")};ViewStack.prototype.$childAdded=function(child,index){_super.prototype.$childAdded.call(this,child,index);this.showOrHide(child,false);var selectedIndex=this.selectedIndex;if(selectedIndex==-1){this.setSelectedIndex(index)}else if(index<=this.selectedIndex&&this.$stage){this.setSelectedIndex(selectedIndex+1)}eui.CollectionEvent.dispatchCollectionEvent(this,eui.CollectionEvent.COLLECTION_CHANGE,eui.CollectionEventKind.ADD,index,-1,[child.name])};ViewStack.prototype.$childRemoved=function(child,index){_super.prototype.$childRemoved.call(this,child,index);this.showOrHide(child,true);var selectedIndex=this.selectedIndex;if(index==selectedIndex){if(this.numChildren>0){if(index==0){this.proposedSelectedIndex=0;this.invalidateProperties()}else this.setSelectedIndex(0)}else this.setSelectedIndex(-1)}else if(index<selectedIndex){this.setSelectedIndex(selectedIndex-1)}eui.CollectionEvent.dispatchCollectionEvent(this,eui.CollectionEvent.COLLECTION_CHANGE,eui.CollectionEventKind.REMOVE,index,-1,[child.name])};ViewStack.prototype.commitProperties=function(){_super.prototype.commitProperties.call(this);if(this.proposedSelectedIndex!=eui.ListBase.NO_PROPOSED_SELECTION){this.commitSelection(this.proposedSelectedIndex);this.proposedSelectedIndex=eui.ListBase.NO_PROPOSED_SELECTION}};ViewStack.prototype.commitSelection=function(newIndex){if(newIndex>=0&&newIndex<this.numChildren){this._selectedIndex=newIndex;if(this._selectedChild){this.showOrHide(this._selectedChild,false)}this._selectedChild=this.getElementAt(this._selectedIndex);this.showOrHide(this._selectedChild,true)}else{this._selectedChild=null;this._selectedIndex=-1}this.invalidateSize();this.invalidateDisplayList()};ViewStack.prototype.showOrHide=function(child,visible){if(egret.is(child,"eui.UIComponent")){child.includeInLayout=visible}child.visible=visible};Object.defineProperty(ViewStack.prototype,"length",{get:function(){return this.$children.length},enumerable:true,configurable:true});ViewStack.prototype.getItemAt=function(index){var element=this.$children[index];return element?element.name:""};ViewStack.prototype.getItemIndex=function(item){var list=this.$children;var length=list.length;for(var i=0;i<length;i++){if(list[i].name==item){return i}}return-1};return ViewStack}(eui.Group);eui.ViewStack=ViewStack;__reflect(ViewStack.prototype,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]);eui.registerBindable(ViewStack.prototype,"selectedIndex")})(eui||(eui={}));var eui;(function(eui){var sys;(function(sys){function sineInOut(fraction){return-.5*(Math.cos(Math.PI*fraction)-1)}var Animation=function(){function Animation(updateFunction,thisObject){this.easerFunction=sineInOut;this.isPlaying=false;this.duration=500;this.currentValue=0;this.from=0;this.to=0;this.startTime=0;this.endFunction=null;this.updateFunction=updateFunction;this.thisObject=thisObject}Animation.prototype.play=function(){this.stop();this.start()};Animation.prototype.start=function(){this.isPlaying=false;this.currentValue=0;this.startTime=egret.getTimer();this.doInterval(this.startTime);egret.startTick(this.doInterval,this)};Animation.prototype.stop=function(){this.isPlaying=false;this.startTime=0;egret.stopTick(this.doInterval,this)};Animation.prototype.doInterval=function(currentTime){var runningTime=currentTime-this.startTime;if(!this.isPlaying){this.isPlaying=true}var duration=this.duration;var fraction=duration==0?1:Math.min(runningTime,duration)/duration;if(this.easerFunction){fraction=this.easerFunction(fraction)}this.currentValue=this.from+(this.to-this.from)*fraction;if(this.updateFunction)this.updateFunction.call(this.thisObject,this);var isEnded=runningTime>=duration;if(isEnded){this.stop()}if(isEnded&&this.endFunction){this.endFunction.call(this.thisObject,this)}return true};return Animation}();sys.Animation=Animation;__reflect(Animation.prototype,"eui.sys.Animation")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var DefaultThemeAdapter=function(){function DefaultThemeAdapter(){}DefaultThemeAdapter.prototype.getTheme=function(url,compFunc,errorFunc,thisObject){function onGet(event){var loader=event.target;compFunc.call(thisObject,loader.response)}function onError(event){errorFunc.call(thisObject)}var loader=new egret.HttpRequest;loader.addEventListener(egret.Event.COMPLETE,onGet,thisObject);loader.addEventListener(egret.IOErrorEvent.IO_ERROR,onError,thisObject);loader.responseType=egret.HttpResponseType.TEXT;loader.open(url);loader.send()};return DefaultThemeAdapter}();eui.DefaultThemeAdapter=DefaultThemeAdapter;__reflect(DefaultThemeAdapter.prototype,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])})(eui||(eui={}));var eui;(function(eui){var listeners="__listeners__";var bindables="__bindables__";var bindableCount=0;function getPropertyDescriptor(host,property){var data=Object.getOwnPropertyDescriptor(host,property);if(data){return data}var prototype=Object.getPrototypeOf(host);if(prototype){return getPropertyDescriptor(prototype,property)}return null}function notifyListener(host,property){var list=host[listeners];var length=list.length;for(var i=0;i<length;i+=2){var listener=list[i];var target=list[i+1];listener.call(target,property)}}var Watcher=function(){function Watcher(property,handler,thisObject,next){this.isExecuting=false;this.property=property;this.handler=handler;this.next=next;this.thisObject=thisObject}Watcher.watch=function(host,chain,handler,thisObject){if(true){if(!chain){egret.$error(1003,"chain")}}if(chain.length>0){var property=chain.shift();var next=Watcher.watch(null,chain,handler,thisObject);var watcher=new Watcher(property,handler,thisObject,next);watcher.reset(host);return watcher}else{return null}};Watcher.checkBindable=function(host,property){var list=host[bindables];if(list&&list.indexOf(property)!=-1){return true}var isEventDispatcher=egret.is(host,"egret.IEventDispatcher");if(!isEventDispatcher&&!host[listeners]){host[listeners]=[]}var data=getPropertyDescriptor(host,property);if(data&&data.set&&data.get){var orgSet_1=data.set;data.set=function(value){if(this[property]!=value){orgSet_1.call(this,value);if(isEventDispatcher){eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,property)}else{notifyListener(this,property)}}}}else if(!data||!data.get&&!data.set){bindableCount++;var newProp_1="_"+bindableCount+property;host[newProp_1]=data?data.value:null;data={enumerable:true,configurable:true};data.get=function(){return this[newProp_1]};data.set=function(value){if(this[newProp_1]!=value){this[newProp_1]=value;if(isEventDispatcher){eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,property)}else{notifyListener(this,property)}}}}else{return false}Object.defineProperty(host,property,data);eui.registerBindable(host,property)};Watcher.prototype.unwatch=function(){this.reset(null);this.handler=null;if(this.next){this.next.handler=null}};Watcher.prototype.getValue=function(){if(this.next){return this.next.getValue()}return this.getHostPropertyValue()};Watcher.prototype.setHandler=function(handler,thisObject){this.handler=handler;this.thisObject=thisObject;if(this.next){this.next.setHandler(handler,thisObject)}};Watcher.prototype.reset=function(newHost){var oldHost=this.host;if(oldHost){if(egret.is(oldHost,"egret.IEventDispatcher")){oldHost.removeEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this)}else{var list=oldHost[listeners];var index=list.indexOf(this);list.splice(index-1,2)}}this.host=newHost;if(newHost){Watcher.checkBindable(newHost,this.property);if(egret.is(newHost,"egret.IEventDispatcher")){newHost.addEventListener(eui.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,false,100)}else{var list=newHost[listeners];list.push(this.onPropertyChange);list.push(this)}}if(this.next)this.next.reset(this.getHostPropertyValue())};Watcher.prototype.getHostPropertyValue=function(){return this.host?this.host[this.property]:null};Watcher.prototype.wrapHandler=function(event){this.onPropertyChange(event.property)};Watcher.prototype.onPropertyChange=function(property){if(property==this.property&&!this.isExecuting){try{this.isExecuting=true;if(this.next)this.next.reset(this.getHostPropertyValue());this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=false}}};return Watcher}();eui.Watcher=Watcher;__reflect(Watcher.prototype,"eui.Watcher")})(eui||(eui={}));var eui;(function(eui){function joinValues(templates){var first=templates[0];var value=first instanceof eui.Watcher?first.getValue():first;var length=templates.length;for(var i=1;i<length;i++){var item=templates[i];if(item instanceof eui.Watcher){item=item.getValue()}value+=item}return value}var Binding=function(){function Binding(){}Binding.bindProperty=function(host,chain,target,prop){var watcher=eui.Watcher.watch(host,chain,null,null);if(watcher){var assign=function(value){target[prop]=value};watcher.setHandler(assign,null);assign(watcher.getValue());if(egret.is(host,"eui.Skin")){var skin=host;if(!skin.$watchers){skin.$watchers=[]}skin.$watchers.push(watcher)}}return watcher};Binding.bindHandler=function(host,chain,handler,thisObject){var watcher=eui.Watcher.watch(host,chain,handler,thisObject);if(watcher){handler.call(thisObject,watcher.getValue())}return watcher};Binding.$bindProperties=function(host,templates,chainIndex,target,prop){if(templates.length==1&&chainIndex.length==1){return Binding.bindProperty(host,templates[0].split("."),target,prop)}var assign=function(){target[prop]=joinValues(templates)};var length=chainIndex.length;var watcher;for(var i=0;i<length;i++){var index=chainIndex[i];var element=templates[index];if(typeof element=="string"){var chain=element.split(".");watcher=eui.Watcher.watch(host,chain,null,null)}else if(element instanceof eui.Watcher){watcher=element;watcher.reset(host)}if(watcher){templates[index]=watcher;watcher.setHandler(assign,null);if(egret.is(host,"eui.Skin")){var skin=host;if(!skin.$watchers){skin.$watchers=[]}skin.$watchers.push(watcher)}}}assign();return watcher};return Binding}();eui.Binding=Binding;__reflect(Binding.prototype,"eui.Binding")})(eui||(eui={}));var eui;(function(eui){var ArrayCollection=function(_super){__extends(ArrayCollection,_super);function ArrayCollection(source){var _this=_super.call(this)||this;if(source){_this._source=source}else{_this._source=[]}return _this}Object.defineProperty(ArrayCollection.prototype,"source",{get:function(){return this._source},set:function(value){if(!value)value=[];this._source=value;this.dispatchCoEvent(eui.CollectionEventKind.RESET)},enumerable:true,configurable:true});ArrayCollection.prototype.refresh=function(){this.dispatchCoEvent(eui.CollectionEventKind.REFRESH)};Object.defineProperty(ArrayCollection.prototype,"length",{get:function(){return this._source.length},enumerable:true,configurable:true});ArrayCollection.prototype.addItem=function(item){this._source.push(item);this.dispatchCoEvent(eui.CollectionEventKind.ADD,this._source.length-1,-1,[item])};ArrayCollection.prototype.addItemAt=function(item,index){if(index<0||index>this._source.length){true&&egret.$error(1007)}this._source.splice(index,0,item);this.dispatchCoEvent(eui.CollectionEventKind.ADD,index,-1,[item])};ArrayCollection.prototype.getItemAt=function(index){return this._source[index]};ArrayCollection.prototype.getItemIndex=function(item){var length=this._source.length;for(var i=0;i<length;i++){if(this._source[i]===item){return i}}return-1};ArrayCollection.prototype.itemUpdated=function(item){var index=this.getItemIndex(item);if(index!=-1){this.dispatchCoEvent(eui.CollectionEventKind.UPDATE,index,-1,[item])}};ArrayCollection.prototype.removeAll=function(){var items=this._source.concat();this._source=[];this.dispatchCoEvent(eui.CollectionEventKind.REMOVE,0,-1,items)};ArrayCollection.prototype.removeItemAt=function(index){if(index<0||index>=this._source.length){true&&egret.$error(1007);return}var item=this._source.splice(index,1)[0];this.dispatchCoEvent(eui.CollectionEventKind.REMOVE,index,-1,[item]);return item};ArrayCollection.prototype.replaceItemAt=function(item,index){if(index<0||index>=this._source.length){true&&egret.$error(1007);return}var oldItem=this._source.splice(index,1,item)[0];this.dispatchCoEvent(eui.CollectionEventKind.REPLACE,index,-1,[item],[oldItem]);return oldItem};ArrayCollection.prototype.replaceAll=function(newSource){if(!newSource)newSource=[];var newLength=newSource.length;var oldLength=this._source.length;for(var i=newLength;i<oldLength;i++){this.removeItemAt(newLength)}for(var i=0;i<newLength;i++){if(i>=oldLength)this.addItemAt(newSource[i],i);else this.replaceItemAt(newSource[i],i)}this._source=newSource};ArrayCollection.prototype.dispatchCoEvent=function(kind,location,oldLocation,items,oldItems){eui.CollectionEvent.dispatchCollectionEvent(this,eui.CollectionEvent.COLLECTION_CHANGE,kind,location,oldLocation,items,oldItems)};return ArrayCollection}(egret.EventDispatcher);eui.ArrayCollection=ArrayCollection;__reflect(ArrayCollection.prototype,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]);eui.registerProperty(ArrayCollection,"source","Array",true)})(eui||(eui={}));var eui;(function(eui){var UIImpl=eui.sys.UIComponentImpl;var EditableText=function(_super){__extends(EditableText,_super);function EditableText(){var _this=_super.call(this)||this;_this._widthConstraint=NaN;_this.$isShowPrompt=false;_this.$promptColor=6710886;_this.$isFocusIn=false;_this.$isTouchCancle=false;_this.initializeUIValues();_this.type=egret.TextFieldType.INPUT;_this.$EditableText={0:null,1:16777215,2:false};return _this}EditableText.prototype.$invalidateTextField=function(){_super.prototype.$invalidateTextField.call(this);this.invalidateSize()};EditableText.prototype.$setWidth=function(value){var result1=_super.prototype.$setWidth.call(this,value);var result2=UIImpl.prototype.$setWidth.call(this,value);return result1&&result2};EditableText.prototype.$setHeight=function(value){var result1=_super.prototype.$setHeight.call(this,value);var result2=UIImpl.prototype.$setHeight.call(this,value);return result1&&result2};EditableText.prototype.$getText=function(){var value=_super.prototype.$getText.call(this);if(value==this.$EditableText[0]){value=""}return value};EditableText.prototype.$setText=function(value){var promptText=this.$EditableText[0];if(promptText!=value||promptText==null){this.$isShowPrompt=false;this.textColor=this.$EditableText[1];this.displayAsPassword=this.$EditableText[2]}if(!this.$isFocusIn){if(value==""||value==null){value=promptText;this.$isShowPrompt=true;_super.prototype.$setTextColor.call(this,this.$promptColor);_super.prototype.$setDisplayAsPassword.call(this,false)}}var result=_super.prototype.$setText.call(this,value);eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"text");return result};EditableText.prototype.$onAddToStage=function(stage,nestLevel){eui.sys.UIComponentImpl.prototype["$onAddToStage"].call(this,stage,nestLevel);this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this);this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this);this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this);this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this)};EditableText.prototype.$onRemoveFromStage=function(){_super.prototype.$onRemoveFromStage.call(this);this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this);this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this);this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this);this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this)};Object.defineProperty(EditableText.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(value){var values=this.$EditableText;var promptText=values[0];if(promptText==value)return;values[0]=value;var text=this.text;if(!text||text==promptText){this.showPromptText()}},enumerable:true,configurable:true});Object.defineProperty(EditableText.prototype,"promptColor",{get:function(){return this.$promptColor},set:function(value){value=+value|0;if(this.$promptColor!=value){this.$promptColor=value;var text=this.text;if(!text||text==this.$EditableText[0]){this.showPromptText()}}},enumerable:true,configurable:true});EditableText.prototype.onfocusOut=function(){this.$isFocusIn=false;if(!this.text){this.showPromptText()}};EditableText.prototype.onTouchBegin=function(){this.$isTouchCancle=false};EditableText.prototype.onTouchCancle=function(){this.$isTouchCancle=true};EditableText.prototype.onfocusIn=function(){if(!egret.Capabilities.isMobile&&this.$isTouchCancle){this.inputUtils.stageText.$hide();return}this.$isFocusIn=true;this.$isShowPrompt=false;this.displayAsPassword=this.$EditableText[2];var values=this.$EditableText;var text=this.text;if(!text||text==values[0]){this.textColor=values[1];this.text=""}};EditableText.prototype.showPromptText=function(){var values=this.$EditableText;this.$isShowPrompt=true;_super.prototype.$setTextColor.call(this,this.$promptColor);_super.prototype.$setDisplayAsPassword.call(this,false);this.text=values[0]};EditableText.prototype.$setTextColor=function(value){value=+value|0;this.$EditableText[1]=value;if(!this.$isShowPrompt){_super.prototype.$setTextColor.call(this,value)}return true};EditableText.prototype.$setDisplayAsPassword=function(value){this.$EditableText[2]=value;if(!this.$isShowPrompt){_super.prototype.$setDisplayAsPassword.call(this,value)}return true};EditableText.prototype.createChildren=function(){this.onfocusOut()};EditableText.prototype.childrenCreated=function(){};EditableText.prototype.commitProperties=function(){};EditableText.prototype.measure=function(){var values=this.$UIComponent;var textValues=this.$TextField;var oldWidth=textValues[3];var availableWidth=NaN;if(!isNaN(this._widthConstraint)){availableWidth=this._widthConstraint;this._widthConstraint=NaN}else if(!isNaN(values[8])){availableWidth=values[8]}else if(values[13]!=1e5){availableWidth=values[13]}_super.prototype.$setWidth.call(this,availableWidth);this.setMeasuredSize(this.textWidth,this.textHeight);_super.prototype.$setWidth.call(this,oldWidth)};EditableText.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.$setWidth.call(this,unscaledWidth);_super.prototype.$setHeight.call(this,unscaledHeight)};EditableText.prototype.invalidateParentLayout=function(){};EditableText.prototype.setMeasuredSize=function(width,height){};EditableText.prototype.invalidateProperties=function(){};EditableText.prototype.validateProperties=function(){};EditableText.prototype.invalidateSize=function(){};EditableText.prototype.validateSize=function(recursive){};EditableText.prototype.invalidateDisplayList=function(){};EditableText.prototype.validateDisplayList=function(){};EditableText.prototype.validateNow=function(){};EditableText.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){UIImpl.prototype.setLayoutBoundsSize.call(this,layoutWidth,layoutHeight);if(isNaN(layoutWidth)||layoutWidth===this._widthConstraint||layoutWidth==0){return}var values=this.$UIComponent;if(!isNaN(values[9])){return}if(layoutWidth==values[16]){return}this._widthConstraint=layoutWidth;this.invalidateSize()};EditableText.prototype.setLayoutBoundsPosition=function(x,y){};EditableText.prototype.getLayoutBounds=function(bounds){};EditableText.prototype.getPreferredBounds=function(bounds){};return EditableText}(egret.TextField);eui.EditableText=EditableText;__reflect(EditableText.prototype,"eui.EditableText",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]);eui.sys.implementUIComponent(EditableText,egret.TextField);eui.registerBindable(EditableText.prototype,"text")})(eui||(eui={}));var eui;(function(eui){var sys;(function(sys){var MAX_VELOCITY_COUNT=4;var VELOCITY_WEIGHTS=[1,1.33,1.66,2];var CURRENT_VELOCITY_WEIGHT=2.33;var MINIMUM_VELOCITY=.02;var FRICTION=.998;var EXTRA_FRICTION=.95;var FRICTION_LOG=Math.log(FRICTION);function easeOut(ratio){var invRatio=ratio-1;return invRatio*invRatio*invRatio+1}var TouchScroll=function(){function TouchScroll(updateFunction,endFunction,target){this.$scrollFactor=1;this.previousTime=0;this.velocity=0;this.previousVelocity=[];this.currentPosition=0;this.previousPosition=0;this.currentScrollPos=0;this.maxScrollPos=0;this.offsetPoint=0;this.$bounces=true;this.started=true;if(true&&!updateFunction){egret.$error(1003,"updateFunction")}this.updateFunction=updateFunction;this.endFunction=endFunction;this.target=target;this.animation=new sys.Animation(this.onScrollingUpdate,this);this.animation.endFunction=this.finishScrolling;this.animation.easerFunction=easeOut}TouchScroll.prototype.isPlaying=function(){return this.animation.isPlaying};TouchScroll.prototype.stop=function(){this.animation.stop();egret.stopTick(this.onTick,this);this.started=false};TouchScroll.prototype.isStarted=function(){return this.started};TouchScroll.prototype.start=function(touchPoint){this.started=true;this.velocity=0;this.previousVelocity.length=0;this.previousTime=egret.getTimer();this.previousPosition=this.currentPosition=touchPoint;this.offsetPoint=touchPoint;egret.startTick(this.onTick,this)};TouchScroll.prototype.update=function(touchPoint,maxScrollValue,scrollValue){maxScrollValue=Math.max(maxScrollValue,0);this.currentPosition=touchPoint;this.maxScrollPos=maxScrollValue;var disMove=this.offsetPoint-touchPoint;var scrollPos=disMove+scrollValue;this.offsetPoint=touchPoint;if(scrollPos<0){if(!this.$bounces){scrollPos=0}else{scrollPos-=disMove*.5}}if(scrollPos>maxScrollValue){if(!this.$bounces){scrollPos=maxScrollValue}else{scrollPos-=disMove*.5}}this.currentScrollPos=scrollPos;this.updateFunction.call(this.target,scrollPos)};TouchScroll.prototype.finish=function(currentScrollPos,maxScrollPos){egret.stopTick(this.onTick,this);this.started=false;var sum=this.velocity*CURRENT_VELOCITY_WEIGHT;var previousVelocityX=this.previousVelocity;var length=previousVelocityX.length;var totalWeight=CURRENT_VELOCITY_WEIGHT;for(var i=0;i<length;i++){var weight=VELOCITY_WEIGHTS[i];sum+=previousVelocityX[0]*weight;totalWeight+=weight}var pixelsPerMS=sum/totalWeight;var absPixelsPerMS=Math.abs(pixelsPerMS);var duration=0;var posTo=0;if(absPixelsPerMS>MINIMUM_VELOCITY){posTo=currentScrollPos+(pixelsPerMS-MINIMUM_VELOCITY)/FRICTION_LOG*2*this.$scrollFactor;if(posTo<0||posTo>maxScrollPos){posTo=currentScrollPos;while(Math.abs(pixelsPerMS)>MINIMUM_VELOCITY){posTo-=pixelsPerMS;if(posTo<0||posTo>maxScrollPos){pixelsPerMS*=FRICTION*EXTRA_FRICTION}else{pixelsPerMS*=FRICTION}duration++}}else{duration=Math.log(MINIMUM_VELOCITY/absPixelsPerMS)/FRICTION_LOG}}else{posTo=currentScrollPos}if(this.target["$getThrowInfo"]){var event_1=this.target["$getThrowInfo"](currentScrollPos,posTo);posTo=event_1.toPos}if(duration>0){if(!this.$bounces){if(posTo<0){posTo=0}else if(posTo>maxScrollPos){posTo=maxScrollPos}}this.throwTo(posTo,duration)}else{this.finishScrolling()}};TouchScroll.prototype.onTick=function(timeStamp){var timeOffset=timeStamp-this.previousTime;if(timeOffset>10){var previousVelocity=this.previousVelocity;if(previousVelocity.length>=MAX_VELOCITY_COUNT){previousVelocity.shift()}this.velocity=(this.currentPosition-this.previousPosition)/timeOffset;previousVelocity.push(this.velocity);this.previousTime=timeStamp;this.previousPosition=this.currentPosition}return true};TouchScroll.prototype.finishScrolling=function(animation){var hsp=this.currentScrollPos;var maxHsp=this.maxScrollPos;var hspTo=hsp;if(hsp<0){hspTo=0}if(hsp>maxHsp){hspTo=maxHsp}this.throwTo(hspTo,300)};TouchScroll.prototype.throwTo=function(hspTo,duration){if(duration===void 0){duration=500}var hsp=this.currentScrollPos;if(hsp==hspTo){this.endFunction.call(this.target);return}var animation=this.animation;animation.duration=duration;animation.from=hsp;animation.to=hspTo;animation.play()};TouchScroll.prototype.onScrollingUpdate=function(animation){this.currentScrollPos=animation.currentValue;this.updateFunction.call(this.target,animation.currentValue)};return TouchScroll}();sys.TouchScroll=TouchScroll;__reflect(TouchScroll.prototype,"eui.sys.TouchScroll")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var Direction=function(){function Direction(){}Direction.LTR="ltr";Direction.RTL="rtl";Direction.TTB="ttb";Direction.BTT="btt";return Direction}();eui.Direction=Direction;__reflect(Direction.prototype,"eui.Direction")})(eui||(eui={}));var eui;(function(eui){var ScrollPolicy=function(){function ScrollPolicy(){}ScrollPolicy.AUTO="auto";ScrollPolicy.OFF="off";ScrollPolicy.ON="on";return ScrollPolicy}();eui.ScrollPolicy=ScrollPolicy;__reflect(ScrollPolicy.prototype,"eui.ScrollPolicy")})(eui||(eui={}));var eui;(function(eui){var Theme=function(_super){__extends(Theme,_super);function Theme(configURL,stage){var _this=_super.call(this)||this;_this.delayList=[];_this.skinMap={};_this.$styles={};_this.initialized=!configURL;if(stage){egret.registerImplementation("eui.Theme",_this)}_this.$configURL=configURL;_this.load(configURL);return _this}Theme.prototype.load=function(url){var _this=this;eui.getTheme(url,function(data){return _this.onConfigLoaded(data)})};Theme.prototype.onConfigLoaded=function(str){var data;if(typeof str=="string"){try{data=JSON.parse(str)}catch(e){egret.$error(3e3)}}else{data=str}if(data&&data.skins){var skinMap=this.skinMap;var skins=data.skins;var keys=Object.keys(skins);var length_27=keys.length;for(var i=0;i<length_27;i++){var key=keys[i];if(!skinMap[key]){this.mapSkin(key,skins[key])}}}if(data.styles){this.$styles=data.styles}var paths=data.paths;for(var path in paths){EXML.update(path,paths[path])}if(!data.exmls||data.exmls.length==0){this.onLoaded()}else if(data.exmls[0]["gjs"]){data.exmls.forEach(function(exml){return EXML.$parseURLContentAsJs(exml.path,exml.gjs,exml.className)});this.onLoaded()}else if(data.exmls[0]["content"]){data.exmls.forEach(function(exml){return EXML.$parseURLContent(exml.path,exml.content)});this.onLoaded()}else{EXML.$loadAll(data.exmls,this.onLoaded,this,true)}};Theme.prototype.onLoaded=function(classes,urls){this.initialized=true;this.handleDelayList();this.dispatchEventWith(egret.Event.COMPLETE)};Theme.prototype.handleDelayList=function(){var list=this.delayList;var length=list.length;for(var i=0;i<length;i++){var client=list[i];if(!client.$Component[5]){var skinName=this.getSkinName(client);if(skinName){client.$Component[1]=skinName;client.$parseSkinName()}}}list.length=0};Theme.prototype.getSkinName=function(client){if(!this.initialized){if(this.delayList.indexOf(client)==-1){this.delayList.push(client)}return""}var skinMap=this.skinMap;var skinName=skinMap[client.hostComponentKey];if(!skinName){skinName=this.findSkinName(client)}return skinName};Theme.prototype.findSkinName=function(prototype){if(!prototype){return""}var key=prototype["__class__"];if(key===void 0){return""}var skinName=this.skinMap[key];if(skinName||key=="eui.Component"){return skinName}return this.findSkinName(Object.getPrototypeOf(prototype))};Theme.prototype.mapSkin=function(hostComponentKey,skinName){if(true){if(!hostComponentKey){egret.$error(1003,"hostComponentKey")}if(!skinName){egret.$error(1003,"skinName")}}this.skinMap[hostComponentKey]=skinName};Theme.prototype.$getStyleConfig=function(style){return this.$styles[style]};return Theme}(egret.EventDispatcher);eui.Theme=Theme;__reflect(Theme.prototype,"eui.Theme")})(eui||(eui={}));var eui;(function(eui){var CollectionEvent=function(_super){__extends(CollectionEvent,_super);function CollectionEvent(type,bubbles,cancelable,kind,location,oldLocation,items,oldItems){var _this=_super.call(this,type,bubbles,cancelable)||this;_this.$initTo(kind,location,oldLocation,items,oldItems);return _this}CollectionEvent.prototype.$initTo=function(kind,location,oldLocation,items,oldItems){this.kind=kind;this.location=+location|0;this.oldLocation=+oldLocation|0;this.items=items||[];this.oldItems=oldItems||[]};CollectionEvent.prototype.clean=function(){_super.prototype.clean.call(this);this.items=this.oldItems=null};CollectionEvent.dispatchCollectionEvent=function(target,eventType,kind,location,oldLocation,items,oldItems){if(!target.hasEventListener(eventType)){return true}var event=egret.Event.create(CollectionEvent,eventType);event.$initTo(kind,location,oldLocation,items,oldItems);var result=target.dispatchEvent(event);egret.Event.release(event);return result};CollectionEvent.COLLECTION_CHANGE="collectionChange";return CollectionEvent}(egret.Event);eui.CollectionEvent=CollectionEvent;__reflect(CollectionEvent.prototype,"eui.CollectionEvent")})(eui||(eui={}));var eui;(function(eui){var CollectionEventKind=function(){function CollectionEventKind(){}CollectionEventKind.ADD="add";CollectionEventKind.REFRESH="refresh";CollectionEventKind.REMOVE="remove";CollectionEventKind.REPLACE="replace";CollectionEventKind.RESET="reset";CollectionEventKind.UPDATE="update";return CollectionEventKind}();eui.CollectionEventKind=CollectionEventKind;__reflect(CollectionEventKind.prototype,"eui.CollectionEventKind")})(eui||(eui={}));var eui;(function(eui){var ItemTapEvent=function(_super){__extends(ItemTapEvent,_super);function ItemTapEvent(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.item=null;_this.itemRenderer=null;_this.itemIndex=-1;return _this}ItemTapEvent.prototype.clean=function(){_super.prototype.clean.call(this);this.item=this.itemRenderer=null};ItemTapEvent.dispatchItemTapEvent=function(target,eventType,itemRenderer){if(!target.hasEventListener(eventType)){return true}var event=egret.Event.create(ItemTapEvent,eventType);event.item=itemRenderer.data;event.itemIndex=itemRenderer.itemIndex;event.itemRenderer=itemRenderer;var result=target.dispatchEvent(event);egret.Event.release(event);return result};ItemTapEvent.ITEM_TAP="itemTap";return ItemTapEvent}(egret.Event);eui.ItemTapEvent=ItemTapEvent;__reflect(ItemTapEvent.prototype,"eui.ItemTapEvent")})(eui||(eui={}));var eui;(function(eui){var PropertyEvent=function(_super){__extends(PropertyEvent,_super);function PropertyEvent(type,bubbles,cancelable,property){var _this=_super.call(this,type,bubbles,cancelable)||this;_this.property=property;return _this}PropertyEvent.dispatchPropertyEvent=function(target,eventType,property){if(!target.hasEventListener(eventType)){return true}var event=egret.Event.create(PropertyEvent,eventType);event.property=property;var result=target.dispatchEvent(event);egret.Event.release(event);return result};PropertyEvent.PROPERTY_CHANGE="propertyChange";return PropertyEvent}(egret.Event);eui.PropertyEvent=PropertyEvent;__reflect(PropertyEvent.prototype,"eui.PropertyEvent")})(eui||(eui={}));var eui;(function(eui){var ScrollerThrowEvent=function(_super){__extends(ScrollerThrowEvent,_super);function ScrollerThrowEvent(type,bubbles,cancelable,currentPos,toPos){var _this=_super.call(this,type,bubbles,cancelable)||this;currentPos=+currentPos;toPos=+toPos;_this.currentPos=currentPos;_this.toPos=toPos;return _this}ScrollerThrowEvent.THROW="throw";return ScrollerThrowEvent}(egret.Event);eui.ScrollerThrowEvent=ScrollerThrowEvent;__reflect(ScrollerThrowEvent.prototype,"eui.ScrollerThrowEvent")})(eui||(eui={}));var eui;(function(eui){var UIEvent=function(_super){__extends(UIEvent,_super);function UIEvent(type,bubbles,cancelable){return _super.call(this,type,bubbles,cancelable)||this}UIEvent.dispatchUIEvent=function(target,eventType,bubbles,cancelable){if(!target.hasEventListener(eventType)){return true}var event=egret.Event.create(UIEvent,eventType,bubbles,cancelable);var result=target.dispatchEvent(event);egret.Event.release(event);return result};UIEvent.CREATION_COMPLETE="creationComplete";UIEvent.CHANGE_END="changeEnd";UIEvent.CHANGE_START="changeStart";UIEvent.CLOSING="closing";UIEvent.MOVE="move";return UIEvent}(egret.Event);eui.UIEvent=UIEvent;__reflect(UIEvent.prototype,"eui.UIEvent")})(eui||(eui={}));var eui;(function(eui){var sys;(function(sys){var STATE="eui.State";var ADD_ITEMS="eui.AddItems";var SET_PROPERTY="eui.SetProperty";var SET_STATEPROPERTY="eui.SetStateProperty";var BINDING_PROPERTIES="eui.Binding.$bindProperties";var CodeBase=function(){function CodeBase(){this.indent=0}CodeBase.prototype.toCode=function(){return""};CodeBase.prototype.getIndent=function(indent){if(indent===void 0)indent=this.indent;var str="";for(var i=0;i<indent;i++){str+="\t"}return str};return CodeBase}();sys.CodeBase=CodeBase;__reflect(CodeBase.prototype,"eui.sys.CodeBase");var EXClass=function(_super){__extends(EXClass,_super);function EXClass(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.className="";_this.superClass="";_this.innerClassBlock=[];_this.variableBlock=[];_this.functionBlock=[];return _this}EXClass.prototype.addInnerClass=function(clazz){if(this.innerClassBlock.indexOf(clazz)==-1){this.innerClassBlock.push(clazz)}};EXClass.prototype.addVariable=function(variableItem){if(this.variableBlock.indexOf(variableItem)==-1){this.variableBlock.push(variableItem)}};EXClass.prototype.getVariableByName=function(name){var list=this.variableBlock;var length=list.length;for(var i=0;i<length;i++){var item=list[i];if(item.name==name){return item}}return null};EXClass.prototype.addFunction=function(functionItem){if(this.functionBlock.indexOf(functionItem)==-1){this.functionBlock.push(functionItem)}};EXClass.prototype.getFuncByName=function(name){var list=this.functionBlock;var length=list.length;for(var i=0;i<length;i++){var item=list[i];if(item.name==name){return item}}return null};EXClass.prototype.toCode=function(){var indent=this.indent;var indentStr=this.getIndent(indent);var indent1Str=this.getIndent(indent+1);var indent2Str=this.getIndent(indent+2);var returnStr=indentStr+"(function (";if(this.superClass){returnStr+="_super) {\n"+indent1Str+"__extends("+this.className+", _super);\n"}else{returnStr+=") {\n"}var innerClasses=this.innerClassBlock;var length=innerClasses.length;for(var i=0;i<length;i++){var clazz=innerClasses[i];clazz.indent=indent+1;returnStr+=indent1Str+"var "+clazz.className+" = "+clazz.toCode()+"\n\n"}returnStr+=indent1Str+"function "+this.className+"() {\n";if(this.superClass){returnStr+=indent2Str+"_super.call(this);\n"}var variables=this.variableBlock;length=variables.length;for(var i=0;i<length;i++){var variable=variables[i];if(variable.defaultValue){returnStr+=indent2Str+variable.toCode()+"\n"}}if(this.constructCode){var codes=this.constructCode.toCode().split("\n");length=codes.length;for(var i=0;i<length;i++){var code=codes[i];returnStr+=indent2Str+code+"\n"}}returnStr+=indent1Str+"}\n";returnStr+=indent1Str+"var _proto = "+this.className+".prototype;\n\n";var functions=this.functionBlock;length=functions.length;for(var i=0;i<length;i++){var functionItem=functions[i];functionItem.indent=indent+1;returnStr+=functionItem.toCode()+"\n"}returnStr+=indent1Str+"return "+this.className+";\n"+indentStr;if(this.superClass){returnStr+="})("+this.superClass+");"}else{returnStr+="})();"}return returnStr};return EXClass}(CodeBase);sys.EXClass=EXClass;__reflect(EXClass.prototype,"eui.sys.EXClass");var EXCodeBlock=function(_super){__extends(EXCodeBlock,_super);function EXCodeBlock(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.lines=[];return _this}EXCodeBlock.prototype.addVar=function(name,value){var valueStr=value?" = "+value:"";this.addCodeLine("var "+name+valueStr+";")};EXCodeBlock.prototype.addAssignment=function(target,value,prop){var propStr=prop?"."+prop:"";this.addCodeLine(target+propStr+" = "+value+";")};EXCodeBlock.prototype.addReturn=function(data){this.addCodeLine("return "+data+";")};EXCodeBlock.prototype.addEmptyLine=function(){this.addCodeLine("")};EXCodeBlock.prototype.startIf=function(expression){this.addCodeLine("if("+expression+")");this.startBlock()};EXCodeBlock.prototype.startElse=function(){this.addCodeLine("else");this.startBlock()};EXCodeBlock.prototype.startElseIf=function(expression){this.addCodeLine("else if("+expression+")");this.startBlock()};EXCodeBlock.prototype.startBlock=function(){this.addCodeLine("{");this.indent++};EXCodeBlock.prototype.endBlock=function(){this.indent--;this.addCodeLine("}")};EXCodeBlock.prototype.doFunction=function(functionName,args){var argsStr=args.join(",");this.addCodeLine(functionName+"("+argsStr+")")};EXCodeBlock.prototype.addCodeLine=function(code){this.lines.push(this.getIndent()+code)};EXCodeBlock.prototype.addCodeLineAt=function(code,index){this.lines.splice(index,0,this.getIndent()+code)};EXCodeBlock.prototype.containsCodeLine=function(code){return this.lines.indexOf(code)!=-1};EXCodeBlock.prototype.concat=function(cb){this.lines=this.lines.concat(cb.lines)};EXCodeBlock.prototype.toCode=function(){return this.lines.join("\n")};return EXCodeBlock}(CodeBase);sys.EXCodeBlock=EXCodeBlock;__reflect(EXCodeBlock.prototype,"eui.sys.EXCodeBlock");var EXFunction=function(_super){__extends(EXFunction,_super);function EXFunction(){var _this=_super!==null&&_super.apply(this,arguments)||this;_this.codeBlock=null;_this.isGet=false;_this.name="";return _this}EXFunction.prototype.toCode=function(){var indentStr=this.getIndent();var indent1Str=this.getIndent(this.indent+1);var codeIndent;var returnStr=indentStr;if(this.isGet){codeIndent=this.getIndent(this.indent+2);returnStr+='Object.defineProperty(_proto, "skinParts", {\n';returnStr+=indent1Str+"get: function () {\n"}else{codeIndent=indent1Str;returnStr+="_proto."+this.name+" = function () {\n"}if(this.codeBlock){var lines=this.codeBlock.toCode().split("\n");var length_28=lines.length;for(var i=0;i<length_28;i++){var line=lines[i];returnStr+=codeIndent+line+"\n"}}if(this.isGet){returnStr+=indent1Str+"},\n"+indent1Str+"enumerable: true,\n"+indent1Str+"configurable: true\n"+indentStr+"});"}else{returnStr+=indentStr+"};"}return returnStr};return EXFunction}(CodeBase);sys.EXFunction=EXFunction;__reflect(EXFunction.prototype,"eui.sys.EXFunction");var EXVariable=function(_super){__extends(EXVariable,_super);function EXVariable(name,defaultValue){var _this=_super.call(this)||this;_this.indent=2;_this.name=name;_this.defaultValue=defaultValue;return _this}EXVariable.prototype.toCode=function(){if(!this.defaultValue){return""}return"this."+this.name+" = "+this.defaultValue+";"};return EXVariable}(CodeBase);sys.EXVariable=EXVariable;__reflect(EXVariable.prototype,"eui.sys.EXVariable");var EXState=function(_super){__extends(EXState,_super);function EXState(name,stateGroups){var _this=_super.call(this)||this;_this.name="";_this.stateGroups=[];_this.addItems=[];_this.setProperty=[];_this.name=name;if(stateGroups)_this.stateGroups=stateGroups;return _this}EXState.prototype.addOverride=function(item){if(item instanceof EXAddItems)this.addItems.push(item);else this.setProperty.push(item)};EXState.prototype.toCode=function(){var indentStr=this.getIndent(1);var returnStr="new "+STATE+' ("'+this.name+'",\n'+indentStr+"[\n";var index=0;var isFirst=true;var overrides=this.addItems.concat(this.setProperty);while(index<overrides.length){if(isFirst)isFirst=false;else returnStr+=",\n";var item=overrides[index];var codes=item.toCode().split("\n");var length_29=codes.length;for(var i=0;i<length_29;i++){var code=codes[i];codes[i]=indentStr+indentStr+code}returnStr+=codes.join("\n");index++}returnStr+="\n"+indentStr+"])";return returnStr};return EXState}(CodeBase);sys.EXState=EXState;__reflect(EXState.prototype,"eui.sys.EXState");var EXAddItems=function(_super){__extends(EXAddItems,_super);function EXAddItems(target,property,position,relativeTo){var _this=_super.call(this)||this;_this.target=target;_this.property=property;_this.position=position;_this.relativeTo=relativeTo;return _this}EXAddItems.prototype.toCode=function(){var returnStr="new "+ADD_ITEMS+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return returnStr};return EXAddItems}(CodeBase);sys.EXAddItems=EXAddItems;__reflect(EXAddItems.prototype,"eui.sys.EXAddItems");var EXSetProperty=function(_super){__extends(EXSetProperty,_super);function EXSetProperty(target,name,value){var _this=_super.call(this)||this;_this.target=target;_this.name=name;_this.value=value;return _this}EXSetProperty.prototype.toCode=function(){return"new "+SET_PROPERTY+'("'+this.target+'","'+this.name+'",'+this.value+")"};return EXSetProperty}(CodeBase);sys.EXSetProperty=EXSetProperty;__reflect(EXSetProperty.prototype,"eui.sys.EXSetProperty");var EXSetStateProperty=function(_super){__extends(EXSetStateProperty,_super);function EXSetStateProperty(target,property,templates,chainIndex){var _this=_super.call(this)||this;if(target){target="this."+target}else{target="this"}_this.target=target;_this.property=property;_this.templates=templates;_this.chainIndex=chainIndex;return _this}EXSetStateProperty.prototype.toCode=function(){var expression=this.templates.join(",");var chain=this.chainIndex.join(",");return"new "+SET_STATEPROPERTY+"(this, ["+expression+"],"+"["+chain+"],"+this.target+',"'+this.property+'")'};return EXSetStateProperty}(CodeBase);sys.EXSetStateProperty=EXSetStateProperty;__reflect(EXSetStateProperty.prototype,"eui.sys.EXSetStateProperty");var EXBinding=function(_super){__extends(EXBinding,_super);function EXBinding(target,property,templates,chainIndex){var _this=_super.call(this)||this;_this.target=target;_this.property=property;_this.templates=templates;_this.chainIndex=chainIndex;return _this}EXBinding.prototype.toCode=function(){var expression=this.templates.join(",");var chain=this.chainIndex.join(",");return BINDING_PROPERTIES+"(this, ["+expression+"],"+"["+chain+"],"+this.target+',"'+this.property+'")'};return EXBinding}(CodeBase);sys.EXBinding=EXBinding;__reflect(EXBinding.prototype,"eui.sys.EXBinding")})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var UIImpl=eui.sys.UIComponentImpl;var BitmapLabel=function(_super){__extends(BitmapLabel,_super);function BitmapLabel(text){var _this=_super.call(this)||this;_this.$createChildrenCalled=false;_this.$fontChanged=false;_this._widthConstraint=NaN;_this._heightConstraint=NaN;_this.initializeUIValues();_this.text=text;return _this}BitmapLabel.prototype.$invalidateContentBounds=function(){_super.prototype.$invalidateContentBounds.call(this);this.invalidateSize()};BitmapLabel.prototype.$setWidth=function(value){var result1=_super.prototype.$setWidth.call(this,value);var result2=UIImpl.prototype.$setWidth.call(this,value);return result1&&result2};BitmapLabel.prototype.$setHeight=function(value){var result1=_super.prototype.$setHeight.call(this,value);var result2=UIImpl.prototype.$setHeight.call(this,value);return result1&&result2};BitmapLabel.prototype.$setText=function(value){var result=_super.prototype.$setText.call(this,value);eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"text");return result};BitmapLabel.prototype.$setFont=function(value){if(this.$fontForBitmapLabel==value){return false}this.$fontForBitmapLabel=value;if(this.$createChildrenCalled){this.$parseFont()}else{this.$fontChanged=true}this.$fontStringChanged=true;return true};BitmapLabel.prototype.$parseFont=function(){this.$fontChanged=false;var font=this.$fontForBitmapLabel;if(typeof font=="string"){eui.getAssets(font,function(bitmapFont){this.$setFontData(bitmapFont,font)},this)}else{this.$setFontData(font)}};BitmapLabel.prototype.$setFontData=function(value,font){if(font&&font!=this.$fontForBitmapLabel){return}if(value==this.$font){return false}this.$font=value;this.$invalidateContentBounds();return true};BitmapLabel.prototype.createChildren=function(){if(this.$fontChanged){this.$parseFont()}this.$createChildrenCalled=true};BitmapLabel.prototype.childrenCreated=function(){};BitmapLabel.prototype.commitProperties=function(){};BitmapLabel.prototype.measure=function(){var values=this.$UIComponent;var oldWidth=this.$textFieldWidth;var oldHeight=this.$textFieldHeight;var availableWidth=NaN;if(!isNaN(this._widthConstraint)){availableWidth=this._widthConstraint;this._widthConstraint=NaN}else if(!isNaN(values[8])){availableWidth=values[8]}else if(values[13]!=1e5){availableWidth=values[13]}_super.prototype.$setWidth.call(this,availableWidth);var availableHeight=NaN;if(!isNaN(this._heightConstraint)){availableHeight=this._heightConstraint;this._heightConstraint=NaN}else if(!isNaN(values[9])){availableHeight=values[9]}else if(values[15]!=1e5){availableHeight=values[15]}_super.prototype.$setHeight.call(this,availableHeight);this.setMeasuredSize(this.textWidth,this.textHeight);_super.prototype.$setWidth.call(this,oldWidth);_super.prototype.$setHeight.call(this,oldHeight)};BitmapLabel.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.$setWidth.call(this,unscaledWidth);_super.prototype.$setHeight.call(this,unscaledHeight)};BitmapLabel.prototype.invalidateParentLayout=function(){};BitmapLabel.prototype.setMeasuredSize=function(width,height){};BitmapLabel.prototype.invalidateProperties=function(){};BitmapLabel.prototype.validateProperties=function(){};BitmapLabel.prototype.invalidateSize=function(){};BitmapLabel.prototype.validateSize=function(recursive){};BitmapLabel.prototype.invalidateDisplayList=function(){};BitmapLabel.prototype.validateDisplayList=function(){};BitmapLabel.prototype.validateNow=function(){};BitmapLabel.prototype.setLayoutBoundsSize=function(layoutWidth,layoutHeight){UIImpl.prototype.setLayoutBoundsSize.call(this,layoutWidth,layoutHeight);if(isNaN(layoutWidth)||layoutWidth===this._widthConstraint||layoutWidth==0){return}var values=this.$UIComponent;if(!isNaN(values[9])){return}if(layoutWidth==values[16]){return}this._widthConstraint=layoutWidth;this._heightConstraint=layoutHeight;this.invalidateSize()};BitmapLabel.prototype.setLayoutBoundsPosition=function(x,y){};BitmapLabel.prototype.getLayoutBounds=function(bounds){};BitmapLabel.prototype.getPreferredBounds=function(bounds){};return BitmapLabel}(egret.BitmapText);eui.BitmapLabel=BitmapLabel;__reflect(BitmapLabel.prototype,"eui.BitmapLabel",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]);eui.sys.implementUIComponent(BitmapLabel,egret.BitmapText);eui.registerBindable(BitmapLabel.prototype,"text")})(eui||(eui={}));var EXML;(function(EXML){var parser=new eui.sys.EXMLParser;var requestPool=[];var callBackMap={};var parsedClasses={};var $prefixURL="";Object.defineProperty(EXML,"prefixURL",{get:function(){return $prefixURL},set:function(value){$prefixURL=value},enumerable:true,configurable:true});function parse(text){return parser.parse(text)}EXML.parse=parse;function load(url,callBack,thisObject,useCache){if(useCache===void 0){useCache=false}if(true){if(!url){egret.$error(1003,"url")}}if(useCache&&url in parsedClasses){callBack&&callBack.call(thisObject,parsedClasses[url],url);return}var list=callBackMap[url];if(list){list.push([callBack,thisObject]);return}callBackMap[url]=[[callBack,thisObject]];request(url,$parseURLContent)}EXML.load=load;function $loadAll(urls,callBack,thisObject,useCache){if(useCache===void 0){useCache=false}if(!urls||urls.length==0){callBack&&callBack.call(thisObject,[],urls);return}var exmlContents=[];urls.forEach(function(url){var loaded=function(url,text){exmlContents[url]=text;exmlContents.push(url);if(exmlContents.length==urls.length)onLoadAllFinished(urls,exmlContents,callBack,thisObject)};if(useCache&&url in parsedClasses){loaded(url,"");return}request(url,loaded)})}EXML.$loadAll=$loadAll;function onLoadAllFinished(urls,exmlContents,callBack,thisObject){var clazzes=[];urls.forEach(function(url,i){if(url in parsedClasses&&!exmlContents[url]){clazzes[i]=parsedClasses[url];return}var text=exmlContents[url];var clazz=$parseURLContent(url,text);clazzes[i]=clazz});callBack&&callBack.call(thisObject,clazzes,urls)}function update(url,clazz){parsedClasses[url]=clazz;var list=callBackMap[url];delete callBackMap[url];var length=list?list.length:0;for(var i=0;i<length;i++){var arr=list[i];if(arr[0]&&arr[1])arr[0].call(arr[1],clazz,url)}}EXML.update=update;function $parseURLContentAsJs(url,text,className){var clazz=null;if(text){clazz=parser.$parseCode(text,className);update(url,clazz)}}EXML.$parseURLContentAsJs=$parseURLContentAsJs;function $parseURLContent(url,text){var clazz=null;if(text&&typeof text=="string"){try{clazz=parse(text)}catch(e){console.error(url+"\n"+e.message)}}if(text&&text["prototype"]){clazz=text}if(url){if(clazz){parsedClasses[url]=clazz}var list=callBackMap[url];delete callBackMap[url];var length_30=list?list.length:0;for(var i=0;i<length_30;i++){var arr=list[i];if(arr[0]&&arr[1])arr[0].call(arr[1],clazz,url)}}return clazz}EXML.$parseURLContent=$parseURLContent;function request(url,callback){var openUrl=url;if(url.indexOf("://")==-1){openUrl=$prefixURL+url}var onConfigLoaded=function(str){if(!str){str=""}callback(url,str)};eui.getTheme(openUrl,onConfigLoaded)}})(EXML||(EXML={}));var eui;(function(eui){var sys;(function(sys){sys.NS_S="http://ns.egret.com/eui";sys.NS_W="http://ns.egret.com/wing";var coreClasses=["Point","Matrix","Rectangle"];var basicTypes=["Array","boolean","string","number"];var MODULE_NAME="eui.";var hashCount=0;var properties={};var EXMLConfig=function(){function EXMLConfig(){}EXMLConfig.prototype.$describe=function(instance){if(!instance){return null}var prototype=Object.getPrototypeOf(instance);if(!prototype){return null}var info;if(prototype.hasOwnProperty("__hashCode__")){info=properties[prototype.__hashCode__];if(info){return info}}var superProto=Object.getPrototypeOf(prototype);if(!superProto){return null}var superInstance=getInstanceOf(superProto.constructor);var superInfo=this.$describe(superInstance);if(superInfo){var factory=function(){};factory.prototype=superInfo;info=new factory}else{info={}}if(true){info.__class__=prototype.constructor.name}var keys=Object.keys(prototype).concat(Object.keys(instance));var length=keys.length;var meta=instance.__meta__;for(var i=0;i<length;i++){var key=keys[i];if(key=="constructor"||key.charAt(0)=="_"||key.charAt(0)=="$"){continue}var resultType=void 0;if(meta&&meta[key]){resultType=meta[key]}else if(isArray(instance[key])){resultType="Array"}else{resultType=typeof instance[key];if(resultType=="function"){continue}if(basicTypes.indexOf(resultType)==-1){resultType="any"}}info[key]=resultType}if(Object.getPrototypeOf(superProto)){prototype.__hashCode__=hashCount++;properties[prototype.__hashCode__]=info}return info};EXMLConfig.prototype.getClassNameById=function(id,ns){if(ns==sys.NS_S){if(id=="Object"){return id}if(coreClasses.indexOf(id)!=-1){return"egret."+id}}var name="";if(basicTypes.indexOf(id)!=-1){return id}if(ns==sys.NS_W){}else if(!ns||ns==sys.NS_S){name=MODULE_NAME+id}else{name=ns.substring(0,ns.length-1)+id}if(!getPrototypeOf(name)){name=""}return name};EXMLConfig.prototype.getDefaultPropById=function(id,ns){var className=this.getClassNameById(id,ns);var prototype=getPrototypeOf(className);var property;if(prototype){property=prototype.__defaultProperty__}return property?property:""};EXMLConfig.prototype.getPropertyType=function(property,className){if(className=="Object"){return"any"}var resultType="";var prototype=getPrototypeOf(className);if(prototype){if(!prototype.hasOwnProperty("__hashCode__")){var clazz=egret.getDefinitionByName(className);var instance=getInstanceOf(clazz);if(!instance){if(true){egret.$warn(2104,className)}return resultType}this.$describe(instance)}var info=properties[prototype.__hashCode__];if(info){resultType=info[property]}}return resultType};return EXMLConfig}();sys.EXMLConfig=EXMLConfig;__reflect(EXMLConfig.prototype,"eui.sys.EXMLConfig");function isArray(o){return Object.prototype.toString.call(o)==="[object Array]"}function getPrototypeOf(className){var clazz=egret.getDefinitionByName(className);if(!clazz){return null}return clazz.prototype}function getInstanceOf(clazz){if(!clazz){return null}var instance;if(true){try{instance=new clazz}catch(e){egret.error(e);return null}}else{instance=new clazz}return instance}})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){egret.$locale_strings=egret.$locale_strings||{};egret.$locale_strings["en_US"]=egret.$locale_strings["en_US"]||{};var locale_strings=egret.$locale_strings["en_US"];locale_strings[2001]="EXML parsing error {0}: EXML file can't be found ";locale_strings[2002]="EXML parsing error : invalid XML file:\n{0}";locale_strings[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}";locale_strings[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}";locale_strings[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}";locale_strings[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}";locale_strings[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}";locale_strings[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}";locale_strings[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}";locale_strings[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}";locale_strings[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}";locale_strings[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}";locale_strings[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ";locale_strings[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}";locale_strings[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}";locale_strings[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}";locale_strings[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}";locale_strings[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}";locale_strings[2019]="EXML parsing error {0}: the container’s child item must be visible nodes: {1}";locale_strings[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}";locale_strings[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.";locale_strings[2022]="EXML parsing error: there contains illegal characters in the id `{0}`";locale_strings[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}";locale_strings[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}";locale_strings[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}";locale_strings[2104]="EXML parsing warnning, Instantiate class {0} error，the parameters of its constructor method must be empty.";locale_strings[2201]="BasicLayout doesn't support virtualization.";locale_strings[2202]="parse skinName error，the parsing result of skinName must be a instance of eui.Skin.";locale_strings[2203]="Could not find the skin class '{0}'。";locale_strings[2204]="Undefined event.kind type (CollectionEventKind) = '{0}'.";locale_strings[2301]="parse source failed，could not find asset from URL：{0} ."})(eui||(eui={}));var eui;(function(eui){egret.$locale_strings=egret.$locale_strings||{};egret.$locale_strings["zh_CN"]=egret.$locale_strings["zh_CN"]||{};var locale_strings=egret.$locale_strings["zh_CN"];locale_strings[2001]="EXML解析错误 {0}: 找不到EXML文件";locale_strings[2002]="EXML解析错误: 不是有效的XML文件:\n{0}";locale_strings[2003]="EXML解析错误 {0}: 无法找到节点所对应的类定义\n{1}";locale_strings[2004]="EXML解析错误 {0}: 节点不能含有同名的id属性\n{1}";locale_strings[2005]="EXML解析错误 {0}: 节点上不存在名为'{1}'的属性，或者该属性没有初始值:\n{2}";locale_strings[2006]="EXML解析错误 {0}: 未定义的视图状态名称:'{1}'\n{2}";locale_strings[2007]="EXML解析错误 {0}: 只有处于容器内的 UIComponent 对象可以使用includeIn和excludeFrom属性\n{1}";locale_strings[2008]="EXML解析错误 {0}: 无法将'{1}'类型的值赋给属性:'{2}'\n{3}";locale_strings[2009]="EXML解析错误 {0}: 在节点属性值的‘{}’标签内只能引用一个ID，不允许使用复杂表达式\n{1}";locale_strings[2010]="EXML解析错误 {0}: 属性:'{1}'所引用的ID: '{2}'不存在\n{3}";locale_strings[2011]="EXML解析错误 {0}: 无法将多个子节点赋值给同一个属性:'{1}'\n{2}";locale_strings[2012]="EXML解析错误 {0}: 节点上不存在默认属性，必须显式声明子节点要赋值到的属性名\n{1}";locale_strings[2013]="EXML解析错误 {0}: 类型为Array的属性节点上不允许使用视图状态语法\n{1}";locale_strings[2014]="EXML解析错误 {0}: 不允许将皮肤类自身赋值给节点属性\n{1}";locale_strings[2015]="EXML解析错误 {0}: 节点引用的类定义:{1}不存在\n{2}";locale_strings[2016]="EXML解析错误 {0}: 节点上'scale9Grid'属性值的格式错误:{1}";locale_strings[2017]="EXML解析错误 {0}: 节点上缺少命名空间前缀:{1}";locale_strings[2018]="EXML解析错误 {0}: 节点上'skinName'属性值的格式错误:{1}";locale_strings[2019]="EXML解析错误 {0}: 容器的子项必须是可视节点:{1}";locale_strings[2020]="EXML解析错误 {0}: 在w:Declarations内的子节点，不允许使用includeIn和excludeFrom属性\n{1}";locale_strings[2021]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}";locale_strings[2022]="EXML解析错误: id `{0}` 中含有非法字符";locale_strings[2101]="EXML解析警告: 在EXML根节点上声明的 class 属性: {0} 注册失败，所对应的类已经存在，请尝试重命名要注册的类名。\n{1}";locale_strings[2102]="EXML解析警告 {0}: 在属性节点上找不到任何子节点\n{1}";locale_strings[2103]="EXML解析警告 {0}: 节点上的同一个属性'{1}'被多次赋值\n{2}";locale_strings[2104]="EXML解析警告，无法直接实例化自定义组件：{0} ，在EXML中使用的自定义组件必须要能直接被实例化，否则可能导致后续EXML解析报错。";locale_strings[2201]="BasicLayout 不支持虚拟化。";locale_strings[2202]="皮肤解析出错，属性 skinName 的值必须要能够解析为一个 eui.Skin 的实例。";locale_strings[2203]="找不到指定的皮肤类 '{0}'。";locale_strings[2204]="未定义的event.kind类型(CollectionEventKind) = '{0}'.";locale_strings[2301]="素材解析失败，找不到URL：{0} 所对应的资源。"})(eui||(eui={}));var eui;(function(eui){var BasicLayout=function(_super){__extends(BasicLayout,_super);function BasicLayout(){return _super.call(this)||this}BasicLayout.prototype.measure=function(){_super.prototype.measure.call(this);eui.sys.measure(this.$target)};BasicLayout.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);var target=this.$target;var pos=eui.sys.updateDisplayList(target,unscaledWidth,unscaledHeight);target.setContentSize(Math.ceil(pos.x),Math.ceil(pos.y))};return BasicLayout}(eui.LayoutBase);eui.BasicLayout=BasicLayout;__reflect(BasicLayout.prototype,"eui.BasicLayout");if(true){Object.defineProperty(BasicLayout.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(value){egret.$error(2201)},enumerable:true,configurable:true})}})(eui||(eui={}));(function(eui){var sys;(function(sys){var UIComponentClass="eui.UIComponent";function formatRelative(value,total){if(!value||typeof value=="number"){return value}var str=value;var index=str.indexOf("%");if(index==-1){return+str}var percent=+str.substring(0,index);return percent*.01*total}function measure(target){if(!target){return}var width=0;var height=0;var bounds=egret.$TempRectangle;var count=target.numChildren;for(var i=0;i<count;i++){var layoutElement=target.getChildAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}var values=layoutElement.$UIComponent;var hCenter=+values[4];var vCenter=+values[5];var left=+values[0];var right=+values[1];var top_1=+values[2];var bottom=+values[3];var extX=void 0;var extY=void 0;layoutElement.getPreferredBounds(bounds);if(!isNaN(left)&&!isNaN(right)){extX=left+right}else if(!isNaN(hCenter)){extX=Math.abs(hCenter)*2}else if(!isNaN(left)||!isNaN(right)){extX=isNaN(left)?0:left;extX+=isNaN(right)?0:right}else{extX=bounds.x}if(!isNaN(top_1)&&!isNaN(bottom)){extY=top_1+bottom}else if(!isNaN(vCenter)){extY=Math.abs(vCenter)*2}else if(!isNaN(top_1)||!isNaN(bottom)){extY=isNaN(top_1)?0:top_1;extY+=isNaN(bottom)?0:bottom}else{extY=bounds.y}var preferredWidth=bounds.width;var preferredHeight=bounds.height;width=Math.ceil(Math.max(width,extX+preferredWidth));height=Math.ceil(Math.max(height,extY+preferredHeight))}target.setMeasuredSize(width,height)}sys.measure=measure;function updateDisplayList(target,unscaledWidth,unscaledHeight){if(!target)return;var count=target.numChildren;var maxX=0;var maxY=0;var bounds=egret.$TempRectangle;for(var i=0;i<count;i++){var layoutElement=target.getChildAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}var values=layoutElement.$UIComponent;var hCenter=formatRelative(values[4],unscaledWidth*.5);var vCenter=formatRelative(values[5],unscaledHeight*.5);var left=formatRelative(values[0],unscaledWidth);var right=formatRelative(values[1],unscaledWidth);var top_2=formatRelative(values[2],unscaledHeight);var bottom=formatRelative(values[3],unscaledHeight);var percentWidth=values[6];var percentHeight=values[7];var childWidth=NaN;var childHeight=NaN;if(!isNaN(left)&&!isNaN(right)){childWidth=unscaledWidth-right-left}else if(!isNaN(percentWidth)){childWidth=Math.round(unscaledWidth*Math.min(percentWidth*.01,1))}if(!isNaN(top_2)&&!isNaN(bottom)){childHeight=unscaledHeight-bottom-top_2}else if(!isNaN(percentHeight)){childHeight=Math.round(unscaledHeight*Math.min(percentHeight*.01,1))}layoutElement.setLayoutBoundsSize(childWidth,childHeight);layoutElement.getLayoutBounds(bounds);var elementWidth=bounds.width;var elementHeight=bounds.height;var childX=NaN;var childY=NaN;if(!isNaN(hCenter))childX=Math.round((unscaledWidth-elementWidth)/2+hCenter);else if(!isNaN(left))childX=left;else if(!isNaN(right))childX=unscaledWidth-elementWidth-right;else childX=bounds.x;if(!isNaN(vCenter))childY=Math.round((unscaledHeight-elementHeight)/2+vCenter);else if(!isNaN(top_2))childY=top_2;else if(!isNaN(bottom))childY=unscaledHeight-elementHeight-bottom;else childY=bounds.y;layoutElement.setLayoutBoundsPosition(childX,childY);maxX=Math.max(maxX,childX+elementWidth);maxY=Math.max(maxY,childY+elementHeight)}return egret.$TempPoint.setTo(maxX,maxY)}sys.updateDisplayList=updateDisplayList})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));var eui;(function(eui){var ColumnAlign=function(){function ColumnAlign(){}ColumnAlign.LEFT="left";ColumnAlign.JUSTIFY_USING_GAP="justifyUsingGap";ColumnAlign.JUSTIFY_USING_WIDTH="justifyUsingWidth";return ColumnAlign}();eui.ColumnAlign=ColumnAlign;__reflect(ColumnAlign.prototype,"eui.ColumnAlign")})(eui||(eui={}));var eui;(function(eui){var UIComponentClass="eui.UIComponent";var HorizontalLayout=function(_super){__extends(HorizontalLayout,_super);function HorizontalLayout(){return _super!==null&&_super.apply(this,arguments)||this}HorizontalLayout.prototype.measureReal=function(){var target=this.$target;var count=target.numElements;var numElements=count;var measuredWidth=0;var measuredHeight=0;var bounds=egret.$TempRectangle;for(var i=0;i<count;i++){var layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){numElements--;continue}layoutElement.getPreferredBounds(bounds);measuredWidth+=bounds.width;measuredHeight=Math.max(measuredHeight,bounds.height)}measuredWidth+=(numElements-1)*this.$gap;var hPadding=this.$paddingLeft+this.$paddingRight;var vPadding=this.$paddingTop+this.$paddingBottom;target.setMeasuredSize(measuredWidth+hPadding,measuredHeight+vPadding)};HorizontalLayout.prototype.measureVirtual=function(){var target=this.$target;var typicalWidth=this.$typicalWidth;var measuredWidth=this.getElementTotalSize();var measuredHeight=Math.max(this.maxElementSize,this.$typicalHeight);var bounds=egret.$TempRectangle;var endIndex=this.endIndex;var elementSizeTable=this.elementSizeTable;for(var index=this.startIndex;index<endIndex;index++){var layoutElement=target.getElementAt(index);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);measuredWidth+=bounds.width;measuredWidth-=isNaN(elementSizeTable[index])?typicalWidth:elementSizeTable[index];measuredHeight=Math.max(measuredHeight,bounds.height)}var hPadding=this.$paddingLeft+this.$paddingRight;var vPadding=this.$paddingTop+this.$paddingBottom;target.setMeasuredSize(measuredWidth+hPadding,measuredHeight+vPadding)};HorizontalLayout.prototype.updateDisplayListReal=function(width,height){var target=this.$target;var paddingL=this.$paddingLeft;var paddingR=this.$paddingRight;var paddingT=this.$paddingTop;var paddingB=this.$paddingBottom;var gap=this.$gap;var targetWidth=Math.max(0,width-paddingL-paddingR);var targetHeight=Math.max(0,height-paddingT-paddingB);var hJustify=this.$horizontalAlign==eui.JustifyAlign.JUSTIFY;var vJustify=this.$verticalAlign==eui.JustifyAlign.JUSTIFY||this.$verticalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var vAlign=0;if(!vJustify){if(this.$verticalAlign==egret.VerticalAlign.MIDDLE){vAlign=.5}else if(this.$verticalAlign==egret.VerticalAlign.BOTTOM){vAlign=1}}var count=target.numElements;var numElements=count;var x=paddingL;var y=paddingT;var i;var layoutElement;var totalPreferredWidth=0;var totalPercentWidth=0;var childInfoArray=[];var childInfo;var widthToDistribute=targetWidth;var maxElementHeight=this.maxElementSize;var bounds=egret.$TempRectangle;for(i=0;i<count;i++){var layoutElement_1=target.getElementAt(i);if(!egret.is(layoutElement_1,UIComponentClass)||!layoutElement_1.$includeInLayout){numElements--;continue}layoutElement_1.getPreferredBounds(bounds);maxElementHeight=Math.max(maxElementHeight,bounds.height);if(hJustify){totalPreferredWidth+=bounds.width}else{var values=layoutElement_1.$UIComponent;if(!isNaN(values[6])){totalPercentWidth+=values[6];childInfo=new eui.sys.ChildInfo;childInfo.layoutElement=layoutElement_1;childInfo.percent=values[6];childInfo.min=values[12];childInfo.max=values[13];childInfoArray.push(childInfo)}else{widthToDistribute-=bounds.width}}}widthToDistribute-=gap*(numElements-1);widthToDistribute=widthToDistribute>0?widthToDistribute:0;var excessSpace=targetWidth-totalPreferredWidth-gap*(numElements-1);var averageWidth;var largeChildrenCount=numElements;var widthDic={};if(hJustify){if(excessSpace<0){averageWidth=widthToDistribute/numElements;for(i=0;i<count;i++){layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);if(bounds.width<=averageWidth){widthToDistribute-=bounds.width;largeChildrenCount--;continue}}widthToDistribute=widthToDistribute>0?widthToDistribute:0}}else{if(totalPercentWidth>0){this.flexChildrenProportionally(targetWidth,widthToDistribute,totalPercentWidth,childInfoArray);var roundOff_1=0;var length_31=childInfoArray.length;for(i=0;i<length_31;i++){childInfo=childInfoArray[i];var childSize=Math.round(childInfo.size+roundOff_1);roundOff_1+=childInfo.size-childSize;widthDic[childInfo.layoutElement.$hashCode]=childSize;widthToDistribute-=childSize}widthToDistribute=widthToDistribute>0?widthToDistribute:0}}if(this.$horizontalAlign==egret.HorizontalAlign.CENTER){x=paddingL+widthToDistribute*.5}else if(this.$horizontalAlign==egret.HorizontalAlign.RIGHT){x=paddingL+widthToDistribute}var maxX=paddingL;var maxY=paddingT;var dx=0;var dy=0;var justifyHeight=Math.ceil(targetHeight);if(this.$verticalAlign==eui.JustifyAlign.CONTENT_JUSTIFY)justifyHeight=Math.ceil(Math.max(targetHeight,maxElementHeight));var roundOff=0;var layoutElementWidth;var childWidth;for(i=0;i<count;i++){var exceesHeight=0;layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);layoutElementWidth=NaN;if(hJustify){childWidth=NaN;if(excessSpace>0){childWidth=widthToDistribute*bounds.width/totalPreferredWidth}else if(excessSpace<0&&bounds.width>averageWidth){childWidth=widthToDistribute/largeChildrenCount}if(!isNaN(childWidth)){layoutElementWidth=Math.round(childWidth+roundOff);roundOff+=childWidth-layoutElementWidth}}else{layoutElementWidth=widthDic[layoutElement.$hashCode]}if(vJustify){y=paddingT;layoutElement.setLayoutBoundsSize(layoutElementWidth,justifyHeight);layoutElement.getLayoutBounds(bounds)}else{var layoutElementHeight=NaN;var values=layoutElement.$UIComponent;if(!isNaN(layoutElement.percentHeight)){var percent=Math.min(100,values[7]);layoutElementHeight=Math.round(targetHeight*percent*.01)}layoutElement.setLayoutBoundsSize(layoutElementWidth,layoutElementHeight);layoutElement.getLayoutBounds(bounds);exceesHeight=(targetHeight-bounds.height)*vAlign;exceesHeight=exceesHeight>0?exceesHeight:0;y=paddingT+exceesHeight}layoutElement.setLayoutBoundsPosition(Math.round(x),Math.round(y));dx=Math.ceil(bounds.width);dy=Math.ceil(bounds.height);maxX=Math.max(maxX,x+dx);maxY=Math.max(maxY,y+dy);x+=dx+gap}this.maxElementSize=maxElementHeight;target.setContentSize(maxX+paddingR,maxY+paddingB)};HorizontalLayout.prototype.updateDisplayListVirtual=function(width,height){var target=this.$target;if(this.indexInViewCalculated)this.indexInViewCalculated=false;else this.getIndexInView();var paddingR=this.$paddingRight;var paddingT=this.$paddingTop;var paddingB=this.$paddingBottom;var gap=this.$gap;var contentWidth;var numElements=target.numElements;if(this.startIndex==-1||this.endIndex==-1){contentWidth=this.getStartPosition(numElements)-gap+paddingR;target.setContentSize(contentWidth,target.contentHeight);return}var endIndex=this.endIndex;target.setVirtualElementIndicesInView(this.startIndex,endIndex);var justify=this.$verticalAlign==eui.JustifyAlign.JUSTIFY||this.$verticalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var contentJustify=this.$verticalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var vAlign=0;if(!justify){if(this.$verticalAlign==egret.VerticalAlign.MIDDLE){vAlign=.5}else if(this.$verticalAlign==egret.VerticalAlign.BOTTOM){vAlign=1}}var bounds=egret.$TempRectangle;var targetHeight=Math.max(0,height-paddingT-paddingB);var justifyHeight=Math.ceil(targetHeight);var layoutElement;var typicalHeight=this.$typicalHeight;var typicalWidth=this.$typicalWidth;var maxElementHeight=this.maxElementSize;var oldMaxH=Math.max(typicalHeight,this.maxElementSize);if(contentJustify){for(var index=this.startIndex;index<=endIndex;index++){layoutElement=target.getVirtualElementAt(index);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);maxElementHeight=Math.max(maxElementHeight,bounds.height)}justifyHeight=Math.ceil(Math.max(targetHeight,maxElementHeight))}var x=0;var y=0;var contentHeight=0;var oldElementSize;var needInvalidateSize=false;var elementSizeTable=this.elementSizeTable;for(var i=this.startIndex;i<=endIndex;i++){var exceesHeight=0;layoutElement=target.getVirtualElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);if(!contentJustify){maxElementHeight=Math.max(maxElementHeight,bounds.height)}if(justify){y=paddingT;layoutElement.setLayoutBoundsSize(NaN,justifyHeight);layoutElement.getLayoutBounds(bounds)}else{layoutElement.getLayoutBounds(bounds);exceesHeight=(targetHeight-bounds.height)*vAlign;exceesHeight=exceesHeight>0?exceesHeight:0;y=paddingT+exceesHeight}contentHeight=Math.max(contentHeight,bounds.height);if(!needInvalidateSize){oldElementSize=isNaN(elementSizeTable[i])?typicalWidth:elementSizeTable[i];if(oldElementSize!=bounds.width)needInvalidateSize=true}elementSizeTable[i]=bounds.width;x=this.getStartPosition(i);layoutElement.setLayoutBoundsPosition(Math.round(x),Math.round(y))}contentHeight+=paddingT+paddingB;contentWidth=this.getStartPosition(numElements)-gap+paddingR;this.maxElementSize=maxElementHeight;target.setContentSize(contentWidth,contentHeight);if(needInvalidateSize||oldMaxH<this.maxElementSize){target.invalidateSize()}};HorizontalLayout.prototype.getStartPosition=function(index){if(!this.$useVirtualLayout){if(this.$target){var element=this.$target.getElementAt(index);if(element){return element.x}}}var typicalWidth=this.$typicalWidth;var startPos=this.$paddingLeft;var gap=this.$gap;var elementSizeTable=this.elementSizeTable;for(var i=0;i<index;i++){var w=elementSizeTable[i];if(isNaN(w)){w=typicalWidth}startPos+=w+gap}return startPos};HorizontalLayout.prototype.getElementSize=function(index){if(this.$useVirtualLayout){var size=this.elementSizeTable[index];if(isNaN(size)){size=this.$typicalWidth}return size}if(this.$target){return this.$target.getElementAt(index).width}return 0};HorizontalLayout.prototype.getElementTotalSize=function(){var typicalWidth=this.$typicalWidth;var gap=this.$gap;var totalSize=0;var length=this.$target.numElements;var elementSizeTable=this.elementSizeTable;for(var i=0;i<length;i++){var w=elementSizeTable[i];if(isNaN(w)){w=typicalWidth}totalSize+=w+gap}totalSize-=gap;return totalSize};HorizontalLayout.prototype.elementAdded=function(index){if(!this.useVirtualLayout)return;_super.prototype.elementAdded.call(this,index);this.elementSizeTable.splice(index,0,this.$typicalWidth)};HorizontalLayout.prototype.getIndexInView=function(){var target=this.$target;if(!target||target.numElements==0){this.startIndex=this.endIndex=-1;return false}var values=target.$UIComponent;if(values[10]<=0||values[11]<=0){this.startIndex=this.endIndex=-1;return false}var numElements=target.numElements;var contentWidth=this.getStartPosition(numElements-1)+this.elementSizeTable[numElements-1]+this.$paddingRight;var minVisibleX=target.scrollH;if(minVisibleX>contentWidth-this.$paddingRight){this.startIndex=-1;this.endIndex=-1;return false}var maxVisibleX=target.scrollH+values[10];if(maxVisibleX<this.$paddingLeft){this.startIndex=-1;this.endIndex=-1;return false}var oldStartIndex=this.startIndex;var oldEndIndex=this.endIndex;this.startIndex=this.findIndexAt(minVisibleX,0,numElements-1);if(this.startIndex==-1)this.startIndex=0;this.endIndex=this.findIndexAt(maxVisibleX,0,numElements-1);if(this.endIndex==-1)this.endIndex=numElements-1;return oldStartIndex!=this.startIndex||oldEndIndex!=this.endIndex};return HorizontalLayout}(eui.LinearLayoutBase);eui.HorizontalLayout=HorizontalLayout;__reflect(HorizontalLayout.prototype,"eui.HorizontalLayout")})(eui||(eui={}));var eui;(function(eui){var JustifyAlign=function(){function JustifyAlign(){}JustifyAlign.JUSTIFY="justify";JustifyAlign.CONTENT_JUSTIFY="contentJustify";return JustifyAlign}();eui.JustifyAlign=JustifyAlign;__reflect(JustifyAlign.prototype,"eui.JustifyAlign")})(eui||(eui={}));var eui;(function(eui){var RowAlign=function(){function RowAlign(){}RowAlign.TOP="top";RowAlign.JUSTIFY_USING_GAP="justifyUsingGap";RowAlign.JUSTIFY_USING_HEIGHT="justifyUsingHeight";return RowAlign}();eui.RowAlign=RowAlign;__reflect(RowAlign.prototype,"eui.RowAlign")})(eui||(eui={}));var eui;(function(eui){var UIComponentClass="eui.UIComponent";var TileLayout=function(_super){__extends(TileLayout,_super);function TileLayout(){var _this=_super.call(this)||this;_this.explicitHorizontalGap=NaN;_this._horizontalGap=6;_this.explicitVerticalGap=NaN;_this._verticalGap=6;_this._columnCount=-1;_this._requestedColumnCount=0;_this._rowCount=-1;_this._requestedRowCount=0;_this.explicitColumnWidth=NaN;_this._columnWidth=NaN;_this.explicitRowHeight=NaN;_this._rowHeight=NaN;_this._paddingLeft=0;_this._paddingRight=0;_this._paddingTop=0;_this._paddingBottom=0;_this._horizontalAlign=eui.JustifyAlign.JUSTIFY;_this._verticalAlign=eui.JustifyAlign.JUSTIFY;_this._columnAlign=eui.ColumnAlign.LEFT;_this._rowAlign=eui.RowAlign.TOP;_this._orientation=eui.TileOrientation.ROWS;_this.maxElementWidth=0;_this.maxElementHeight=0;_this.startIndex=-1;_this.endIndex=-1;_this.indexInViewCalculated=false;return _this}Object.defineProperty(TileLayout.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(value){value=+value;if(value===this._horizontalGap)return;this.explicitHorizontalGap=value;this._horizontalGap=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(value){value=+value;if(value===this._verticalGap)return;this.explicitVerticalGap=value;this._verticalGap=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(value){value=+value||0;if(this._requestedColumnCount===value)return;this._requestedColumnCount=value;this._columnCount=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(value){value=+value||0;if(this._requestedRowCount==value)return;this._requestedRowCount=value;this._rowCount=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(value){value=+value;if(value===this._columnWidth)return;this.explicitColumnWidth=value;this._columnWidth=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(value){value=+value;if(value===this._rowHeight)return;this.explicitRowHeight=value;this._rowHeight=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(value){value=+value||0;if(this._paddingLeft==value)return;this._paddingLeft=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(value){value=+value||0;if(this._paddingRight===value)return;this._paddingRight=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(value){value=+value||0;if(this._paddingTop==value)return;this._paddingTop=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(value){value=+value||0;if(this._paddingBottom===value)return;this._paddingBottom=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(value){if(this._horizontalAlign==value)return;this._horizontalAlign=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(value){if(this._verticalAlign==value)return;this._verticalAlign=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(value){if(this._columnAlign==value)return;this._columnAlign=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(value){if(this._rowAlign==value)return;this._rowAlign=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});Object.defineProperty(TileLayout.prototype,"orientation",{get:function(){return this._orientation},set:function(value){if(this._orientation==value)return;this._orientation=value;this.invalidateTargetLayout()},enumerable:true,configurable:true});TileLayout.prototype.invalidateTargetLayout=function(){var target=this.$target;if(target){target.invalidateSize();target.invalidateDisplayList()}};TileLayout.prototype.measure=function(){var target=this.$target;if(!target)return;var savedColumnCount=this._columnCount;var savedRowCount=this._rowCount;var savedColumnWidth=this._columnWidth;var savedRowHeight=this._rowHeight;var measuredWidth=0;var measuredHeight=0;var values=target.$UIComponent;this.calculateRowAndColumn(values[8],values[9]);var columnCount=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount;var rowCount=this._requestedRowCount>0?this._requestedRowCount:this._rowCount;var horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var verticalGap=isNaN(this._verticalGap)?0:this._verticalGap;if(columnCount>0){measuredWidth=columnCount*(this._columnWidth+horizontalGap)-horizontalGap}if(rowCount>0){measuredHeight=rowCount*(this._rowHeight+verticalGap)-verticalGap}var hPadding=this._paddingLeft+this._paddingRight;var vPadding=this._paddingTop+this._paddingBottom;target.setMeasuredSize(measuredWidth+hPadding,measuredHeight+vPadding);this._columnCount=savedColumnCount;this._rowCount=savedRowCount;this._columnWidth=savedColumnWidth;this._rowHeight=savedRowHeight};TileLayout.prototype.calculateRowAndColumn=function(explicitWidth,explicitHeight){var target=this.$target;var horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var verticalGap=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;var numElements=target.numElements;var count=numElements;for(var index=0;index<count;index++){var layoutElement=target.getElementAt(index);if(layoutElement&&(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout)){numElements--;continue}}if(numElements==0){this._rowCount=this._columnCount=0;return}if(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))this.updateMaxElementSize();if(isNaN(this.explicitColumnWidth)){this._columnWidth=this.maxElementWidth}else{this._columnWidth=this.explicitColumnWidth}if(isNaN(this.explicitRowHeight)){this._rowHeight=this.maxElementHeight}else{this._rowHeight=this.explicitRowHeight}var itemWidth=this._columnWidth+horizontalGap;if(itemWidth<=0)itemWidth=1;var itemHeight=this._rowHeight+verticalGap;if(itemHeight<=0)itemHeight=1;var orientedByColumns=this._orientation==eui.TileOrientation.COLUMNS;var widthHasSet=!isNaN(explicitWidth);var heightHasSet=!isNaN(explicitHeight);var paddingL=this._paddingLeft;var paddingR=this._paddingRight;var paddingT=this._paddingTop;var paddingB=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0){if(this._requestedRowCount>0)this._rowCount=Math.min(this._requestedRowCount,numElements);if(this._requestedColumnCount>0)this._columnCount=Math.min(this._requestedColumnCount,numElements)}else if(!widthHasSet&&!heightHasSet){var side=Math.sqrt(numElements*itemWidth*itemHeight);if(orientedByColumns){this._rowCount=Math.max(1,Math.round(side/itemHeight))}else{this._columnCount=Math.max(1,Math.round(side/itemWidth))}}else if(widthHasSet&&(!heightHasSet||!orientedByColumns)){var targetWidth=Math.max(0,explicitWidth-paddingL-paddingR);this._columnCount=Math.floor((targetWidth+horizontalGap)/itemWidth);this._columnCount=Math.max(1,Math.min(this._columnCount,numElements))}else{var targetHeight=Math.max(0,explicitHeight-paddingT-paddingB);this._rowCount=Math.floor((targetHeight+verticalGap)/itemHeight);this._rowCount=Math.max(1,Math.min(this._rowCount,numElements))}if(this._rowCount==-1)this._rowCount=Math.max(1,Math.ceil(numElements/this._columnCount));if(this._columnCount==-1)this._columnCount=Math.max(1,Math.ceil(numElements/this._rowCount));if(this._requestedColumnCount>0&&this._requestedRowCount>0){if(this._orientation==eui.TileOrientation.ROWS)this._rowCount=Math.max(1,Math.ceil(numElements/this._requestedColumnCount));else this._columnCount=Math.max(1,Math.ceil(numElements/this._requestedRowCount))}};TileLayout.prototype.updateMaxElementSize=function(){if(!this.$target)return;if(this.$useVirtualLayout){this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth);this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight);this.doUpdateMaxElementSize(this.startIndex,this.endIndex)}else{this.doUpdateMaxElementSize(0,this.$target.numElements-1)}};TileLayout.prototype.doUpdateMaxElementSize=function(startIndex,endIndex){var maxElementWidth=this.maxElementWidth;var maxElementHeight=this.maxElementHeight;var bounds=egret.$TempRectangle;var target=this.$target;if(startIndex!=-1&&endIndex!=-1){for(var index=startIndex;index<=endIndex;index++){var elt=target.getVirtualElementAt(index);if(!egret.is(elt,UIComponentClass)||!elt.$includeInLayout){continue}elt.getPreferredBounds(bounds);maxElementWidth=Math.max(maxElementWidth,bounds.width);maxElementHeight=Math.max(maxElementHeight,bounds.height)}}this.maxElementWidth=maxElementWidth;this.maxElementHeight=maxElementHeight};TileLayout.prototype.clearVirtualLayoutCache=function(){_super.prototype.clearVirtualLayoutCache.call(this);this.maxElementWidth=0;this.maxElementHeight=0};TileLayout.prototype.scrollPositionChanged=function(){if(this.$useVirtualLayout){var changed=this.getIndexInView();if(changed){this.indexInViewCalculated=true;this.$target.invalidateDisplayList()}}};TileLayout.prototype.getIndexInView=function(){if(!this.$target||this.$target.numElements==0){this.startIndex=this.endIndex=-1;return false}var target=this.$target;var numElements=target.numElements;if(!this.$useVirtualLayout){this.startIndex=0;this.endIndex=numElements-1;return false}var values=target.$UIComponent;if(values[10]==0||values[11]==0){this.startIndex=this.endIndex=-1;return false}var oldStartIndex=this.startIndex;var oldEndIndex=this.endIndex;var paddingL=this._paddingLeft;var paddingT=this._paddingTop;var horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var verticalGap=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==eui.TileOrientation.COLUMNS){var itemWidth=this._columnWidth+horizontalGap;if(itemWidth<=0){this.startIndex=0;this.endIndex=numElements-1;return false}var minVisibleX=target.scrollH;var maxVisibleX=minVisibleX+values[10];var startColumn=Math.floor((minVisibleX-paddingL)/itemWidth);if(startColumn<0)startColumn=0;var endColumn=Math.ceil((maxVisibleX-paddingL)/itemWidth);if(endColumn<0)endColumn=0;this.startIndex=Math.min(numElements-1,Math.max(0,startColumn*this._rowCount));this.endIndex=Math.min(numElements-1,Math.max(0,endColumn*this._rowCount-1))}else{var itemHeight=this._rowHeight+verticalGap;if(itemHeight<=0){this.startIndex=0;this.endIndex=numElements-1;return false}var minVisibleY=target.scrollV;var maxVisibleY=minVisibleY+values[11];var startRow=Math.floor((minVisibleY-paddingT)/itemHeight);if(startRow<0)startRow=0;var endRow=Math.ceil((maxVisibleY-paddingT)/itemHeight);if(endRow<0)endRow=0;this.startIndex=Math.min(numElements-1,Math.max(0,startRow*this._columnCount));this.endIndex=Math.min(numElements-1,Math.max(0,endRow*this._columnCount-1))}return this.startIndex!=oldStartIndex||this.endIndex!=oldEndIndex};TileLayout.prototype.updateDisplayList=function(width,height){_super.prototype.updateDisplayList.call(this,width,height);if(!this.$target)return;var target=this.$target;var paddingL=this._paddingLeft;var paddingR=this._paddingRight;var paddingT=this._paddingTop;var paddingB=this._paddingBottom;if(this.indexInViewCalculated){this.indexInViewCalculated=false}else{this.calculateRowAndColumn(width,height);if(this._rowCount==0||this._columnCount==0){target.setContentSize(paddingL+paddingR,paddingT+paddingB);return}this.adjustForJustify(width,height);this.getIndexInView()}if(this.$useVirtualLayout){this.calculateRowAndColumn(width,height);this.adjustForJustify(width,height)}if(this.startIndex==-1||this.endIndex==-1){target.setContentSize(0,0);return}var endIndex=this.endIndex;target.setVirtualElementIndicesInView(this.startIndex,endIndex);var elt;var x;var y;var columnIndex;var rowIndex;var orientedByColumns=this._orientation==eui.TileOrientation.COLUMNS;var index=this.startIndex;var horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var verticalGap=isNaN(this._verticalGap)?0:this._verticalGap;var rowCount=this._rowCount;var columnCount=this._columnCount;var columnWidth=this._columnWidth;var rowHeight=this._rowHeight;for(var i=this.startIndex;i<=endIndex;i++){if(this.$useVirtualLayout){elt=this.target.getVirtualElementAt(i)}else{elt=this.target.getElementAt(i)}if(!egret.is(elt,UIComponentClass)||!elt.$includeInLayout){continue}if(orientedByColumns){columnIndex=Math.ceil((index+1)/rowCount)-1;rowIndex=Math.ceil((index+1)%rowCount)-1;if(rowIndex==-1)rowIndex=rowCount-1}else{columnIndex=Math.ceil((index+1)%columnCount)-1;if(columnIndex==-1)columnIndex=columnCount-1;rowIndex=Math.ceil((index+1)/columnCount)-1}switch(this._horizontalAlign){case egret.HorizontalAlign.RIGHT:x=width-(columnIndex+1)*(columnWidth+horizontalGap)+horizontalGap-paddingR;break;case egret.HorizontalAlign.LEFT:x=columnIndex*(columnWidth+horizontalGap)+paddingL;break;default:x=columnIndex*(columnWidth+horizontalGap)+paddingL}switch(this._verticalAlign){case egret.VerticalAlign.TOP:y=rowIndex*(rowHeight+verticalGap)+paddingT;break;case egret.VerticalAlign.BOTTOM:y=height-(rowIndex+1)*(rowHeight+verticalGap)+verticalGap-paddingB;break;default:y=rowIndex*(rowHeight+verticalGap)+paddingT}this.sizeAndPositionElement(elt,x,y,columnWidth,rowHeight);index++}var hPadding=paddingL+paddingR;var vPadding=paddingT+paddingB;var contentWidth=(columnWidth+horizontalGap)*columnCount-horizontalGap;var contentHeight=(rowHeight+verticalGap)*rowCount-verticalGap;target.setContentSize(contentWidth+hPadding,contentHeight+vPadding)};TileLayout.prototype.sizeAndPositionElement=function(element,cellX,cellY,cellWidth,cellHeight){var elementWidth=NaN;var elementHeight=NaN;var values=element.$UIComponent;if(this._horizontalAlign==eui.JustifyAlign.JUSTIFY)elementWidth=cellWidth;else if(!isNaN(values[6]))elementWidth=cellWidth*values[6]*.01;if(this._verticalAlign==eui.JustifyAlign.JUSTIFY)elementHeight=cellHeight;else if(!isNaN(values[7]))elementHeight=cellHeight*values[7]*.01;element.setLayoutBoundsSize(Math.round(elementWidth),Math.round(elementHeight));var x=cellX;var bounds=egret.$TempRectangle;element.getLayoutBounds(bounds);switch(this._horizontalAlign){case egret.HorizontalAlign.RIGHT:x+=cellWidth-bounds.width;break;case egret.HorizontalAlign.CENTER:x=cellX+(cellWidth-bounds.width)/2;break}var y=cellY;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:y+=cellHeight-bounds.height;break;case egret.VerticalAlign.MIDDLE:y+=(cellHeight-bounds.height)/2;break}element.setLayoutBoundsPosition(Math.round(x),Math.round(y))};TileLayout.prototype.adjustForJustify=function(width,height){var paddingL=this._paddingLeft;var paddingR=this._paddingRight;var paddingT=this._paddingTop;var paddingB=this._paddingBottom;var targetWidth=Math.max(0,width-paddingL-paddingR);var targetHeight=Math.max(0,height-paddingT-paddingB);if(!isNaN(this.explicitVerticalGap))this._verticalGap=this.explicitVerticalGap;if(!isNaN(this.explicitHorizontalGap))this._horizontalGap=this.explicitHorizontalGap;this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap;this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var offsetY=targetHeight-this._rowHeight*this._rowCount;var offsetX=targetWidth-this._columnWidth*this._columnCount;var gapCount;if(offsetY>0){if(this._rowAlign==eui.RowAlign.JUSTIFY_USING_GAP){gapCount=Math.max(1,this._rowCount-1);this._verticalGap=offsetY/gapCount}else if(this._rowAlign==eui.RowAlign.JUSTIFY_USING_HEIGHT){if(this._rowCount>0){this._rowHeight+=(offsetY-(this._rowCount-1)*this._verticalGap)/this._rowCount}}}if(offsetX>0){if(this._columnAlign==eui.ColumnAlign.JUSTIFY_USING_GAP){gapCount=Math.max(1,this._columnCount-1);this._horizontalGap=offsetX/gapCount}else if(this._columnAlign==eui.ColumnAlign.JUSTIFY_USING_WIDTH){if(this._columnCount>0){this._columnWidth+=(offsetX-(this._columnCount-1)*this._horizontalGap)/this._columnCount}}}};return TileLayout}(eui.LayoutBase);eui.TileLayout=TileLayout;__reflect(TileLayout.prototype,"eui.TileLayout")})(eui||(eui={}));var eui;(function(eui){var TileOrientation=function(){function TileOrientation(){}TileOrientation.ROWS="rows";TileOrientation.COLUMNS="columns";return TileOrientation}();eui.TileOrientation=TileOrientation;__reflect(TileOrientation.prototype,"eui.TileOrientation")})(eui||(eui={}));var eui;(function(eui){var UIComponentClass="eui.UIComponent";var VerticalLayout=function(_super){__extends(VerticalLayout,_super);function VerticalLayout(){return _super!==null&&_super.apply(this,arguments)||this}VerticalLayout.prototype.measureReal=function(){var target=this.$target;var count=target.numElements;var numElements=count;var measuredWidth=0;var measuredHeight=0;var bounds=egret.$TempRectangle;for(var i=0;i<count;i++){var layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){numElements--;continue}layoutElement.getPreferredBounds(bounds);measuredHeight+=bounds.height;measuredWidth=Math.max(measuredWidth,bounds.width)}measuredHeight+=(numElements-1)*this.$gap;var hPadding=this.$paddingLeft+this.$paddingRight;var vPadding=this.$paddingTop+this.$paddingBottom;target.setMeasuredSize(measuredWidth+hPadding,measuredHeight+vPadding)};VerticalLayout.prototype.measureVirtual=function(){var target=this.$target;var typicalHeight=this.$typicalHeight;var measuredHeight=this.getElementTotalSize();var measuredWidth=Math.max(this.maxElementSize,this.$typicalWidth);var bounds=egret.$TempRectangle;var endIndex=this.endIndex;var elementSizeTable=this.elementSizeTable;for(var index=this.startIndex;index<endIndex;index++){var layoutElement=target.getElementAt(index);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);measuredHeight+=bounds.height;measuredHeight-=isNaN(elementSizeTable[index])?typicalHeight:elementSizeTable[index];measuredWidth=Math.max(measuredWidth,bounds.width)}var hPadding=this.$paddingLeft+this.$paddingRight;var vPadding=this.$paddingTop+this.$paddingBottom;target.setMeasuredSize(measuredWidth+hPadding,measuredHeight+vPadding)};VerticalLayout.prototype.updateDisplayListReal=function(width,height){var target=this.$target;var paddingL=this.$paddingLeft;var paddingR=this.$paddingRight;var paddingT=this.$paddingTop;var paddingB=this.$paddingBottom;var gap=this.$gap;var targetWidth=Math.max(0,width-paddingL-paddingR);var targetHeight=Math.max(0,height-paddingT-paddingB);var vJustify=this.$verticalAlign==eui.JustifyAlign.JUSTIFY;var hJustify=this.$horizontalAlign==eui.JustifyAlign.JUSTIFY||this.$horizontalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var hAlign=0;if(!hJustify){if(this.$horizontalAlign==egret.HorizontalAlign.CENTER){hAlign=.5}else if(this.$horizontalAlign==egret.HorizontalAlign.RIGHT){hAlign=1}}var count=target.numElements;var numElements=count;var x=paddingL;var y=paddingT;var i;var layoutElement;var totalPreferredHeight=0;var totalPercentHeight=0;var childInfoArray=[];var childInfo;var heightToDistribute=targetHeight;var maxElementWidth=this.maxElementSize;var bounds=egret.$TempRectangle;for(i=0;i<count;i++){var layoutElement_2=target.getElementAt(i);if(!egret.is(layoutElement_2,UIComponentClass)||!layoutElement_2.$includeInLayout){numElements--;continue}layoutElement_2.getPreferredBounds(bounds);maxElementWidth=Math.max(maxElementWidth,bounds.width);if(vJustify){totalPreferredHeight+=bounds.height}else{var values=layoutElement_2.$UIComponent;if(!isNaN(values[7])){totalPercentHeight+=values[7];childInfo=new eui.sys.ChildInfo;childInfo.layoutElement=layoutElement_2;childInfo.percent=values[7];childInfo.min=values[14];childInfo.max=values[15];childInfoArray.push(childInfo)}else{heightToDistribute-=bounds.height}}}heightToDistribute-=gap*(numElements-1);heightToDistribute=heightToDistribute>0?heightToDistribute:0;var excessSpace=targetHeight-totalPreferredHeight-gap*(numElements-1);var averageHeight;var largeChildrenCount=numElements;var heightDic={};if(vJustify){if(excessSpace<0){averageHeight=heightToDistribute/numElements;for(i=0;i<count;i++){layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);if(bounds.height<=averageHeight){heightToDistribute-=bounds.height;largeChildrenCount--;continue}}heightToDistribute=heightToDistribute>0?heightToDistribute:0}}else{if(totalPercentHeight>0){this.flexChildrenProportionally(targetHeight,heightToDistribute,totalPercentHeight,childInfoArray);var roundOff_2=0;var length_32=childInfoArray.length;for(i=0;i<length_32;i++){childInfo=childInfoArray[i];var childSize=Math.round(childInfo.size+roundOff_2);roundOff_2+=childInfo.size-childSize;heightDic[childInfo.layoutElement.$hashCode]=childSize;heightToDistribute-=childSize}heightToDistribute=heightToDistribute>0?heightToDistribute:0}}if(this.$verticalAlign==egret.VerticalAlign.MIDDLE){y=paddingT+heightToDistribute*.5}else if(this.$verticalAlign==egret.VerticalAlign.BOTTOM){y=paddingT+heightToDistribute}var maxX=paddingL;var maxY=paddingT;var dx=0;var dy=0;var justifyWidth=Math.ceil(targetWidth);if(this.$horizontalAlign==eui.JustifyAlign.CONTENT_JUSTIFY)justifyWidth=Math.ceil(Math.max(targetWidth,maxElementWidth));var roundOff=0;var layoutElementHeight;var childHeight;for(i=0;i<count;i++){var exceesWidth=0;layoutElement=target.getElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);layoutElementHeight=NaN;if(vJustify){childHeight=NaN;if(excessSpace>0){childHeight=heightToDistribute*bounds.height/totalPreferredHeight}else if(excessSpace<0&&bounds.height>averageHeight){childHeight=heightToDistribute/largeChildrenCount}if(!isNaN(childHeight)){layoutElementHeight=Math.round(childHeight+roundOff);roundOff+=childHeight-layoutElementHeight}}else{layoutElementHeight=heightDic[layoutElement.$hashCode]}if(hJustify){x=paddingL;layoutElement.setLayoutBoundsSize(justifyWidth,layoutElementHeight);layoutElement.getLayoutBounds(bounds)}else{var layoutElementWidth=NaN;var values=layoutElement.$UIComponent;if(!isNaN(values[6])){var percent=Math.min(100,values[6]);layoutElementWidth=Math.round(targetWidth*percent*.01)}layoutElement.setLayoutBoundsSize(layoutElementWidth,layoutElementHeight);layoutElement.getLayoutBounds(bounds);exceesWidth=(targetWidth-bounds.width)*hAlign;exceesWidth=exceesWidth>0?exceesWidth:0;x=paddingL+exceesWidth}layoutElement.setLayoutBoundsPosition(Math.round(x),Math.round(y));dx=Math.ceil(bounds.width);dy=Math.ceil(bounds.height);maxX=Math.max(maxX,x+dx);maxY=Math.max(maxY,y+dy);y+=dy+gap}this.maxElementSize=maxElementWidth;target.setContentSize(maxX+paddingR,maxY+paddingB)};VerticalLayout.prototype.updateDisplayListVirtual=function(width,height){var target=this.$target;if(this.indexInViewCalculated)this.indexInViewCalculated=false;else this.getIndexInView();var paddingB=this.$paddingBottom;var paddingL=this.$paddingLeft;var paddingR=this.$paddingRight;var gap=this.$gap;var contentHeight;var numElements=target.numElements;if(this.startIndex==-1||this.endIndex==-1){contentHeight=this.getStartPosition(numElements)-gap+paddingB;target.setContentSize(target.contentWidth,contentHeight);return}var endIndex=this.endIndex;target.setVirtualElementIndicesInView(this.startIndex,endIndex);var justify=this.$horizontalAlign==eui.JustifyAlign.JUSTIFY||this.$horizontalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var contentJustify=this.$horizontalAlign==eui.JustifyAlign.CONTENT_JUSTIFY;var hAlign=0;if(!justify){if(this.$horizontalAlign==egret.HorizontalAlign.CENTER){hAlign=.5}else if(this.$horizontalAlign==egret.HorizontalAlign.RIGHT){hAlign=1}}var bounds=egret.$TempRectangle;var targetWidth=Math.max(0,width-paddingL-paddingR);var justifyWidth=Math.ceil(targetWidth);var layoutElement;var typicalHeight=this.$typicalHeight;var typicalWidth=this.$typicalWidth;var maxElementWidth=this.maxElementSize;var oldMaxW=Math.max(typicalWidth,this.maxElementSize);if(contentJustify){for(var index=this.startIndex;index<=endIndex;index++){layoutElement=target.getVirtualElementAt(index);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);maxElementWidth=Math.max(maxElementWidth,bounds.width)}justifyWidth=Math.ceil(Math.max(targetWidth,maxElementWidth))}var x=0;var y=0;var contentWidth=0;var oldElementSize;var needInvalidateSize=false;var elementSizeTable=this.elementSizeTable;for(var i=this.startIndex;i<=endIndex;i++){var exceesWidth=0;layoutElement=target.getVirtualElementAt(i);if(!egret.is(layoutElement,UIComponentClass)||!layoutElement.$includeInLayout){continue}layoutElement.getPreferredBounds(bounds);if(!contentJustify){maxElementWidth=Math.max(maxElementWidth,bounds.width)}if(justify){x=paddingL;layoutElement.setLayoutBoundsSize(justifyWidth,NaN);layoutElement.getLayoutBounds(bounds)}else{layoutElement.getLayoutBounds(bounds);exceesWidth=(targetWidth-bounds.width)*hAlign;exceesWidth=exceesWidth>0?exceesWidth:0;x=paddingL+exceesWidth}contentWidth=Math.max(contentWidth,bounds.width);if(!needInvalidateSize){oldElementSize=isNaN(elementSizeTable[i])?typicalHeight:elementSizeTable[i];if(oldElementSize!=bounds.height)needInvalidateSize=true}elementSizeTable[i]=bounds.height;y=this.getStartPosition(i);layoutElement.setLayoutBoundsPosition(Math.round(x),Math.round(y))}contentWidth+=paddingL+paddingR;contentHeight=this.getStartPosition(numElements)-gap+paddingB;this.maxElementSize=maxElementWidth;target.setContentSize(contentWidth,contentHeight);if(needInvalidateSize||oldMaxW<this.maxElementSize){target.invalidateSize()}};VerticalLayout.prototype.getStartPosition=function(index){if(!this.$useVirtualLayout){if(this.$target){var element=this.$target.getElementAt(index);if(element){return element.y}}}var typicalHeight=this.$typicalHeight;var startPos=this.$paddingTop;var gap=this.$gap;var elementSizeTable=this.elementSizeTable;for(var i=0;i<index;i++){var h=elementSizeTable[i];if(isNaN(h)){h=typicalHeight}startPos+=h+gap}return startPos};VerticalLayout.prototype.getElementSize=function(index){if(this.$useVirtualLayout){var size=this.elementSizeTable[index];if(isNaN(size)){size=this.$typicalHeight}return size}if(this.$target){return this.$target.getElementAt(index).height}return 0};VerticalLayout.prototype.getElementTotalSize=function(){var typicalHeight=this.$typicalHeight;var gap=this.$gap;var totalSize=0;var length=this.$target.numElements;var elementSizeTable=this.elementSizeTable;for(var i=0;i<length;i++){var h=elementSizeTable[i];if(isNaN(h)){h=typicalHeight}totalSize+=h+gap}totalSize-=gap;return totalSize};VerticalLayout.prototype.elementAdded=function(index){if(!this.$useVirtualLayout)return;_super.prototype.elementAdded.call(this,index);this.elementSizeTable.splice(index,0,this.$typicalHeight)};VerticalLayout.prototype.getIndexInView=function(){var target=this.$target;if(!target||target.numElements==0){this.startIndex=this.endIndex=-1;return false}var values=target.$UIComponent;if(values[10]==0||values[11]==0){this.startIndex=this.endIndex=-1;return false}var numElements=target.numElements;var contentHeight=this.getStartPosition(numElements-1)+this.elementSizeTable[numElements-1]+this.$paddingBottom;var minVisibleY=target.scrollV;if(minVisibleY>contentHeight-this.$paddingBottom){this.startIndex=-1;this.endIndex=-1;return false}var maxVisibleY=target.scrollV+values[11];if(maxVisibleY<this.$paddingTop){this.startIndex=-1;this.endIndex=-1;return false}var oldStartIndex=this.startIndex;var oldEndIndex=this.endIndex;this.startIndex=this.findIndexAt(minVisibleY,0,numElements-1);if(this.startIndex==-1)this.startIndex=0;this.endIndex=this.findIndexAt(maxVisibleY,0,numElements-1);if(this.endIndex==-1)this.endIndex=numElements-1;return oldStartIndex!=this.startIndex||oldEndIndex!=this.endIndex};return VerticalLayout}(eui.LinearLayoutBase);eui.VerticalLayout=VerticalLayout;__reflect(VerticalLayout.prototype,"eui.VerticalLayout")})(eui||(eui={}));var eui;(function(eui){var HScrollBar=function(_super){__extends(HScrollBar,_super);function HScrollBar(){return _super!==null&&_super.apply(this,arguments)||this}HScrollBar.prototype.updateDisplayList=function(unscaledWidth,unscaledHeight){_super.prototype.updateDisplayList.call(this,unscaledWidth,unscaledHeight);var thumb=this.thumb;var viewport=this.$viewport;if(!thumb||!viewport){return}var bounds=egret.$TempRectangle;thumb.getPreferredBounds(bounds);var thumbWidth=bounds.width;var thumbY=bounds.y;var hsp=viewport.scrollH;var contentWidth=viewport.contentWidth;var width=viewport.width;if(hsp<=0){var scaleWidth=thumbWidth*(1- -hsp/(width*.5));scaleWidth=Math.max(5,Math.round(scaleWidth));thumb.setLayoutBoundsSize(scaleWidth,NaN);thumb.setLayoutBoundsPosition(0,thumbY)}else if(hsp>=contentWidth-width){var scaleWidth=thumbWidth*(1-(hsp-contentWidth+width)/(width*.5));scaleWidth=Math.max(5,Math.round(scaleWidth));thumb.setLayoutBoundsSize(scaleWidth,NaN);thumb.setLayoutBoundsPosition(unscaledWidth-scaleWidth,thumbY)}else{var thumbX=(unscaledWidth-thumbWidth)*hsp/(contentWidth-width);thumb.setLayoutBoundsSize(NaN,NaN);thumb.setLayoutBoundsPosition(thumbX,thumbY)}};HScrollBar.prototype.onPropertyChanged=function(event){switch(event.property){case"scrollH":case"contentWidth":this.invalidateDisplayList();break}};return HScrollBar}(eui.ScrollBarBase);eui.HScrollBar=HScrollBar;__reflect(HScrollBar.prototype,"eui.HScrollBar")})(eui||(eui={}));var eui;(function(eui){var AddItems=function(){function AddItems(target,propertyName,position,relativeTo){this.target=target;this.propertyName=propertyName;this.position=position;this.relativeTo=relativeTo}AddItems.prototype.apply=function(host,parent){var index;var relative=host[this.relativeTo];var target=host[this.target];var container=this.propertyName?host[this.propertyName]:parent;if(!target||!container)return;switch(this.position){case 0:index=0;break;case 1:index=-1;break;case 2:index=container.getChildIndex(relative);break;case 3:index=container.getChildIndex(relative)+1;break}if(index==-1){index=container.numChildren}if(egret.is(container,"eui.Component")){container.$Component[8].$elementsContent.push(target)}container.addChildAt(target,index)};AddItems.prototype.remove=function(host,parent){var container=this.propertyName?host[this.propertyName]:parent;var target=host[this.target];if(!target||!container)return;if(target.$parent===container){container.removeChild(target)}if(egret.is(container,"eui.Component")){var arr=container.$Component[8].$elementsContent;var idx=arr.indexOf(target);if(idx>-1){arr.splice(idx,1)}}};return AddItems}();eui.AddItems=AddItems;__reflect(AddItems.prototype,"eui.AddItems",["eui.IOverride"])})(eui||(eui={}));var eui;(function(eui){var SetProperty=function(){function SetProperty(target,name,value){this.target=target;this.name=name;this.value=value}SetProperty.prototype.apply=function(host,parent){var obj=this.target?host[this.target]:host;if(!obj)return;this.oldValue=obj[this.name];this.setPropertyValue(obj,this.name,this.value,this.oldValue)};SetProperty.prototype.remove=function(host,parent){var obj=this.target?host[this.target]:host;if(!obj)return;this.setPropertyValue(obj,this.name,this.oldValue,this.oldValue);this.oldValue=null};SetProperty.prototype.setPropertyValue=function(obj,name,value,valueForType){if(value===undefined||value===null)obj[name]=value;else if(typeof valueForType=="number")obj[name]=+value;else if(typeof valueForType=="boolean")obj[name]=this.toBoolean(value);else obj[name]=value};SetProperty.prototype.toBoolean=function(value){if(typeof value=="string")return value.toLowerCase()=="true";return value!=false};return SetProperty}();eui.SetProperty=SetProperty;__reflect(SetProperty.prototype,"eui.SetProperty",["eui.IOverride"])})(eui||(eui={}));var eui;(function(eui){var SetStateProperty=function(){function SetStateProperty(host,templates,chainIndex,target,prop){this.host=host;this.templates=templates;this.chainIndex=chainIndex;this.target=target;this.prop=prop}SetStateProperty.prototype.apply=function(host,parent){if(!this.target){return}var nextOldValue=this.target[this.prop];if(this.oldValue){this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue)}if(nextOldValue){this.oldValue=nextOldValue}eui.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)};SetStateProperty.prototype.remove=function(host,parent){if(!this.target){return}var oldValue=this.oldValue;if(this.target[this.prop]){this.oldValue=this.target[this.prop]}if(oldValue){this.setPropertyValue(this.target,this.prop,oldValue,oldValue)}};SetStateProperty.prototype.setPropertyValue=function(obj,name,value,valueForType){if(value===undefined||value===null)obj[name]=value;else if(typeof valueForType=="number")obj[name]=+value;else if(typeof valueForType=="boolean")obj[name]=this.toBoolean(value);else obj[name]=value};SetStateProperty.prototype.toBoolean=function(value){if(typeof value=="string")return value.toLowerCase()=="true";return value!=false};return SetStateProperty}();eui.SetStateProperty=SetStateProperty;__reflect(SetStateProperty.prototype,"eui.SetStateProperty",["eui.IOverride"])})(eui||(eui={}));var eui;(function(eui){var sys;(function(sys){var SOLUTION_TOLERANCE=.1;var MIN_MAX_TOLERANCE=.1;var MatrixUtil=function(){function MatrixUtil(){}MatrixUtil.fitBounds=function(width,height,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,minWidth,minHeight,maxWidth,maxHeight){if(isNaN(width)&&isNaN(height))return egret.Point.create(preferredWidth,preferredHeight);var newMinWidth=minWidth<MIN_MAX_TOLERANCE?0:minWidth-MIN_MAX_TOLERANCE;var newMinHeight=minHeight<MIN_MAX_TOLERANCE?0:minHeight-MIN_MAX_TOLERANCE;var newMaxWidth=maxWidth+MIN_MAX_TOLERANCE;var newMaxHeight=maxHeight+MIN_MAX_TOLERANCE;var actualSize;if(!isNaN(width)&&!isNaN(height)){actualSize=calcUBoundsToFitTBounds(width,height,matrix,newMinWidth,newMinHeight,newMaxWidth,newMaxHeight);if(!actualSize){var actualSize1=void 0;actualSize1=fitTBoundsWidth(width,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,newMinWidth,newMinHeight,newMaxWidth,newMaxHeight);if(actualSize1){var fitHeight=transformSize(actualSize1.x,actualSize1.y,matrix).height;if(fitHeight-SOLUTION_TOLERANCE>height){egret.Point.release(actualSize1);actualSize1=null}}var actualSize2=void 0;actualSize2=fitTBoundsHeight(height,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,newMinWidth,newMinHeight,newMaxWidth,newMaxHeight);if(actualSize2){var fitWidth=transformSize(actualSize2.x,actualSize2.y,matrix).width;if(fitWidth-SOLUTION_TOLERANCE>width){egret.Point.release(actualSize2);actualSize2=null}}if(actualSize1&&actualSize2){actualSize=actualSize1.x*actualSize1.y>actualSize2.x*actualSize2.y?actualSize1:actualSize2}else if(actualSize1){actualSize=actualSize1}else{actualSize=actualSize2}egret.Point.release(actualSize1);egret.Point.release(actualSize2)}return actualSize}else if(!isNaN(width)){return fitTBoundsWidth(width,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,newMinWidth,newMinHeight,newMaxWidth,newMaxHeight)}else{return fitTBoundsHeight(height,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,newMinWidth,newMinHeight,newMaxWidth,newMaxHeight)}};return MatrixUtil}();sys.MatrixUtil=MatrixUtil;__reflect(MatrixUtil.prototype,"eui.sys.MatrixUtil");function fitTBoundsWidth(width,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,minWidth,minHeight,maxWidth,maxHeight){var actualSize;if(!isNaN(explicitWidth)&&isNaN(explicitHeight)){actualSize=calcUBoundsToFitTBoundsWidth(width,matrix,explicitWidth,preferredHeight,explicitWidth,minHeight,explicitWidth,maxHeight);if(actualSize)return actualSize}else if(isNaN(explicitWidth)&&!isNaN(explicitHeight)){actualSize=calcUBoundsToFitTBoundsWidth(width,matrix,preferredWidth,explicitHeight,minWidth,explicitHeight,maxWidth,explicitHeight);if(actualSize)return actualSize}actualSize=calcUBoundsToFitTBoundsWidth(width,matrix,preferredWidth,preferredHeight,minWidth,minHeight,maxWidth,maxHeight);return actualSize}function fitTBoundsHeight(height,matrix,explicitWidth,explicitHeight,preferredWidth,preferredHeight,minWidth,minHeight,maxWidth,maxHeight){var actualSize;if(!isNaN(explicitWidth)&&isNaN(explicitHeight)){actualSize=calcUBoundsToFitTBoundsHeight(height,matrix,explicitWidth,preferredHeight,explicitWidth,minHeight,explicitWidth,maxHeight);if(actualSize)return actualSize}else if(isNaN(explicitWidth)&&!isNaN(explicitHeight)){actualSize=calcUBoundsToFitTBoundsHeight(height,matrix,preferredWidth,explicitHeight,minWidth,explicitHeight,maxWidth,explicitHeight);if(actualSize)return actualSize}actualSize=calcUBoundsToFitTBoundsHeight(height,matrix,preferredWidth,preferredHeight,minWidth,minHeight,maxWidth,maxHeight);return actualSize}function calcUBoundsToFitTBoundsHeight(h,matrix,preferredX,preferredY,minX,minY,maxX,maxY){var b=matrix.b;var d=matrix.d;if(-1e-9<b&&b<+1e-9)b=0;if(-1e-9<d&&d<+1e-9)d=0;if(b==0&&d==0)return null;if(b==0&&d==0)return null;if(b==0)return egret.Point.create(preferredX,h/Math.abs(d));else if(d==0)return egret.Point.create(h/Math.abs(b),preferredY);var d1=b*d>=0?d:-d;var s;var x;var y;if(d1!=0&&preferredX>0){var invD1=1/d1;preferredX=Math.max(minX,Math.min(maxX,preferredX));x=preferredX;y=(h-b*x)*invD1;if(minY<=y&&y<=maxY&&b*x+d1*y>=0){s=egret.Point.create(x,y)}y=(-h-b*x)*invD1;if(minY<=y&&y<=maxY&&b*x+d1*y<0){if(!s||transformSize(s.x,s.y,matrix).width>transformSize(x,y,matrix).width){egret.Point.release(s);s=egret.Point.create(x,y)}}}if(b!=0&&preferredY>0){var invB=1/b;preferredY=Math.max(minY,Math.min(maxY,preferredY));y=preferredY;x=(h-d1*y)*invB;if(minX<=x&&x<=maxX&&b*x+d1*y>=0){if(!s||transformSize(s.x,s.y,matrix).width>transformSize(x,y,matrix).width)s=egret.Point.create(x,y)}x=(-h-d1*y)*invB;if(minX<=x&&x<=maxX&&b*x+d1*y<0){if(!s||transformSize(s.x,s.y,matrix).width>transformSize(x,y,matrix).width){egret.Point.release(s);s=egret.Point.create(x,y)}}}if(s)return s;var a=matrix.a;var c=matrix.c;var c1=a*c>=0?c:-c;return solveEquation(b,d1,h,minX,minY,maxX,maxY,a,c1)}function calcUBoundsToFitTBoundsWidth(w,matrix,preferredX,preferredY,minX,minY,maxX,maxY){var a=matrix.a;var c=matrix.c;if(-1e-9<a&&a<+1e-9)a=0;if(-1e-9<c&&c<+1e-9)c=0;if(a==0&&c==0)return null;if(a==0)return egret.Point.create(preferredX,w/Math.abs(c));else if(c==0)return egret.Point.create(w/Math.abs(a),preferredY);var c1=a*c>=0?c:-c;var s;var x;var y;if(c1!=0&&preferredX>0){var invC1=1/c1;preferredX=Math.max(minX,Math.min(maxX,preferredX));x=preferredX;y=(w-a*x)*invC1;if(minY<=y&&y<=maxY&&a*x+c1*y>=0){s=egret.Point.create(x,y)}y=(-w-a*x)*invC1;if(minY<=y&&y<=maxY&&a*x+c1*y<0){if(!s||transformSize(s.x,s.y,matrix).height>transformSize(x,y,matrix).height){egret.Point.release(s);s=egret.Point.create(x,y)}}}if(a!=0&&preferredY>0){var invA=1/a;preferredY=Math.max(minY,Math.min(maxY,preferredY));y=preferredY;x=(w-c1*y)*invA;if(minX<=x&&x<=maxX&&a*x+c1*y>=0){if(!s||transformSize(s.x,s.y,matrix).height>transformSize(x,y,matrix).height){egret.Point.release(s);s=egret.Point.create(x,y)}}x=(-w-c1*y)*invA;if(minX<=x&&x<=maxX&&a*x+c1*y<0){if(!s||transformSize(s.x,s.y,matrix).height>transformSize(x,y,matrix).height){egret.Point.release(s);s=egret.Point.create(x,y)}}}if(s)return s;var b=matrix.b;var d=matrix.d;var d1=b*d>=0?d:-d;return solveEquation(a,c1,w,minX,minY,maxX,maxY,b,d1)}function solveEquation(a,c,w,minX,minY,maxX,maxY,b,d){if(a==0||c==0)return null;var x;var y;var A=(w-minX*a)/c;var B=(w-maxX*a)/c;var rangeMinY=Math.max(minY,Math.min(A,B));var rangeMaxY=Math.min(maxY,Math.max(A,B));var det=b*c-a*d;if(rangeMinY<=rangeMaxY){if(Math.abs(det)<1e-9){y=w/(a+c)}else{y=b*w/det}y=Math.max(rangeMinY,Math.min(y,rangeMaxY));x=(w-c*y)/a;return egret.Point.create(x,y)}A=-(minX*a+w)/c;B=-(maxX*a+w)/c;rangeMinY=Math.max(minY,Math.min(A,B));rangeMaxY=Math.min(maxY,Math.max(A,B));if(rangeMinY<=rangeMaxY){if(Math.abs(det)<1e-9){y=-w/(a+c)}else{y=-b*w/det}y=Math.max(rangeMinY,Math.min(y,rangeMaxY));x=(-w-c*y)/a;return egret.Point.create(x,y)}return null}function calcUBoundsToFitTBounds(w,h,matrix,minX,minY,maxX,maxY){var a=matrix.a;var b=matrix.b;var c=matrix.c;var d=matrix.d;if(-1e-9<a&&a<+1e-9)a=0;if(-1e-9<b&&b<+1e-9)b=0;if(-1e-9<c&&c<+1e-9)c=0;if(-1e-9<d&&d<+1e-9)d=0;if(b==0&&c==0){if(a==0||d==0)return null;return egret.Point.create(w/Math.abs(a),h/Math.abs(d))}if(a==0&&d==0){if(b==0||c==0)return null;return egret.Point.create(h/Math.abs(b),w/Math.abs(c))}var c1=a*c>=0?c:-c;var d1=b*d>=0?d:-d;var det=a*d1-b*c1;if(Math.abs(det)<1e-9){if(c1==0||a==0||a==-c1)return null;if(Math.abs(a*h-b*w)>1e-9)return null;return solveEquation(a,c1,w,minX,minX,maxX,maxY,b,d1)}var invDet=1/det;w*=invDet;h*=invDet;var s;s=solveSystem(a,c1,b,d1,w,h);if(s&&minX<=s.x&&s.x<=maxX&&minY<=s.y&&s.y<=maxY&&a*s.x+c1*s.x>=0&&b*s.x+d1*s.y>=0)return s;s=solveSystem(a,c1,b,d1,w,-h);if(s&&minX<=s.x&&s.x<=maxX&&minY<=s.y&&s.y<=maxY&&a*s.x+c1*s.x>=0&&b*s.x+d1*s.y<0)return s;s=solveSystem(a,c1,b,d1,-w,h);if(s&&minX<=s.x&&s.x<=maxX&&minY<=s.y&&s.y<=maxY&&a*s.x+c1*s.x<0&&b*s.x+d1*s.y>=0)return s;s=solveSystem(a,c1,b,d1,-w,-h);if(s&&minX<=s.x&&s.x<=maxX&&minY<=s.y&&s.y<=maxY&&a*s.x+c1*s.x<0&&b*s.x+d1*s.y<0)return s;egret.Point.release(s);return null}function transformSize(width,height,matrix){var bounds=egret.$TempRectangle.setTo(0,0,width,height);matrix.$transformBounds(bounds);return bounds}function solveSystem(a,c,b,d,mOverDet,nOverDet){return egret.Point.create(d*mOverDet-c*nOverDet,a*nOverDet-b*mOverDet)}})(sys=eui.sys||(eui.sys={}))})(eui||(eui={}));